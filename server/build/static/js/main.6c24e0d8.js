/*! For license information please see main.6c24e0d8.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var x=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case E:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function z(e){0>F||(e.current=M[F],M[F]=null,F--)}function V(e,t){F++,M[F]=e.current,e.current=t}var B=U(null),$=U(null),H=U(null),q=U(null);function W(e,t){switch(V(H,t),V($,e),V(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(B),V(B,e)}function K(){z(B),z($),z(H)}function G(e){null!==e.memoizedState&&V(q,e);var t=B.current,n=sd(t,e.type);t!==n&&(V($,e),V(B,n))}function Q(e){$.current===e&&(z(B),z($)),q.current===e&&(z(q),Gd._currentValue=j)}var Y=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=ve(r):0!==(a&=o)?i=ve(a):n||0!==(n=o&~e)&&(i=ve(n)):0!==(o=r&~s)?i=ve(o):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ie(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Pe=Math.random().toString(36).slice(2),Re="__reactFiber$"+Pe,De="__reactProps$"+Pe,Oe="__reactContainer$"+Pe,Le="__reactEvents$"+Pe,je="__reactListeners$"+Pe,Me="__reactHandles$"+Pe,Fe="__reactResources$"+Pe,Ue="__reactMarker$"+Pe;function ze(e){delete e[Re],delete e[De],delete e[Le],delete e[je],delete e[Me]}function Ve(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Re])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Ue]=!0}var We=new Set,Ke={};function Ge(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ke[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Ye,Je,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&(Xe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Je=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Je}var st=!1;function at(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(D(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function It(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&kt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&kt(e,s,t[s])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xt(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Ot(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Lt=!1;function jt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Rt||null!==Dt)&&(Vc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Dh){Ut=!1}var Vt=null,Bt=null,$t=null;function Ht(){if($t)return $t;var e,t,n=Bt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Kt(){return!1}function Gt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Yt,Jt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Gt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Qt=e.screenX-Jt.screenX,Yt=e.screenY-Jt.screenY):Yt=Qt=0,Jt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=Gt(nn),sn=Gt(h({},nn,{dataTransfer:0})),an=Gt(h({},en,{relatedTarget:0})),on=Gt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Gt(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Gt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Gt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(h({},Xt,{newState:0,oldState:0})),En=[9,13,27,32],_n=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var kn=Ft&&"TextEvent"in window&&!Sn,In=Ft&&(!_n||Sn&&8<Sn&&11>=Sn),Tn=String.fromCharCode(32),Cn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Dn(e,t,n,r){Rt?Dt?Dt.push(r):Dt=[r]:Rt=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Ln=null;function jn(e){ju(e,0)}function Mn(e){if(ht($e(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var zn;if(Ft){var Vn="oninput"in document;if(!Vn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),Vn="function"===typeof Bn.oninput}zn=Vn}else zn=!1;Un=zn&&(!document.documentMode||9<document.documentMode)}function $n(){On&&(On.detachEvent("onpropertychange",Hn),Ln=On=null)}function Hn(e){if("value"===e.propertyName&&Mn(Ln)){var t=[];Dn(t,Ln,e,Pt(e)),jt(jn,t)}}function qn(e,t,n){"focusin"===e?($n(),Ln=n,(On=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&$n()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Ln)}function Kn(e,t){if("click"===e)return Mn(t)}function Gn(e,t){if("input"===e||"change"===e)return Mn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Yn(sr,r)||(sr=r,0<(r=Hu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),wr=hr("transitionend"),br=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){br.set(e,t),Ge(t,[e])}Er.push("scrollEnd");var Sr=new WeakMap;function kr(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Ir=[],Tr=0,Cr=0;function Nr(){for(var e=Tr,t=Cr=Tr=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var i=Ir[t];Ir[t++]=null;var s=Ir[t];if(Ir[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function xr(e,t,n,r){Ir[Tr++]=e,Ir[Tr++]=t,Ir[Tr++]=n,Ir[Tr++]=r,Cr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return xr(e,t,n,r),Dr(e)}function Pr(e,t){return xr(e,null,null,t),Dr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Rc)throw Rc=0,Dc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,t,n,r){return new Lr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=jr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Mr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=jr(31,n,t,i)).elementType=C,e.lanes=s,e;case g:return Vr(n.children,i,s,t);case y:o=8,i|=24;break;case v:return(e=jr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case S:return(e=jr(13,n,t,i)).elementType=S,e.lanes=s,e;case k:return(e=jr(19,n,t,i)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:case E:o=10;break e;case b:o=9;break e;case _:o=11;break e;case I:o=14;break e;case T:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=jr(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vr(e,t,n,r){return(e=jr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=jr(6,e,null,t)).lanes=n,e}function $r(e,t,n){return(t=jr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Wr=null,Kr=0,Gr=[],Qr=0,Yr=null,Jr=1,Xr="";function Zr(e,t){Hr[qr++]=Kr,Hr[qr++]=Wr,Wr=e,Kr=t}function ei(e,t,n){Gr[Qr++]=Jr,Gr[Qr++]=Xr,Gr[Qr++]=Yr,Yr=e;var r=Jr;e=Xr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jr=1<<32-fe(t)+i|n<<i|r,Xr=s+e}else Jr=1<<s|n<<i|r,Xr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Wr;)Wr=Hr[--qr],Hr[qr]=null,Kr=Hr[--qr],Hr[qr]=null;for(;e===Yr;)Yr=Gr[--Qr],Gr[Qr]=null,Xr=Gr[--Qr],Gr[Qr]=null,Jr=Gr[--Qr],Gr[Qr]=null}var ri=null,ii=null,si=!1,ai=null,oi=!1,li=Error(a(519));function ci(e){throw mi(kr(Error(a(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[De]=r,n){case"dialog":Mu("cancel",t),Mu("close",t);break;case"iframe":case"object":case"embed":Mu("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Mu(Ou[n],t);break;case"source":Mu("error",t);break;case"img":case"image":case"link":Mu("error",t),Mu("load",t);break;case"details":Mu("toggle",t);break;case"input":Mu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Mu("invalid",t);break;case"textarea":Mu("invalid",t),Et(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Mu("beforetoggle",t),Mu("toggle",t)),null!=r.onScroll&&Mu("scroll",t),null!=r.onScrollEnd&&Mu("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=vd,vd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=ai;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ai=null),e}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=U(null),yi=null,vi=null;function wi(e,t,n){V(gi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=gi.current,z(gi)}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _i(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ei(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Ei(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Si(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&_i(t,e,n,r),t.flags|=262144}function ki(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ii(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ti(e){return Ni(yi,e)}function Ci(e,t){return null===yi&&Ii(e),Ni(e,t)}function Ni(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var xi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ai=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Ri={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new xi,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Ai(Pi,function(){e.controller.abort()})}var Li=null,ji=0,Mi=0,Fi=null;function Ui(){if(0===--ji&&null!==Li){null!==Fi&&(Fi.status="fulfilled");var e=Li;Li=null,Mi=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];ji=0,Mi=xu(),Fi={status:"pending",value:void 0,then:function(e){n.push(e)}}}ji++,t.then(Ui,Ui)}(0,t),null!==zi&&zi(e,t)};var Vi=U(null);function Bi(){var e=Vi.current;return null!==e?e:rc.pooledCache}function $i(e,t){V(Vi,null===t?Vi.current:t.pool)}function Hi(){var e=Bi();return null===e?null:{parent:Ri._currentValue,pool:e}}var qi=Error(a(460)),Wi=Error(a(474)),Ki=Error(a(542)),Gi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Xi=t,qi}}var Xi=null;function Zi(){if(null===Xi)throw Error(a(459));var e=Xi;return Xi=null,e}function es(e){if(e===qi||e===Ki)throw Error(a(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Rr(e,null,n),t}return xr(e,r,t,n),Dr(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function os(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Fi)throw Fi}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===Mi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(y,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=a,e.lanes=a,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var fs=U(null),ps=U(0);function ms(e,t){V(ps,e=dc),V(fs,t),dc=e|t.baseLanes}function gs(){V(ps,dc),V(fs,fs.current)}function ys(){dc=ps.current,z(fs),z(ps)}var vs=0,ws=null,bs=null,Es=null,_s=!1,Ss=!1,ks=!1,Is=0,Ts=0,Cs=null,Ns=0;function xs(){throw Error(a(321))}function As(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return vs=s,ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?qa:Wa,ks=!1,s=n(r,i),ks=!1,Ss&&(s=Ds(t,n,r,i)),Rs(e),s}function Rs(e){O.H=Ha;var t=null!==bs&&null!==bs.next;if(vs=0,Es=bs=ws=null,_s=!1,Ts=0,Cs=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&ki(e)&&(Co=!0)}function Ds(e,t,n,r){ws=e;var i=0;do{if(Ss&&(Cs=null),Ts=0,Ss=!1,25<=i)throw Error(a(301));if(i+=1,Es=bs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Ka,s=t(n,r)}while(Ss);return s}function Os(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?zs(t):t,e=e.useState()[0],(null!==bs?bs.memoizedState:null)!==e&&(ws.flags|=1024),t}function Ls(){var e=0!==Is;return Is=0,e}function js(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ms(e){if(_s){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_s=!1}vs=0,Es=bs=ws=null,Ss=!1,Ts=Is=0,Cs=null}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Es?ws.memoizedState=Es=e:Es=Es.next=e,Es}function Us(){if(null===bs){var e=ws.alternate;e=null!==e?e.memoizedState:null}else e=bs.next;var t=null===Es?ws.memoizedState:Es.next;if(null!==t)Es=t,bs=e;else{if(null===e){if(null===ws.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(bs=e).memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},null===Es?ws.memoizedState=Es=e:Es=Es.next=e}return Es}function zs(e){var t=Ts;return Ts+=1,null===Cs&&(Cs=[]),e=Ji(Cs,e,t),t=ws,null===(null===Es?t.memoizedState:Es.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?qa:Wa),e}function Vs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zs(e);if(e.$$typeof===E)return Ti(e)}throw Error(a(438,String(e)))}function Bs(e){var t=null,n=ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ws.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function $s(e,t){return"function"===typeof t?t(e):t}function Hs(e){return qs(Us(),bs,e)}function qs(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sc&h)===h:(vs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Mi&&(d=!0);else{if((vs&f)===f){u=u.next,f===Mi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,ws.lanes|=f,fc|=f}h=u.action,ks&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,ws.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Qn(s,e.memoizedState)&&(Co=!0,d&&null!==(n=Fi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ws(e){var t=Us(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Qn(s,t.memoizedState)||(Co=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ks(e,t,n){var r=ws,i=Us(),s=si;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Qn((bs||i).memoizedState,n);if(o&&(i.memoizedState=n,Co=!0),i=i.queue,ga(2048,8,Ys.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Es&&1&Es.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,i,n,t),null),null===rc)throw Error(a(349));s||0!==(124&vs)||Gs(r,t,n)}return n}function Gs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Js(t)&&Xs(e)}function Ys(e,t,n){return n(function(){Js(t)&&Xs(e)})}function Js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Xs(e){var t=Pr(e,2);null!==t&&jc(t,e,2)}function Zs(e){var t=Fs();if("function"===typeof e){var n=e;if(e=n(),ks){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,qs(e,bs,"function"===typeof r?r:$s)}function ta(e,t,n,r,i){if(Va(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,na(t,s)):(s.next=n.next,t.pending=n.next=s)}}function na(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,a={};O.T=a;try{var o=n(i,r),l=O.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){sa(e,t,c)}finally{O.T=s}}else try{ra(e,t,s=n(i,r))}catch(u){sa(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return sa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function sa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=ws;if(si){if(ii){t:{for(var i=ii,s=oi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Fs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=Fa.bind(null,ws,r),r.dispatch=n,r=Zs(!1),s=za.bind(null,ws,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Fs()).queue=i,n=ta.bind(null,ws,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Us(),bs,e)}function ua(e,t,n){if(t=qs(e,t,oa)[0],e=Hs($s)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zs(t)}catch(a){if(a===qi)throw Ki;throw a}else r=t;var i=(t=Us()).queue,s=i.dispatch;return n!==t.memoizedState&&(ws.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,i,n),null)),[r,s,e]}function da(e,t){e.action=t}function ha(e){var t=Us(),n=bs;if(null!==n)return ua(t,n,e);Us(),t=t.memoizedState;var r=(n=Us()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(){return Us().memoizedState}function ma(e,t,n,r){var i=Fs();r=void 0===r?null:r,ws.flags|=e,i.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var i=Us();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==bs&&null!==r&&As(r,bs.memoizedState.deps)?i.memoizedState=fa(t,s,n,r):(ws.flags|=e,i.memoizedState=fa(1|t,s,n,r))}function ya(e,t){ma(8390656,8,e,t)}function va(e,t){ga(2048,8,e,t)}function wa(e,t){return ga(4,2,e,t)}function ba(e,t){return ga(4,4,e,t)}function Ea(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function _a(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,Ea.bind(null,t,e),n)}function Sa(){}function ka(e,t){var n=Us();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&As(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ia(e,t){var n=Us();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&As(t,r[1]))return r[0];if(r=e(),ks){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ta(e,t,n){return void 0===n||0!==(1073741824&vs)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),ws.lanes|=e,fc|=e,n)}function Ca(e,t,n,r){return Qn(n,t)?n:null!==fs.current?(e=Ta(e,n,r),Qn(e,t)||(Co=!0),e):0===(42&vs)?(Co=!0,e.memoizedState=n):(e=Lc(),ws.lanes|=e,fc|=e,t)}function Na(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var a=O.T,o={};O.T=o,za(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ua(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Oc());else Ua(e,t,r,Oc())}catch(u){Ua(e,t,{then:function(){},status:"rejected",reason:u},Oc())}finally{L.p=s,O.T=a}}function xa(){}function Aa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Pa(e).queue;Na(e,i,t,j,null===n?xa:function(){return Ra(e),n(r)})}function Pa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:j},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ra(e){Ua(e,Pa(e).next.queue,{},Oc())}function Da(){return Ti(Gd)}function Oa(){return Us().memoizedState}function La(){return Us().memoizedState}function ja(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=ss(t,e=is(n),n);return null!==r&&(jc(r,t,n),as(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function Ma(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Va(e)?Ba(t,n):null!==(n=Ar(e,t,n,r))&&(jc(n,e,r),$a(n,t,r))}function Fa(e,t,n){Ua(e,t,n,Oc())}function Ua(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Va(e))Ba(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Qn(o,a))return xr(e,t,i,0),null===rc&&Nr(),!1}catch(l){}if(null!==(n=Ar(e,t,i,r)))return jc(n,e,r),$a(n,t,r),!0}return!1}function za(e,t,n,r){if(r={lane:2,revertLane:xu(),action:r,hasEagerState:!1,eagerState:null,next:null},Va(e)){if(t)throw Error(a(479))}else null!==(t=Ar(e,n,r,2))&&jc(t,e,2)}function Va(e){var t=e.alternate;return e===ws||null!==t&&t===ws}function Ba(e,t){Ss=_s=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Ha={readContext:Ti,use:Vs,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useLayoutEffect:xs,useInsertionEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useSyncExternalStore:xs,useId:xs,useHostTransitionStatus:xs,useFormState:xs,useActionState:xs,useOptimistic:xs,useMemoCache:xs,useCacheRefresh:xs},qa={readContext:Ti,use:Vs,useCallback:function(e,t){return Fs().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4194308,4,Ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=Fs();t=void 0===t?null:t;var r=e();if(ks){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fs();if(void 0!==n){var i=n(t);if(ks){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ma.bind(null,ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fs().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Fa.bind(null,ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Sa,useDeferredValue:function(e,t){return Ta(Fs(),e,t)},useTransition:function(){var e=Zs(!1);return e=Na.bind(null,ws,e.queue,!0,!1),Fs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ws,i=Fs();if(si){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&sc)||Gs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ya(Ys.bind(null,r,s,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,s,n,t),null),n},useId:function(){var e=Fs(),t=rc.identifierPrefix;if(si){var n=Xr;t="\xab"+t+"R"+(n=(Jr&~(1<<32-fe(Jr)-1)).toString(32)+n),0<(n=Is++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ns++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Da,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=za.bind(null,ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bs,useCacheRefresh:function(){return Fs().memoizedState=ja.bind(null,ws)}},Wa={readContext:Ti,use:Vs,useCallback:ka,useContext:Ti,useEffect:va,useImperativeHandle:_a,useInsertionEffect:wa,useLayoutEffect:ba,useMemo:Ia,useReducer:Hs,useRef:pa,useState:function(){return Hs($s)},useDebugValue:Sa,useDeferredValue:function(e,t){return Ca(Us(),bs.memoizedState,e,t)},useTransition:function(){var e=Hs($s)[0],t=Us().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Ks,useId:Oa,useHostTransitionStatus:Da,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Us(),0,e,t)},useMemoCache:Bs,useCacheRefresh:La},Ka={readContext:Ti,use:Vs,useCallback:ka,useContext:Ti,useEffect:va,useImperativeHandle:_a,useInsertionEffect:wa,useLayoutEffect:ba,useMemo:Ia,useReducer:Ws,useRef:pa,useState:function(){return Ws($s)},useDebugValue:Sa,useDeferredValue:function(e,t){var n=Us();return null===bs?Ta(n,e,t):Ca(n,bs.memoizedState,e,t)},useTransition:function(){var e=Ws($s)[0],t=Us().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Ks,useId:Oa,useHostTransitionStatus:Da,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Us();return null!==bs?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bs,useCacheRefresh:La},Ga=null,Qa=0;function Ya(e){var t=Qa;return Qa+=1,null===Ga&&(Ga=[]),Ji(Ga,e,t)}function Ja(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xa(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&Za(s)===t.type)?(Ja(t=i(t,n.props),n),t.return=e,t):(Ja(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Ja(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=$r(t,e.mode,n)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),n)}if(D(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ya(t),n);if(t.$$typeof===E)return h(e,Ci(e,t),n);Xa(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Ya(n),r);if(n.$$typeof===E)return f(e,t,Ci(e,n),r);Xa(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Ya(r),i);if(r.$$typeof===E)return y(e,t,n,Ci(t,r),i);Xa(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===T&&Za(w)===c.type){n(l,c.sibling),Ja(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ja(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=$r(u,l.mode,d)).return=l,l=d}return o(l);case T:return v(l,c,u=(w=u._init)(u._payload),d)}if(D(u))return function(i,a,o,l){for(var c=null,u=null,d=a,p=a=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=s(g,a,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===o.length)return n(i,d),si&&Zr(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(a=s(d,a,p),null===u?c=d:u.sibling=d,u=d);return si&&Zr(i,p),c}for(d=r(d);p<o.length;p++)null!==(m=y(d,i,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=s(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),si&&Zr(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(w=A(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,m=o=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var w=f(i,p,v.value,c);if(null===w){null===p&&(p=g);break}e&&p&&null===w.alternate&&t(i,p),o=s(w,o,m),null===d?u=w:d.sibling=w,d=w,p=g}if(v.done)return n(i,p),si&&Zr(i,m),u;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(o=s(v,o,m),null===d?u=v:d.sibling=v,d=v);return si&&Zr(i,m),u}for(p=r(p);!v.done;m++,v=l.next())null!==(v=y(p,i,m,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),o=s(v,o,m),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(i,e)}),si&&Zr(i,m),u}(l,c,u=w.call(u),d)}if("function"===typeof u.then)return v(l,c,Ya(u),d);if(u.$$typeof===E)return v(l,c,Ci(l,u),d);Xa(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Qa=0;var i=v(e,t,n,r);return Ga=null,i}catch(a){if(a===qi||a===Ki)throw a;var s=jr(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var to=eo(!0),no=eo(!1),ro=U(null),io=null;function so(e){var t=e.alternate;V(co,1&co.current),V(ro,e),null===io&&(null===t||null!==fs.current||null!==t.memoizedState)&&(io=e)}function ao(e){if(22===e.tag){if(V(co,co.current),V(ro,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else oo()}function oo(){V(co,co.current),V(ro,ro.current)}function lo(e){z(ro),io===e&&(io=null),z(co)}var co=U(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(jc(t,e,r),as(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(jc(t,e,r),as(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(jc(t,e,n),as(t,e,n))}};function po(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(i,s))}function mo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var yo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vo(e){yo(e)}function wo(e){console.error(e)}function bo(e){yo(e)}function Eo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _o(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function So(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){Eo(e,t)},n}function ko(e){return(e=is(e)).tag=3,e}function Io(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){_o(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){_o(t,n,r),"function"!==typeof i&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var To=Error(a(461)),Co=!1;function No(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ii(t),r=Ps(e,t,n,a,s,i),o=Ls(),null===e||Co?(si&&o&&ti(t),t.flags|=1,No(e,t,r,i),t.child):(js(e,t,i),Qo(e,t,i))}function Ao(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mr(s)||void 0!==s.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Po(e,t,s,r,i))}if(s=e.child,!Yo(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(a,r)&&e.ref===t.ref)return Qo(e,t,i)}return t.flags|=1,(e=Fr(s,r)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Yn(s,r)&&e.ref===t.ref){if(Co=!1,t.pendingProps=r=s,!Yo(e,i))return t.lanes=e.lanes,Qo(e,t,i);0!==(131072&e.flags)&&(Co=!0)}}return Lo(e,t,n,r,i)}function Ro(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Do(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Do(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$i(0,null!==s?s.cachePool:null),null!==s?ms(t,s):gs(),ao(t)}else null!==s?($i(0,s.cachePool),ms(t,s),oo(),t.memoizedState=null):(null!==e&&$i(0,null),gs(),oo());return No(e,t,i,n),t.child}function Do(e,t,n,r){var i=Bi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&$i(0,null),gs(),ao(t),null!==e&&Si(e,t,r,!0),null}function Oo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Lo(e,t,n,r,i){return Ii(t),n=Ps(e,t,n,r,void 0,i),r=Ls(),null===e||Co?(si&&r&&ti(t),t.flags|=1,No(e,t,n,i),t.child):(js(e,t,i),Qo(e,t,i))}function jo(e,t,n,r,i,s){return Ii(t),t.updateQueue=null,n=Ds(t,r,n,i),Rs(e),r=Ls(),null===e||Co?(si&&r&&ti(t),t.flags|=1,No(e,t,n,s),t.child):(js(e,t,s),Qo(e,t,s))}function Mo(e,t,n,r,i){if(Ii(t),null===t.stateNode){var s=Or,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ti(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ti(a):Or,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&fo.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=go(n,o);s.props=l;var c=s.context,u=n.contextType;a=Or,"object"===typeof u&&null!==u&&(a=Ti(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&mo(t,s,r,a),ts=!1;var h=t.memoizedState;s.state=h,us(t,r,s,i),cs(),c=t.memoizedState,o||h!==c||ts?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ts||po(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=go(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Or,"object"===typeof c&&null!==c&&(l=Ti(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&mo(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,us(t,r,s,i),cs();var f=t.memoizedState;a!==d||h!==f||ts||null!==e&&null!==e.dependencies&&ki(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),f=t.memoizedState),(u=ts||po(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ki(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Oo(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,i),t.child=to(t,null,n,i)):No(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qo(e,t,i),e}function Fo(e,t,n,r){return fi(),t.flags|=256,No(e,t,n,r),t.child}var Uo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Hi()}}function Vo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Bo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?so(t):oo(),si){var l,c=ii;if(l=c){e:{for(l=c,c=oi;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Jr,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=jr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=i.children,i=i.fallback,s?(oo(),c=Ho({mode:"hidden",children:c},s=t.mode),i=Vr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=zo(n),s.childLanes=Vo(e,r,n),t.memoizedState=Uo,i):(so(t),$o(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=qo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=i.fallback,c=t.mode,i=Ho({mode:"visible",children:i.children},c),(s=Vr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,to(t,e.child,null,n),(i=t.child).memoizedState=zo(n),i.childLanes=Vo(e,r,n),t.memoizedState=Uo,t=s);else if(so(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=qo(e,t,n)}else if(Co||Si(e,t,n,!1),r=0!==(n&e.childLanes),Co||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ne(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),jc(r,e,i),To;"$?"===c.data||Kc(),t=qo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,si=!0,ai=null,oi=!1,null!==e&&(Gr[Qr++]=Jr,Gr[Qr++]=Xr,Gr[Qr++]=Yr,Jr=e.id,Xr=e.overflow,Yr=t),(t=$o(t,i.children)).flags|=4096);return t}return s?(oo(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Fr(u,s):(s=Vr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Ri._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Vo(e,r,n),t.memoizedState=Uo,i):(so(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $o(e,t){return(t=Ho({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ho(e,t){return(e=jr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qo(e,t,n){return to(t,e.child,null,n),(e=$o(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Ko(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Go(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(No(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wo(e,n,t);else if(19===e.tag)Wo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(co,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ko(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ko(t,!0,n,null,s);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Si(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ki(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Yo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),wi(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:G(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(so(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(so(t),null!==(e=Qo(e,t,n))?e.sibling:null);so(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Si(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Go(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n);case 24:wi(0,Ri,e.memoizedState.cache)}return Qo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,si&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===_){t.tag=11,t=xo(null,t,r,e,n);break e}if(i===I){t.tag=14,t=Ao(null,t,r,e,n);break e}}throw t=R(r)||r,Error(a(306,t,""))}Mr(r)?(e=go(r,e),t.tag=1,t=Mo(null,t,r,e,n)):(t.tag=0,t=Lo(null,t,r,e,n))}return t;case 0:return Lo(e,t,t.type,t.pendingProps,n);case 1:return Mo(e,t,r=t.type,i=go(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var o=t.memoizedState;if(r=o.cache,wi(0,Ri,r),r!==s.cache&&_i(t,[Ri],n,!0),cs(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Fo(e,t,r,n);break e}if(r!==i){mi(i=kr(Error(a(424)),t)),t=Fo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,si=!0,ai=null,oi=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Qo(e,t,n);break e}No(e,t,r,n)}t=t.child}return t;case 26:return Oo(e,t),null===e?(n=Nd(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Re]=t,r[De]=e,ed(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Nd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&si&&(r=t.stateNode=bd(t.type,t.pendingProps,H.current),ri=t,oi=!0,i=ii,fd(t.type)?(vd=i,ii=yd(r.firstChild)):ii=i),No(e,t,t.pendingProps.children,n),Oo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,oi))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),oi=!1,i=!0):i=!1),i||ci(t)),G(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,ad(i,s)?r=null:null!==o&&ad(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,Os,null,null,n),Gd._currentValue=i),Oo(e,t),No(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,oi))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Bo(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):No(e,t,r,n),t.child;case 11:return xo(e,t,t.type,t.pendingProps,n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),No(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ii(t),r=r(i=Ti(i)),t.flags|=1,No(e,t,r,n),t.child;case 14:return Ao(e,t,t.type,t.pendingProps,n);case 15:return Po(e,t,t.type,t.pendingProps,n);case 19:return Go(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ho(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ro(e,t,n);case 24:return Ii(t),r=Ti(Ri),null===e?(null===(i=Bi())&&(i=rc,s=Di(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),wi(0,Ri,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Ri,r)):(r=s.cache,wi(0,Ri,r),r!==i.cache&&_i(t,[Ri],n,!0))),No(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Xo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Vd(t)){if(null!==(t=ro.current)&&((4194048&sc)===sc?null!==io:(62914560&sc)!==sc&&0===(536870912&sc)||t!==io))throw Xi=Gi,Wi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Ri),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Xo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Xo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Xo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Xo(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=B.current,hi(t)?ui(t):(e=bd(i,r,n),t.stateNode=e,Xo(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=B.current,hi(t))ui(t);else{switch(i=rd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Xo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Xo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(z(co),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return V(co,1&co.current|2),t.child}e=e.sibling}null!==i.tail&&te()>_c&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>_c&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=co.current,V(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Vi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Ri),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Ri),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return K(),null;case 10:return bi(t.type),null;case 22:case 23:return lo(t),ys(),null!==e&&z(Vi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Ri),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:bi(Ri),K();break;case 26:case 27:case 5:Q(t);break;case 4:K();break;case 13:lo(t);break;case 19:z(co);break;case 10:bi(t.type);break;case 22:case 23:lo(t),ys(),null!==e&&z(Vi);break;case 24:bi(Ri)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Xu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Xu(e,t,f,p,r,h)}}return void gt(e,o,l,c,u,d,s,i);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Xu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Xu(e,t,i,s,r,c)}return t=l,n=o,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Xu(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&Xu(e,t,o,i,r,s)}return void bt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Xu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Xu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Xu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Xu(e,t,u,f,r,p)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zu(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Xu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Xu(e,t,h,f,r,p)}(r,e.type,n,t),r[De]=t}catch(i){uu(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Re]=e,t[De]=n}catch(s){uu(e,e.return,s)}}var wl=!1,bl=!1,El=!1,_l="function"===typeof WeakSet?WeakSet:Set,Sl=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ml(e,n),4&r&&al(5,n);break;case 1:if(Ml(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var i=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ml(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Ml(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ml(e,n);break;case 13:Ml(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||bl,i=wl;var s=bl;wl=r,(bl=t)&&!s?Ul(e,n,0!==(8772&n.subtreeFlags)):Ml(e,n),wl=i,bl=s}break;case 30:break;default:Ml(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Cl=!1;function Nl(e,t,n){for(n=n.child;null!==n;)xl(e,t,n),n=n.sibling}function xl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:bl||dl(n,t),Nl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||dl(n,t);var r=Tl,i=Cl;fd(n.type)&&(Tl=n.stateNode,Cl=!1),Nl(e,t,n),Ed(n.stateNode),Tl=r,Cl=i;break;case 5:bl||dl(n,t);case 6:if(r=Tl,i=Cl,Tl=null,Nl(e,t,n),Cl=i,null!==(Tl=r))if(Cl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Tl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Tl&&(Cl?(pd(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):pd(Tl,n.stateNode));break;case 4:r=Tl,i=Cl,Tl=n.stateNode.containerInfo,Cl=!0,Nl(e,t,n),Tl=r,Cl=i;break;case 0:case 11:case 14:case 15:bl||ol(2,n,t),bl||ol(4,n,t),Nl(e,t,n);break;case 1:bl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Nl(e,t,n);break;case 21:Nl(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Nl(e,t,n),bl=r;break;default:Nl(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){uu(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Tl=l.stateNode,Cl=!1;break e}break;case 5:Tl=l.stateNode,Cl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Tl)throw Error(a(160));xl(s,o,i),Tl=null,Cl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Dl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(bl||null===n||dl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Dl;if(Rl(t,e),Ll(e),512&r&&(bl||null===n||dl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ue]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ed(s,r,n),s[Re]=e,qe(s),r=s;break e;case"link":var o=Ud("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=Ud("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Re]=e,qe(s),r=s}e.stateNode=r}else zd(i,e.type,e.stateNode);else e.stateNode=Od(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zd(i,e.type,e.stateNode):Od(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(bl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(bl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{_t(i,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(El=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Fd=null,i=Dl,Dl=kd(t.containerInfo),Rl(t,e),Dl=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(p){uu(e,e.return,p)}El&&(El=!1,jl(e));break;case 4:r=Dl,Dl=kd(e.stateNode.containerInfo),Rl(t,e),Ll(e),Dl=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ec=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=bl;if(wl=u||i,bl=d||c,Rl(t,e),bl=d,wl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||bl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,ml(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(_t(s,""),n.flags&=-33),yl(e,ml(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,ml(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:Ed(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Ul(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Ul(i,s,n),al(4,s);break;case 1:if(Ul(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(s),ul(s,s.return);break;case 27:vl(s);case 26:case 5:Ul(i,s,n),n&&null===r&&4&a&&hl(s),ul(s,s.return);break;case 12:Ul(i,s,n);break;case 13:Ul(i,s,n),n&&4&a&&Al(i,s);break;case 22:null===s.memoizedState&&Ul(i,s,n),ul(s,s.return);break;case 30:break;default:Ul(i,s,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function Vl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)$l(e,t,n,r),t=t.sibling}function $l(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){Bl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?Bl(e,t,n,r):ql(e,t):2&s._visibility?Bl(e,t,n,r):(s._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&zl(a,t);break;case 24:Bl(e,t,n,r),2048&i&&Vl(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Hl(s,a,o,l,i),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Hl(s,a,o,l,i):ql(s,a):(u._visibility|=2,Hl(s,a,o,l,i)),i&&2048&c&&zl(a.alternate,a);break;case 24:Hl(s,a,o,l,i),i&&2048&c&&Vl(a.alternate,a);break;default:Hl(s,a,o,l,i)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:ql(n,r),2048&i&&zl(r.alternate,r);break;case 24:ql(n,r),2048&i&&Vl(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Wl=8192;function Kl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Kl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=xd(n.href),s=e.querySelector(Ad(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void qe(s);s=e.ownerDocument||e,n=Pd(n),(i=_d.get(i))&&jd(n,i),qe(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Dl;Dl=kd(e.stateNode.containerInfo),Kl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Kl(e),Wl=t):Kl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xl(e)):Yl(e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Xl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var i=(r=Sl).sibling,s=r.return;if(Il(r),r===n){Sl=null;break e}if(null!==i){i.return=s,Sl=i;break e}Sl=s}}}var ec={getCacheForType:function(e){var t=Ti(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,pc=0,mc=0,gc=0,yc=0,vc=null,wc=null,bc=!1,Ec=0,_c=1/0,Sc=null,kc=null,Ic=0,Tc=null,Cc=null,Nc=0,xc=0,Ac=null,Pc=null,Rc=0,Dc=null;function Oc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==O.T){return 0!==Mi?Mi:xu()}return Ae()}function Lc(){0===gc&&(gc=0===(536870912&sc)||si?_e():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function jc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||($c(e,0),zc(e,sc,gc,!1)),Ie(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===hc&&zc(e,sc,gc,!1)),_u(e))}function Mc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=qc(),i=Wc();rc!==e||sc!==t?(Sc=null,_c=te()+500,$c(e,t)):cc=be(e,t);e:for(;;)try{if(0!==ac&&null!==ic){t=ic;var s=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,s,1);break;case 2:case 9:if(Qi(s)){ac=0,oc=null,Xc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),_u(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Qi(s)?(ac=0,oc=null,Xc(t)):(ac=0,oc=null,Zc(e,t,s,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||Vd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}ac=0,oc=null,Zc(e,t,s,5);break;case 6:ac=0,oc=null,Zc(e,t,s,6);break;case 8:Bc(),hc=6;break e;default:throw Error(a(462))}}Yc();break}catch(d){Hc(e,d)}return vi=yi=null,O.H=r,O.A=i,nc=n,null!==ic?0:(rc=null,sc=0,Nr(),hc)}(e,t):Gc(e,t,!0),s=r;;){if(0===i){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Uc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=vc;var c=l.current.memoizedState.isDehydrated;if(c&&($c(l,o).flags|=256),2!==(o=Gc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,i=4;break e}s=wc,wc=i,null!==s&&(null===wc?wc=s:wc.push.apply(wc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){$c(e,0),zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,gc,!lc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Ec+300-te())){if(zc(r,t,gc,!lc),0!==we(r,0,!0))break e;r.timeoutHandle=ld(Fc.bind(null,r,n,wc,Sc,bc,t,gc,pc,yc,lc,s,2,-0,0),i)}else Fc(r,n,wc,Sc,bc,t,gc,pc,yc,lc,s,0,-0,0)}break}i=Gc(e,t,!1),s=!1}_u(e)}function Fc(e,t,n,r,i,s,o,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:$d},Gl(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,s,n,r,i,o,l,c,d,1,f,p)),void zc(e,s,o,!u);nu(e,t,s,n,r,i,o,l,c)}function Uc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Te(e,n,t)}function Vc(){return 0!==(6&nc)||(Su(0,!1),!1)}function Bc(){if(null!==ic){if(0===ac)var e=ic.return;else vi=yi=null,Ms(e=ic),Ga=null,Qa=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function $c(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,ic=n=Fr(e.current,null),sc=t,ac=0,oc=null,lc=!1,cc=be(e,t),uc=!1,yc=gc=mc=pc=fc=hc=0,wc=vc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return dc=t,Nr(),n}function Hc(e,t){ws=null,O.H=Ha,t===qi||t===Ki?(t=Zi(),ac=3):t===Wi?(t=Zi(),ac=4):ac=t===To?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===ic&&(hc=1,Eo(e,kr(t,e.current)))}function qc(){var e=O.H;return O.H=Ha,null===e?Ha:e}function Wc(){var e=O.A;return O.A=ec,e}function Kc(){hc=4,lc||(4194048&sc)!==sc&&null!==ro.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||zc(rc,sc,gc,!1)}function Gc(e,t,n){var r=nc;nc|=2;var i=qc(),s=Wc();rc===e&&sc===t||(Sc=null,$c(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==ic){var o=ic,l=oc;switch(ac){case 8:Bc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Qc(),a=hc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,nc=r,O.H=i,O.A=s,null===ic&&(rc=null,sc=0,Nr()),a}function Qc(){for(;null!==ic;)Jc(ic)}function Yc(){for(;null!==ic&&!Z();)Jc(ic)}function Jc(e){var t=Jo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Xc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=jo(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=jo(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Ms(t);default:sl(n,t),t=Jo(n,t=ic=Ur(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){vi=yi=null,Ms(t),Ga=null,Qa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Si(t,n,i,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===io?Kc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(a(435,n.tag))}return du(e,r,i),Kc(),!1}if(si)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(kr(e=Error(a(422),{cause:r}),n))):(r!==li&&mi(kr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=kr(r,n),os(e,i=So(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var s=Error(a(520),{cause:r});if(s=kr(s,n),null===vc?vc=[s]:vc.push(s),4!==hc&&(hc=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,os(n,e=So(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===kc||!kc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Io(i=ko(i),e,n,r),os(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return hc=1,Eo(e,kr(n,e.current)),void(ic=null)}catch(s){if(null!==i)throw ic=i,s;return hc=1,Eo(e,kr(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==Ic);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Cr,o,l,c),e===rc&&(ic=rc=null,sc=0),Cc=t,Tc=e,Nc=n,xc=s,Ac=i,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(s=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=go(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nc=o,L.p=i,O.T=r}}Ic=1,ru(),iu(),su()}}function ru(){if(1===Ic){Ic=0;var e=Tc,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{Ol(t,e);var s=nd,a=er(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var y=Xn(o,m),v=Xn(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var b=d[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nh=!!td,nd=td=null}finally{nc=i,L.p=r,O.T=n}}e.current=t,Ic=2}}function iu(){if(2===Ic){Ic=0;var e=Tc,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nc;nc|=4;try{kl(e,t.alternate,t)}finally{nc=i,L.p=r,O.T=n}}Ic=3}}function su(){if(4===Ic||3===Ic){Ic=0,ee();var e=Tc,t=Cc,n=Nc,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ic=5:(Ic=0,Cc=Tc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(kc=null),xe(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{O.T=t,L.p=i}}0!==(3&Nc)&&ou(),_u(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Dc?Rc++:(Rc=0,Dc=e):Rc=0,Su(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function ou(e){return ru(),iu(),su(),lu()}function lu(){if(5!==Ic)return!1;var e=Tc,t=xc;xc=0;var n=xe(Nc),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Ac,Ac=null;var s=Tc,o=Nc;if(Ic=0,Cc=Tc=null,Nc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Jl(s.current),$l(s,s.current,o,n),nc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{L.p=i,O.T=r,au(e,t)}}function cu(e,t,n){t=kr(n,t),null!==(e=ss(e,t=So(e.stateNode,t,2),2))&&(Ie(e,2),_u(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=kr(n,e),null!==(r=ss(t,n=ko(2),2))&&(Io(n,r,t,e),Ie(r,2),_u(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-Ec?0===(2&nc)&&$c(e,0):mc|=n,yc===sc&&(yc=0)),_u(e)}function fu(e,t){0===t&&(t=Se()),null!==(e=Pr(e,t))&&(Ie(e,t),_u(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,yu=null,vu=!1,wu=!1,bu=!1,Eu=0;function _u(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),wu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?J(re,ku):Iu()}))}function Su(e,t){if(!bu&&wu){bu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Nu(r,s))}else s=sc,0===(3&(s=we(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,s)||(n=!0,Nu(r,s));r=r.next}}while(n);bu=!1}}function ku(){Iu()}function Iu(){wu=vu=!1;var e=0;0!==Eu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=Eu),Eu=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,s=Tu(r,t);0===s?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}Su(e,!1)}function Tu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-fe(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Ee(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=sc,n=we(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),xe(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=oe}return r=Cu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==Ic&&5!==Ic)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=we(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Nu(e,t){if(ou())return null;Mc(e,t,!0)}function xu(){return 0===Eu&&(Eu=_e()),Eu}function Au(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:xt(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<Er.length;Ru++){var Du=Er[Ru];_r(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}_r(fr,"onAnimationEnd"),_r(pr,"onAnimationIteration"),_r(mr,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(gr,"onTransitionRun"),_r(yr,"onTransitionStart"),_r(vr,"onTransitionCancel"),_r(wr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){yo(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){yo(u)}i.currentTarget=null,s=l}}}}function Mu(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(Vu(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),Vu(n,e,r,t)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Uu]){e[Uu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Uu]||(t[Uu]=!0,Fu("selectionchange",!1,t))}}function Vu(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=Ve(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}jt(function(){var r=s,i=Pt(n),a=[];e:{var o=br.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case mr:c=on;break;case wr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&d.push($u(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Oe])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:$e(c),p=null==u?o:$e(u),(o=new d(g,m+"leave",c,n,i)).target=h,o.relatedTarget=p,g=null,Ve(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=qu(p))m++;for(p=0,g=f;g;g=qu(g))p++;for(;0<m-p;)d=qu(d),m--;for(;0<p-m;)f=qu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=qu(d),f=qu(f)}d=null}else d=null;null!==c&&Wu(a,o,c,d,!1),null!==u&&null!==h&&Wu(a,h,u,d,!0)}if("select"===(c=(o=r?$e(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Fn;else if(Rn(o))if(Un)y=Gn;else{y=Wn;var v=qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(y=Fn):y=Kn;switch(y&&(y=y(e,r))?Dn(a,y,n,i):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),v=r?$e(r):window,e){case"focusin":(Rn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,i)}var w;if(_n)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else An?Nn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(An||"onCompositionStart"!==b?"onCompositionEnd"===b&&An&&(w=Ht()):(Bt="value"in(Vt=i)?Vt.value:Vt.textContent,An=!0)),0<(v=Hu(r,b)).length&&(b=new cn(b,e,null,n,i),a.push({event:b,listeners:v}),w?b.data=w:null!==(w=xn(n))&&(b.data=w))),(w=kn?function(e,t){switch(e){case"compositionend":return xn(t);case"keypress":return 32!==t.which?null:(Cn=!0,Tn);case"textInput":return(e=t.data)===Tn&&Cn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!_n&&Nn(e,t)?(e=Ht(),$t=Bt=Vt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=Hu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:b}),v.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Au((i[De]||null).action),a=r.submitter;a&&null!==(t=(t=a[De]||null)?Au(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Zt("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Eu){var e=a?Pu(i,a):new FormData(i);Aa(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Pu(i,a):new FormData(i),Aa(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}ju(a,t)})}function $u(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift($u(e,i,s)),null!=(i=Mt(e,t))&&r.push($u(e,i,s))),3===e.tag)return r;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wu(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Mt(n,s))&&a.unshift($u(n,c,l)):i||null!=(c=Mt(n,s))&&a.push($u(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ku=/\r\n?/g,Gu=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Ku,"\n").replace(Gu,"")}function Yu(e,t){return t=Qu(t),Qu(e)===t}function Ju(){}function Xu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||_t(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&_t(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":It(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Xu(e,t,"name",i.name,i,null),Xu(e,t,"formEncType",i.formEncType,i,null),Xu(e,t,"formMethod",i.formMethod,i,null),Xu(e,t,"formTarget",i.formTarget,i,null)):(Xu(e,t,"encType",i.encType,i,null),Xu(e,t,"method",i.method,i,null),Xu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=xt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Mu("beforetoggle",e),Mu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function Zu(e,t,n,r,i,s){switch(n){case"style":It(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?_t(e,r):("number"===typeof r||"bigint"===typeof r)&&_t(e,""+r);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[De]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mu("error",e),Mu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,r,o,n,null)}}return s&&Xu(e,t,"srcSet",n.srcSet,n,null),void(i&&Xu(e,t,"src",n.src,n,null));case"input":Mu("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Xu(e,t,i,d,n,null)}}return yt(e,r,l,c,u,o,s,!1),void dt(e);case"select":for(s in Mu("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Xu(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(o in Mu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Xu(e,t,o,l,n,null)}return Et(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Xu(e,t,c,i,n,null);return;case"dialog":Mu("beforetoggle",e),Mu("toggle",e),Mu("cancel",e),Mu("close",e);break;case"iframe":case"object":Mu("load",e);break;case"video":case"audio":for(i=0;i<Ou.length;i++)Mu(Ou[i],e);break;case"image":Mu("error",e),Mu("load",e);break;case"details":Mu("toggle",e);break;case"embed":case"source":case"link":Mu("error",e),Mu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Xu(e,t,u,i,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Xu(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Ed(a.documentElement),2&n&&Ed(a.body),4&n)for(Ed(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===i)return e.removeChild(s),void Ch(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ch(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ed(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var _d=new Map,Sd=new Set;function kd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Id=L.d;L.d={f:function(){var e=Id.f(),t=Vc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Ra(t):Id.r(e)},D:function(e){Id.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){Id.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){Id.L(e,t,n);var r=Td;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=xd(e);break;case"script":s=Rd(e)}_d.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),_d.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Ad(s))||"script"===t&&r.querySelector(Dd(s))||(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){Id.m(e,t);var n=Td;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Rd(e)}if(!_d.has(s)&&(e=h({rel:"modulepreload",href:e},t),_d.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(s)))return}ed(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){Id.X(e,t);var n=Td;if(n&&e){var r=He(n).hoistableScripts,i=Rd(e),s=r.get(i);s||((s=n.querySelector(Dd(i)))||(e=h({src:e,async:!0},t),(t=_d.get(i))&&Md(e,t),qe(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Id.S(e,t,n);var r=Td;if(r&&e){var i=He(r).hoistableStyles,s=xd(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Ad(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_d.get(s))&&jd(e,n);var l=a=r.createElement("link");qe(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ld(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){Id.M(e,t);var n=Td;if(n&&e){var r=He(n).hoistableScripts,i=Rd(e),s=r.get(i);s||((s=n.querySelector(Dd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=_d.get(i))&&Md(e,t),qe(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Td="undefined"===typeof document?null:document;function Cd(e,t,n){var r=Td;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Sd.has(i)||(Sd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Nd(e,t,n,r){var i,s,o,l,c=(c=H.current)?kd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=xd(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=xd(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Ad(e)))&&!u._p&&(d.instance=u,d.state.loading=5),_d.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_d.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),ed(s,"link",o),qe(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function xd(e){return'href="'+mt(e)+'"'}function Ad(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+mt(e)+'"]'}function Dd(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":i=xd(n.href);var s=e.querySelector(Ad(i));if(s)return t.state.loading|=4,t.instance=s,qe(s),s;r=Pd(n),(i=_d.get(i))&&jd(r,i),qe(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(s,"link",r),t.state.loading|=4,Ld(s,n.precedence,e),t.instance=s;case"script":return s=Rd(n.src),(i=e.querySelector(Dd(s)))?(t.instance=i,qe(i),i):(r=n,(i=_d.get(s))&&Md(r=h({},n),i),qe(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Ud(e,t,n){if(null===Fd){var r=new Map,i=Fd=new Map;i.set(n,r)}else(r=(i=Fd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ue]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function $d(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Kd,e),qd=null,Hd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Hd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:E,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function Qd(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Yd(e,t,n,r,i,s,a,o,l,c,u,d){return e=new Qd(e,t,n,a,o,l,c,d),t=1,!0===s&&(t|=24),s=jr(3,null,null,t),e.current=s,s.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Jd(e){return e?e=Or:Or}function Xd(e,t,n,r,i,s){i=Jd(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(jc(n,0,t),as(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&jc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,sh(e,t,n,r)}finally{L.p=s,O.T=i}}function ih(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,sh(e,t,n,r)}finally{L.p=s,O.T=i}}function sh(e,t,n,r){if(nh){var i=ah(r);if(null===i)Bu(e,t,r,oh,n),vh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=wh(dh,e,t,n,r,i),!0;case"dragenter":return hh=wh(hh,e,t,n,r,i),!0;case"mouseover":return fh=wh(fh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ph.set(s,wh(ph.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,mh.set(s,wh(mh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var s=Be(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ve(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}_u(s),0===(6&nc)&&(_c=te()+500,Su(0,!1))}}break;case 13:null!==(o=Pr(s,2))&&jc(o,0,2),Vc(),eh(s,2)}if(null===(s=ah(r))&&Bu(e,t,r,oh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ah(e){return lh(e=Pt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,mh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function wh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bh(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=Ne(e);var t=Pr(n,e);null!==t&&jc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Eh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function _h(e,t,n){Eh(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&Eh(dh)&&(dh=null),null!==hh&&Eh(hh)&&(hh=null),null!==fh&&Eh(fh)&&(fh=null),ph.forEach(_h),mh.forEach(_h)}function kh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var Ih=null;function Th(e){Ih!==e&&(Ih=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ih===e&&(Ih=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var s=Be(n);null!==s&&(e.splice(t,3),t-=3,Aa(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ch(e){function t(t){return kh(t,e)}null!==dh&&kh(dh,e),null!==hh&&kh(hh,e),null!==fh&&kh(fh,e),ph.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)bh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[De]||null;if("function"===typeof s)a||Th(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[De]||null)o=a.formAction;else if(null!==lh(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Th(n)}}}function Nh(e){this._internalRoot=e}function xh(e){this._internalRoot=e}xh.prototype.render=Nh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Xd(t.current,Oc(),e,t,null,null)},xh.prototype.unmount=Nh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Vc(),t[Oe]=null}},xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&bh(e)}};var Ah=i.version;if("19.1.1"!==Ah)throw Error(a(527,Ah,"19.1.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Ph),de=Rh}catch(Oh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=vo,s=wo,l=bo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,zu(e),new Nh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=vo,l=wo,c=bo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Jd(null),n=t.current,(i=is(r=Ne(r=Oc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,Ie(t,n),_u(t),e[Oe]=t.current,zu(e),new xh(t)},t.version="19.1.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},245:(e,t,n)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(173)),s=u(n(742)),a=u(n(612)),o=n(43),l=u(o),c=u(n(686));function u(e){return e&&e.__esModule?e:{default:e}}var d={bgColor:i.default.oneOfType([i.default.object,i.default.string]),fgColor:i.default.oneOfType([i.default.object,i.default.string]),level:i.default.string,size:i.default.number,value:i.default.string.isRequired},h=(0,o.forwardRef)(function(e,t){var n=e.bgColor,i=void 0===n?"#FFFFFF":n,o=e.fgColor,u=void 0===o?"#000000":o,d=e.level,h=void 0===d?"L":d,f=e.size,p=void 0===f?256:f,m=e.value,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["bgColor","fgColor","level","size","value"]),y=new a.default(-1,s.default[h]);y.addData(m),y.make();var v=y.modules;return l.default.createElement(c.default,r({},g,{bgColor:i,bgD:v.map(function(e,t){return e.map(function(e,n){return e?"":"M "+n+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:u,fgD:v.map(function(e,t){return e.map(function(e,n){return e?"M "+n+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:p,viewBoxSize:v.length}))});h.displayName="QRCode",h.propTypes=d,t.Ay=h},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var E=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function k(e,t,r,i,s,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(){}function x(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return x((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+C(e,0):s,E(a)?(i="",null!=u&&(i=u.replace(T,"$&/")+"/"),x(a,t,i,"",function(e){return e})):null!=a&&(I(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+u,a=k(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,p=""===s?".":s+":";if(E(e))for(var m=0;m<e.length;m++)u+=x(s=e[m],t,i,o=p+C(s,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=x(s=s.value,t,i,o=p+C(s,m++),a);else if("object"===o){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return k(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return k(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),i=_.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,R)}catch(s){R(s)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=_.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.1.1"},343:(e,t,n)=>{var r=n(957);function i(e){this.mode=r.MODE_8BIT_BYTE,this.data=e}i.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=i},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},392:(e,t,n)=>{var r=n(460);function i(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}i.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var s=0;s<e.getLength();s++)t[n+s]^=r.gexp(r.glog(this.get(n))+r.glog(e.get(s)));return new i(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=r.glog(this.get(0))-r.glog(e.get(0)),n=new Array(this.getLength()),s=0;s<this.getLength();s++)n[s]=this.get(s);for(s=0;s<e.getLength();s++)n[s]^=r.gexp(r.glog(e.get(s))+t);return new i(n,0).mod(e)}},e.exports=i},436:(e,t,n)=>{var r=n(742);function i(e,t){this.totalCount=e,this.dataCount=t}i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(e,t){var n=i.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,s=new Array,a=0;a<r;a++)for(var o=n[3*a+0],l=n[3*a+1],c=n[3*a+2],u=0;u<o;u++)s.push(new i(l,c));return s},i.getRsBlockTable=function(e,t){switch(t){case r.L:return i.RS_BLOCK_TABLE[4*(e-1)+0];case r.M:return i.RS_BLOCK_TABLE[4*(e-1)+1];case r.Q:return i.RS_BLOCK_TABLE[4*(e-1)+2];case r.H:return i.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=i},460:e=>{for(var t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)t.EXP_TABLE[n]=1<<n;for(n=8;n<256;n++)t.EXP_TABLE[n]=t.EXP_TABLE[n-4]^t.EXP_TABLE[n-5]^t.EXP_TABLE[n-6]^t.EXP_TABLE[n-8];for(n=0;n<255;n++)t.LOG_TABLE[t.EXP_TABLE[n]]=n;e.exports=t},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(799)},612:(e,t,n)=>{var r=n(343),i=n(436),s=n(813),a=n(898),o=n(392);function l(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=l.prototype;c.addData=function(e){var t=new r(e);this.dataList.push(t),this.dataCache=null},c.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=i.getRSBlocks(e,this.errorCorrectLevel),n=new s,r=0,o=0;o<t.length;o++)r+=t[o].dataCount;for(o=0;o<this.dataList.length;o++){var l=this.dataList[o];n.put(l.mode,4),n.put(l.getLength(),a.getLengthInBits(l.mode,e)),l.write(n)}if(n.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},c.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},c.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=a.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},c.createMovieClip=function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var s=1*i,a=0;a<this.modules[i].length;a++){var o=1*a;this.modules[i][a]&&(r.beginFill(0,100),r.moveTo(o,s),r.lineTo(o+1,s),r.lineTo(o+1,s+1),r.lineTo(o,s+1),r.endFill())}return r},c.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},c.setupPositionAdjustPattern=function(){for(var e=a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)this.modules[r+s][i+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o}},c.setupTypeNumber=function(e){for(var t=a.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},c.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=a.getBCHTypeInfo(n),i=0;i<15;i++){var s=!e&&1==(r>>i&1);i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(i=0;i<15;i++){s=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!e},c.mapData=function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var l=0;l<2;l++)if(null==this.modules[r][o-l]){var c=!1;s<e.length&&(c=1==(e[s]>>>i&1)),a.getMask(t,r,o-l)&&(c=!c),this.modules[r][o-l]=c,-1==--i&&(s++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(e,t,n){for(var r=i.getRSBlocks(e,t),o=new s,c=0;c<n.length;c++){var u=n[c];o.put(u.mode,4),o.put(u.getLength(),a.getLengthInBits(u.mode,e)),u.write(o)}var d=0;for(c=0;c<r.length;c++)d+=r[c].dataCount;if(o.getLengthInBits()>8*d)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*d+")");for(o.getLengthInBits()+4<=8*d&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*d)&&(o.put(l.PAD0,8),!(o.getLengthInBits()>=8*d));)o.put(l.PAD1,8);return l.createBytes(o,r)},l.createBytes=function(e,t){for(var n=0,r=0,i=0,s=new Array(t.length),l=new Array(t.length),c=0;c<t.length;c++){var u=t[c].dataCount,d=t[c].totalCount-u;r=Math.max(r,u),i=Math.max(i,d),s[c]=new Array(u);for(var h=0;h<s[c].length;h++)s[c][h]=255&e.buffer[h+n];n+=u;var f=a.getErrorCorrectPolynomial(d),p=new o(s[c],f.getLength()-1).mod(f);l[c]=new Array(f.getLength()-1);for(h=0;h<l[c].length;h++){var m=h+p.getLength()-l[c].length;l[c][h]=m>=0?p.get(m):0}}var g=0;for(h=0;h<t.length;h++)g+=t[h].totalCount;var y=new Array(g),v=0;for(h=0;h<r;h++)for(c=0;c<t.length;c++)h<s[c].length&&(y[v++]=s[c][h]);for(h=0;h<i;h++)for(c=0;c<t.length;c++)h<l[c].length&&(y[v++]=l[c][h]);return y},e.exports=l},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=o(n(173)),s=n(43),a=o(s);function o(e){return e&&e.__esModule?e:{default:e}}var l={bgColor:i.default.oneOfType([i.default.object,i.default.string]).isRequired,bgD:i.default.string.isRequired,fgColor:i.default.oneOfType([i.default.object,i.default.string]).isRequired,fgD:i.default.string.isRequired,size:i.default.number.isRequired,title:i.default.string,viewBoxSize:i.default.number.isRequired,xmlns:i.default.string},c=(0,s.forwardRef)(function(e,t){var n=e.bgColor,i=e.bgD,s=e.fgD,o=e.fgColor,l=e.size,c=e.title,u=e.viewBoxSize,d=e.xmlns,h=void 0===d?"http://www.w3.org/2000/svg":d,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",r({},f,{height:l,ref:t,viewBox:"0 0 "+u+" "+u,width:l,xmlns:h}),c?a.default.createElement("title",null,c):null,a.default.createElement("path",{d:i,fill:n}),a.default.createElement("path",{d:s,fill:o}))});c.displayName="QRCodeSvg",c.propTypes=l,t.default=c},742:e=>{e.exports={L:1,M:0,Q:3,H:2}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},813:e=>{function t(){this.buffer=new Array,this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,E(e),!m)if(null!==r(c))m=!0,k||(k=!0,S());else{var t=r(u);null!==t&&R(_,t.startTime-e)}}var S,k=!1,I=-1,T=5,C=-1;function N(){return!!y||!(t.unstable_now()-C<T)}function x(){if(y=!1,k){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,w(I),I=-1),p=!0;var s=f;try{t:{for(E(e),h=r(c);null!==h&&!(h.expirationTime>e&&N());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,E(e),n=!0;break t}h===r(c)&&i(c),E(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(_,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?S():k=!1}}}if("function"===typeof b)S=function(){b(x)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=x,S=function(){P.postMessage(null)}}else S=function(){v(x,0)};function R(e,n){I=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(w(I),I=-1):g=!0,R(_,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,k||(k=!0,S()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},898:(e,t,n)=>{var r=n(957),i=n(392),s=n(460),a=0,o=1,l=2,c=3,u=4,d=5,h=6,f=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;p.getBCHDigit(t)-p.getBCHDigit(p.G15)>=0;)t^=p.G15<<p.getBCHDigit(t)-p.getBCHDigit(p.G15);return(e<<10|t)^p.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;p.getBCHDigit(t)-p.getBCHDigit(p.G18)>=0;)t^=p.G18<<p.getBCHDigit(t)-p.getBCHDigit(p.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return p.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case a:return(t+n)%2==0;case o:return t%2==0;case l:return n%3==0;case c:return(t+n)%3==0;case u:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case d:return t*n%2+t*n%3==0;case h:return(t*n%2+t*n%3)%2==0;case f:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new i([1],0),n=0;n<e;n++)t=t.multiply(new i([1,s.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var s=0,a=e.isDark(r,i),o=-1;o<=1;o++)if(!(r+o<0||t<=r+o))for(var l=-1;l<=1;l++)i+l<0||t<=i+l||0==o&&0==l||a==e.isDark(r+o,i+l)&&s++;s>5&&(n+=3+s-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var c=0;e.isDark(r,i)&&c++,e.isDark(r+1,i)&&c++,e.isDark(r,i+1)&&c++,e.isDark(r+1,i+1)&&c++,0!=c&&4!=c||(n+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&u++;return n+=10*(Math.abs(100*u/t/t-50)/5)}};e.exports=p},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},957:e=>{e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".a3c1d153.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="client:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391),r="popstate";function i(){return d(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return l("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:c(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function a(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function o(e,t){return{usr:e.state,key:e.key,idx:t}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?u(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function c(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function u(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function d(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:a=!1}=i,c=s.history,u="POP",d=null,f=p();function p(){return(c.state||{idx:null}).idx}function m(){u="POP";let e=p(),t=null==e?null:e-f;f=e,d&&d({action:u,location:y.location,delta:t})}function g(e){return h(e)}null==f&&(f=0,c.replaceState({...c.state,idx:f},""));let y={get action(){return u},get location(){return e(s,c)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(r,m),d=e,()=>{s.removeEventListener(r,m),d=null}},createHref:e=>t(s,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u="PUSH";let r=l(y.location,e,t);n&&n(r,e),f=p()+1;let i=o(r,f),h=y.createHref(r);try{c.pushState(i,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(h)}a&&d&&d({action:u,location:y.location,delta:1})},replace:function(e,t){u="REPLACE";let r=l(y.location,e,t);n&&n(r,e),f=p();let i=o(r,f),s=y.createHref(r);c.replaceState(i,"",s),a&&d&&d({action:u,location:y.location,delta:0})},go:e=>c.go(e)};return y}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),s(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:c(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function f(e,t){return p(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function p(e,t,n,r){let i=x(("string"===typeof t?u(t):t).pathname||"/",n);if(null==i)return null;let s=m(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=N(i);a=I(s[o],e,r)}return a}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(r),`Absolute route path "${o.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(r.length));let l=O([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),m(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:k(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of g(e.path))i(e,t,n);else i(e,t)}),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=g(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var y=/^:[\w-]+$/,v=3,w=2,b=1,E=10,_=-2,S=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(S)&&(r+=_),t&&(r+=w),n.filter(e=>!S(e)).reduce((e,t)=>e+(y.test(t)?v:""===t?b:E),r)}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:O([s,u.pathname]),pathnameBase:L(O([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=O([s,u.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=C(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function N(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return a(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function x(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e){let t=P(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function D(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=u(e):(r={...e},s(!r.pathname||!r.pathname.includes("?"),A("?","pathname","search",r)),s(!r.pathname||!r.pathname.includes("#"),A("#","pathname","hash",r)),s(!r.search||!r.search.includes("#"),A("#","search","hash",r)));let a,o=""===e||""===r.pathname,l=o?"/":r.pathname;if(null==l)a=n;else{let e=t.length-1;if(!i&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?u(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:j(r),hash:M(i)}}(r,a),d=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var O=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",M=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function F(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var U=["POST","PUT","PATCH","DELETE"],z=(new Set(U),["GET",...U]);new Set(z),Symbol("ResetLoaderData");var V=e.createContext(null);V.displayName="DataRouter";var B=e.createContext(null);B.displayName="DataRouterState";var $=e.createContext(!1);var H=e.createContext({isTransitioning:!1});H.displayName="ViewTransition";var q=e.createContext(new Map);q.displayName="Fetchers";var W=e.createContext(null);W.displayName="Await";var K=e.createContext(null);K.displayName="Navigation";var G=e.createContext(null);G.displayName="Location";var Q=e.createContext({outlet:null,matches:[],isDataRoute:!1});Q.displayName="Route";var Y=e.createContext(null);Y.displayName="RouteError";function J(){return null!=e.useContext(G)}function X(){return s(J(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(G).location}var Z="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ee(t){e.useContext(K).static||e.useLayoutEffect(t)}function te(){let{isDataRoute:t}=e.useContext(Q);return t?function(){let{router:t}=de("useNavigate"),n=fe("useNavigate"),r=e.useRef(!1);ee(()=>{r.current=!0});let i=e.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(r.current,Z),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,{fromRouteId:n,...i}))},[t,n]);return i}():function(){s(J(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(V),{basename:n,navigator:r}=e.useContext(K),{matches:i}=e.useContext(Q),{pathname:o}=X(),l=JSON.stringify(R(i)),c=e.useRef(!1);ee(()=>{c.current=!0});let u=e.useCallback(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(c.current,Z),!c.current)return;if("number"===typeof e)return void r.go(e);let s=D(e,JSON.parse(l),o,"path"===i.relative);null==t&&"/"!==n&&(s.pathname="/"===s.pathname?n:O([n,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[n,r,l,o,t]);return u}()}e.createContext(null);function ne(){let{matches:t}=e.useContext(Q),n=t[t.length-1];return n?n.params:{}}function re(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(Q),{pathname:i}=X(),s=JSON.stringify(R(r));return e.useMemo(()=>D(t,JSON.parse(s),i,"path"===n),[t,s,i,n])}function ie(t,n,r,i){s(J(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=e.useContext(K),{matches:l}=e.useContext(Q),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let e=m&&m.path||"";ge(h,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let g,y=X();if(n){let e="string"===typeof n?u(n):n;s("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),g=e}else g=y;let v=g.pathname||"/",w=v;if("/"!==p){let e=p.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=f(t,{pathname:w});a(m||null!=b,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),a(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=ce(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:O([p,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:O([p,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,i);return n&&E?e.createElement(G.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function se(){let t=pe(),n=F(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:a},"ErrorBoundary")," or"," ",e.createElement("code",{style:a},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,o)}var ae=e.createElement(se,null),oe=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(Q.Provider,{value:this.props.routeContext},e.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function le(t){let{routeContext:n,match:r,children:i}=t,s=e.useContext(V);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(Q.Provider,{value:n},i)}function ce(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let i=t,a=r?.errors;if(null!=a){let e=i.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);s(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<i.length;e++){let t=i[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,s=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||s){o=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight((t,s,c)=>{let u,d=!1,h=null,f=null;r&&(u=a&&s.route.id?a[s.route.id]:void 0,h=s.route.errorElement||ae,o&&(l<0&&0===c?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===c&&(d=!0,f=s.route.hydrateFallbackElement||null)));let p=n.concat(i.slice(0,c+1)),m=()=>{let n;return n=u?h:d?f:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(le,{match:s,routeContext:{outlet:t,matches:p,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===c)?e.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}function ue(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function de(t){let n=e.useContext(V);return s(n,ue(t)),n}function he(t){let n=e.useContext(B);return s(n,ue(t)),n}function fe(t){let n=function(t){let n=e.useContext(Q);return s(n,ue(t)),n}(t),r=n.matches[n.matches.length-1];return s(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function pe(){let t=e.useContext(Y),n=he("useRouteError"),r=fe("useRouteError");return void 0!==t?t:n.errors?.[r]}var me={};function ge(e,t,n){t||me[e]||(me[e]=!0,a(!1,n))}var ye={};function ve(e,t){e||ye[t]||(ye[t]=!0,console.warn(t))}e.memo(function(e){let{routes:t,future:n,state:r}=e;return ie(t,void 0,r,n)});function we(t){let{to:n,replace:r,state:i,relative:o}=t;s(J(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=e.useContext(K);a(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=e.useContext(Q),{pathname:u}=X(),d=te(),h=D(n,R(c),u,"path"===o),f=JSON.stringify(h);return e.useEffect(()=>{d(JSON.parse(f),{replace:r,state:i,relative:o})},[d,f,o,r,i]),null}function be(e){s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ee(t){let{basename:n="/",children:r=null,location:i,navigationType:o="POP",navigator:l,static:c=!1}=t;s(!J(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=e.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);"string"===typeof i&&(i=u(i));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=i,v=e.useMemo(()=>{let e=x(f,d);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:o}},[d,f,p,m,g,y,o]);return a(null!=v,`<Router basename="${d}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:e.createElement(K.Provider,{value:h},e.createElement(G.Provider,{children:r,value:v}))}function _e(e){let{children:t,location:n}=e;return ie(Se(t),n)}e.Component;function Se(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,i)=>{if(!e.isValidElement(t))return;let a=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,Se(t.props.children,a));s(t.type===be,`[${"string"===typeof t.type?t.type:t.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),s(!t.props.index||!t.props.children,"An index route cannot have child routes.");let o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Se(t.props.children,a)),r.push(o)}),r}var ke="get",Ie="application/x-www-form-urlencoded";function Te(e){return null!=e&&"string"===typeof e.tagName}var Ce=null;var Ne=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xe(e){return null==e||Ne.has(e)?e:(a(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ie}"`),null)}function Ae(e,t){let n,r,i,s,a;if(Te(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?x(a,t):null,n=e.getAttribute("method")||ke,i=xe(e.getAttribute("enctype"))||Ie,s=new FormData(e)}else if(function(e){return Te(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Te(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?x(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||ke,i=xe(e.getAttribute("formenctype"))||xe(a.getAttribute("enctype"))||Ie,s=new FormData(a,e),!function(){if(null===Ce)try{new FormData(document.createElement("form"),0),Ce=!1}catch(e){Ce=!0}return Ce}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(Te(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ke,r=null,i=Ie,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Pe(e){return{__html:e}}function Re(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function De(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===x(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Oe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Le(e){return null!=e&&"string"===typeof e.page}function je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Me(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Fe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Ue(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Le(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function ze(e,t){return"lazy"===e.mode&&!0===t}function Ve(){let t=e.useContext(V);return Re(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Be(){let t=e.useContext(B);return Re(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $e=e.createContext(void 0);function He(){let t=e.useContext($e);return Re(t,"You must render this element inside a <HydratedRouter> element"),t}function qe(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function We(e,t,n){if(n&&!Ye)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}$e.displayName="FrameworkContext";function Ke(t){let{page:n,...r}=t,{router:i}=Ve(),s=e.useMemo(()=>f(i.routes,n,i.basename),[i.routes,n,i.basename]);return s?e.createElement(Qe,{page:n,matches:s,...r}):null}function Ge(t){let{manifest:n,routeModules:r}=He(),[i,s]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return Ue((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Oe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(je).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(t,n,r).then(t=>{e||s(t)}),()=>{e=!0}},[t,n,r]),i}function Qe(t){let{page:n,matches:r,...i}=t,s=X(),{manifest:a,routeModules:o}=He(),{basename:l}=Ve(),{loaderData:c,matches:u}=Be(),d=e.useMemo(()=>Me(n,r,u,a,s,"data"),[n,r,u,a,s]),h=e.useMemo(()=>Me(n,r,u,a,s,"assets"),[n,r,u,a,s]),f=e.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{let r=a.routes[n.route.id];r&&r.hasLoader&&(!d.some(e=>e.route.id===n.route.id)&&n.route.id in c&&o[n.route.id]?.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=De(n,l,"data");return t&&e.size>0&&i.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[l,c,s,a,d,r,n,o]),p=e.useMemo(()=>Fe(h,a),[h,a]),m=Ge(h);return e.createElement(e.Fragment,null,f.map(t=>e.createElement("link",{key:t,rel:"prefetch",as:"fetch",href:t,...i})),p.map(t=>e.createElement("link",{key:t,rel:"modulepreload",href:t,...i})),m.map(t=>{let{key:n,link:r}=t;return e.createElement("link",{key:n,...r})}))}var Ye=!1;function Je(t){let{manifest:n,serverHandoffString:r,isSpaMode:i,renderMeta:s,routeDiscovery:a,ssr:o}=He(),{router:l,static:c,staticContext:u}=Ve(),{matches:d}=Be(),h=e.useContext($),p=ze(a,o);s&&(s.didRenderScripts=!0);let m=We(d,null,i);e.useEffect(()=>{0},[]);let g=e.useMemo(()=>{if(h)return null;let i=u?`window.__reactRouterContext = ${r};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",s=c?`${n.hmr?.runtime?`import ${JSON.stringify(n.hmr.runtime)};`:""}${p?"":`import ${JSON.stringify(n.url)}`};\n${m.map((e,t)=>{let r=`route${t}`,i=n.routes[e.route.id];Re(i,`Route ${e.route.id} not found in manifest`);let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:`${r}_clientAction`}]:[],...a?[{module:a,varName:`${r}_clientLoader`}]:[],...o?[{module:o,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===u.length?`import * as ${r} from ${JSON.stringify(c)};`:[u.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${r} = {${u.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${p?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push(`/${s.join("/")}`),s.pop();a.forEach(e=>{let n=f(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let o=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return{...r,routes:o,sri:!!n||void 0}}(n,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${m.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(n.entry.module)});`:" ";return e.createElement(e.Fragment,null,e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Pe(i),type:void 0}),e.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Pe(s),type:"module",async:!0}))},[]),y=Ye||h?[]:(n.entry.imports.concat(Fe(m,n,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let w="object"===typeof n.sri?n.sri:{};return ve(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),Ye||h?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,p?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),y.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),g)}function Xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function Ze(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let i,s=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(F(n))return e.createElement(et,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(et,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function et(t){let{title:n,renderScripts:r,isOutsideRemixApp:i,children:s}=t,{routeModules:a}=He();return a.root?.Layout&&!i?s:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,n)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,r?e.createElement(Je,null):null)))}var tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{tt&&(window.__reactRouterVersion="7.7.1")}catch(K_){}function nt(t){let{basename:n,children:r,window:s}=t,a=e.useRef();null==a.current&&(a.current=i({window:s,v5Compat:!0}));let o=a.current,[l,c]=e.useState({action:o.action,location:o.location}),u=e.useCallback(t=>{e.startTransition(()=>c(t))},[c]);return e.useLayoutEffect(()=>o.listen(u),[o,u]),e.createElement(Ee,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=e.forwardRef(function(t,n){let r,{onClick:i,discover:o="render",prefetch:l="none",relative:u,reloadDocument:d,replace:h,state:f,target:p,to:m,preventScrollReset:g,viewTransition:y,...v}=t,{basename:w}=e.useContext(K),b="string"===typeof m&&rt.test(m),E=!1;if("string"===typeof m&&b&&(r=m,tt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=x(t.pathname,w);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:E=!0}catch(K_){a(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(J(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=e.useContext(K),{hash:a,pathname:o,search:l}=re(t,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:O([r,o])),i.createHref({pathname:c,search:l,hash:a})}(m,{relative:u}),[S,k,I]=function(t,n){let r=e.useContext($e),[i,s]=e.useState(!1),[a,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(i){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return r?"intent"!==t?[a,f,{}]:[a,f,{onFocus:qe(l,p),onBlur:qe(c,m),onMouseEnter:qe(u,p),onMouseLeave:qe(d,m),onTouchStart:qe(h,p)}]:[!1,f,{}]}(l,v),T=function(t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=te(),u=X(),d=re(t,{relative:a});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==r?r:c(u)===c(d);l(t,{replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,d,r,i,n,t,s,a,o])}(m,{replace:h,state:f,target:p,preventScrollReset:g,relative:u,viewTransition:y});let C=e.createElement("a",{...v,...I,href:r||_,onClick:E||d?i:function(e){i&&i(e),e.defaultPrevented||T(e)},ref:Xe(n,k),target:p,"data-discover":b||"render"!==o?void 0:"true"});return S&&!b?e.createElement(e.Fragment,null,C,e.createElement(Ke,{page:_})):C});it.displayName="Link",e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d,...h}=t,f=re(c,{relative:h.relative}),p=X(),m=e.useContext(B),{navigator:g,basename:y}=e.useContext(K),v=null!=m&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(H);s(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ot("useViewTransitionState"),a=re(t,{relative:n});if(!r.isTransitioning)return!1;let o=x(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=x(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=T(a.pathname,l)||null!=T(a.pathname,o)}(f)&&!0===u,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=p.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(b=b.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&y&&(E=x(E,y)||E);const _="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,k=b===w||!o&&b.startsWith(w)&&"/"===b.charAt(_),I=null!=E&&(E===w||!o&&E.startsWith(w)&&"/"===E.charAt(w.length)),C={isActive:k,isPending:I,isTransitioning:v},N=k?r:void 0;S="function"===typeof a?a(C):[a,k?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(C):l;return e.createElement(it,{...h,"aria-current":N,className:S,ref:n,style:A,to:c,viewTransition:u},"function"===typeof d?d(C):d)}).displayName="NavLink";var st=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:i,navigate:a,reloadDocument:o,replace:l,state:u,method:d=ke,action:h,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:g,...y}=t,v=ut(),w=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(K),i=e.useContext(Q);s(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...re(t||".",{relative:n})},l=X();if(null==t){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?`?${n}`:""}}t&&"."!==t||!a.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(o.pathname="/"===o.pathname?r:O([r,o.pathname]));return c(o)}(h,{relative:p}),b="get"===d.toLowerCase()?"get":"post",E="string"===typeof h&&rt.test(h);return e.createElement("form",{ref:n,method:b,action:w,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||d;v(t||e.currentTarget,{fetcherKey:i,method:n,navigate:a,replace:l,state:u,relative:p,preventScrollReset:m,viewTransition:g})},...y,"data-discover":E||"render"!==r?void 0:"true"})});function at(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ot(t){let n=e.useContext(V);return s(n,at(t)),n}st.displayName="Form";var lt=0,ct=()=>`__${String(++lt)}__`;function ut(){let{router:t}=ot("useSubmit"),{basename:n}=e.useContext(K),r=fe("useRouteId");return e.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Ae(e,n);if(!1===i.navigate){let e=i.fetcherKey||ct();await t.fetch(e,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,n,r])}const dt={bgColor:"#F5F5F5",primaryColor:"#3D70FF",primaryDarkColor:"#3161EA",primaryLightColor:"#5A84F8",white:"#FFFFFF",black:"#000000",textPrimary:"#333333",textSecondary:"#666666",textLight:"#999999",success:"#28A745",error:"#DC3545",warning:"#FFC107",info:"#17A2B8",gray100:"#F8F9FA",gray200:"#E9ECEF",gray300:"#DEE2E6",gray400:"#CED4DA",gray500:"#ADB5BD",gray600:"#6C757D",gray700:"#495057",gray800:"#343A40",gray900:"#212529"},ht={primary:`linear-gradient(135deg, ${dt.primaryColor} 0%, ${dt.primaryDarkColor} 100%)`,primaryLight:`linear-gradient(135deg, ${dt.primaryLightColor} 0%, ${dt.primaryColor} 100%)`,background:`linear-gradient(135deg, ${dt.primaryColor} 0%, ${dt.primaryLightColor} 100%)`},{bgColor:ft,primaryColor:pt,primaryDarkColor:mt,primaryLightColor:gt,white:yt,black:vt,textPrimary:wt,textSecondary:bt,textLight:Et}=dt;var _t=n(579);const St=(0,e.createContext)(),kt=t=>{let{children:n}=t;const[r,i]=(0,e.useState)({primary:dt.primaryColor,secondary:dt.primaryDarkColor,light:dt.primaryLightColor,background:dt.bgColor,appName:"Food Munch"});(0,e.useEffect)(()=>{const e=document.documentElement;e.style.setProperty("--theme-primary",r.primary),e.style.setProperty("--theme-secondary",r.secondary),e.style.setProperty("--theme-light",r.light),e.style.setProperty("--theme-background",r.background),e.style.setProperty("--theme-gradient",ht.primary)},[r]);const s={currentTheme:r,Colors:dt,Gradients:ht};return(0,_t.jsx)(St.Provider,{value:s,children:n})},It={USER_TOKEN:"food_munch_user_token",USER_DATA:"food_munch_user_data",HAS_SEEN_ONBOARDING:"food_munch_has_seen_onboarding",SELECTED_STADIUM:"food_munch_selected_stadium",STADIUM_PREFERENCES:"food_munch_stadium_preferences",THEME_PREFERENCE:"food_munch_theme",LANGUAGE_PREFERENCE:"food_munch_language",CART_DATA:"food_munch_cart",ORDER_HISTORY:"food_munch_order_history",FAVORITE_FOODS:"food_munch_favorite_foods",FAVORITE_RESTAURANTS:"food_munch_favorite_restaurants",NOTIFICATION_PREFERENCES:"food_munch_notifications",PUSH_TOKEN:"food_munch_push_token",SEAT_INFO:"food_munch_seat_info"},Tt={setSeatInfo:e=>Ct.setItem(It.SEAT_INFO,e),getSeatInfo:()=>Ct.getItem(It.SEAT_INFO,null),clearSeatInfo:()=>Ct.removeItem(It.SEAT_INFO)},Ct={setItem:(e,t)=>{try{const n=JSON.stringify(t);return localStorage.setItem(e,n),!0}catch(n){return console.error("Error saving to localStorage:",n),!1}},getItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Error reading from localStorage:",n),t}},removeItem:e=>{try{return localStorage.removeItem(e),!0}catch(t){return console.error("Error removing from localStorage:",t),!1}},clear:()=>{try{return localStorage.clear(),!0}catch(e){return console.error("Error clearing localStorage:",e),!1}},hasItem:e=>null!==localStorage.getItem(e)},Nt={setUserToken:e=>Ct.setItem(It.USER_TOKEN,e),getUserToken:()=>Ct.getItem(It.USER_TOKEN),removeUserToken:()=>Ct.removeItem(It.USER_TOKEN),setUserData:e=>Ct.setItem(It.USER_DATA,e),getUserData:()=>Ct.getItem(It.USER_DATA),removeUserData:()=>Ct.removeItem(It.USER_DATA),isLoggedIn:()=>Ct.hasItem(It.USER_TOKEN)},xt={setSelectedStadium:e=>Ct.setItem(It.SELECTED_STADIUM,e),getSelectedStadium:()=>Ct.getItem(It.SELECTED_STADIUM),removeSelectedStadium:()=>Ct.removeItem(It.SELECTED_STADIUM),hasSelectedStadium:()=>Ct.hasItem(It.SELECTED_STADIUM),setStadiumPreferences:e=>Ct.setItem(It.STADIUM_PREFERENCES,e),getStadiumPreferences:()=>Ct.getItem(It.STADIUM_PREFERENCES,{})},At={setCart:e=>Ct.setItem(It.CART_DATA,e),getCart:()=>Ct.getItem(It.CART_DATA,{items:[],total:0}),clearCart:()=>Ct.removeItem(It.CART_DATA),addToCart:e=>{const t=At.getCart(),n=t.items.findIndex(t=>t.id===e.id);return n>=0?t.items[n].quantity+=e.quantity||1:t.items.push({...e,quantity:e.quantity||1}),t.total=t.items.reduce((e,t)=>e+t.price*t.quantity,0),At.setCart(t),t},removeFromCart:e=>{const t=At.getCart();return t.items=t.items.filter(t=>t.id!==e),t.total=t.items.reduce((e,t)=>e+t.price*t.quantity,0),At.setCart(t),t}},Pt={clearAllStorage:()=>{try{console.log("\ud83e\uddf9 Clearing all localStorage data..."),localStorage.clear(),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cartItems:[],totalItems:0,totalPrice:0}})),console.log("\u2705 All localStorage data cleared successfully")}catch(e){console.error("\u274c Error clearing localStorage:",e)}},clearUserData:()=>{try{console.log("\ud83e\uddf9 Clearing user-specific data...");[It.USER_DATA,It.SELECTED_STADIUM,It.ONBOARDING_COMPLETED,It.CART].forEach(e=>{localStorage.removeItem(e)}),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cartItems:[],totalItems:0,totalPrice:0}})),console.log("\u2705 User-specific data cleared successfully")}catch(e){console.error("\u274c Error clearing user data:",e)}},initializeFreshSession:()=>{try{console.log("\ud83d\udd04 Initializing fresh user session..."),Pt.clearAllStorage(),At.setCart({items:[],total:0,shopId:null}),console.log("\u2705 Fresh session initialized")}catch(e){console.error("\u274c Error initializing fresh session:",e)}}},Rt={setThemePreference:e=>Ct.setItem(It.THEME_PREFERENCE,e),getThemePreference:()=>Ct.getItem(It.THEME_PREFERENCE,"light"),setLanguagePreference:e=>Ct.setItem(It.LANGUAGE_PREFERENCE,e),getLanguagePreference:()=>Ct.getItem(It.LANGUAGE_PREFERENCE,null),setNotificationPreferences:e=>Ct.setItem(It.NOTIFICATION_PREFERENCES,e),getNotificationPreferences:()=>Ct.getItem(It.NOTIFICATION_PREFERENCES,{push:!0,email:!0,orderUpdates:!0,promotions:!1})},Dt=JSON.parse('{"home":{"select_stadium":"Stadium Selection","greeting":"Good Morning,","search_placeholder":"Search for food items...","categories":"Categories","cat_all":"All","cat_pizza":"Pizza","cat_burgers":"Burgers","cat_drinks":"Drinks","cat_desserts":"Desserts","cat_coffee":"Coffee","cat_asian":"Asian","cat_bakery":"Bakery","popular_menu":"Popular Menu","see_all":"See All","search_results":"Search Results","no_results_for":"No results found for","no_menu":"No menu items available","shops":"Shops","error_fetch_shops":"Failed to fetch restaurants","retry":"Try Again","no_shops":"No shops available","more_suffix":"more"},"cart":{"add_to_cart":"Add to Cart","empty":"Cart is empty","subtotal":"Subtotal","delivery":"Handling & Delivery","tip":"Tip","discount":"Discount","total":"Total","place_order":"Place Order"},"food":{"description":"Description","no_description":"No description available","off":"OFF","min":"min","orders":"orders","swipe_add_to_cart":"Swipe to add to Cart","not_found":"Food not found","try_again":"Try Again"},"tip":{"title":"Add Tip","supports_runner":"Your entire tip supports the runner.","order_total_is":"Order total is","illustration_alt":"Add a tip","tip_amount":"Tip Amount","custom_tip":"Custom Tip","custom_tip_label":"Custom tip (%)","custom_tip_placeholder":"Enter custom percentage","add_tip":"Add Tip","skip":"Skip"},"order":{"confirm_title":"Confirm Order","ticket_image_title":"Ticket Image (Optional)","ticket_image_desc":"Upload your ticket image to auto-fill seat information","choose_from_gallery":"Choose From Gallery","front_camera":"Camera","or":"OR","ticket_alt":"Ticket","seat_info_title":"Seat Information","seat_number":"Seat Number","seat_number_ph":"Enter seat number","stand_number":"Stand Number","stand_number_ph":"Enter stand","row_number":"Row Number","row_number_ph":"Enter row number","entrance":"Entrance","entrance_ph":"Enter entrance","area":"Area","area_ph":"Enter area","additional_details":"Additional Details","additional_details_ph":"Add text","summary_title":"Order Summary","subtotal":"Subtotal","tip":"Tip","total":"Total","processing":"Processing...","place_order_with_total":"Place Order - \u20aa{total}","place_order":"Place Order","card_payment_title":"Card Payment","confirm_card_payment":"Confirm Card Payment"},"auth":{"title_login":"Log in","title_register":"Create Account","first_name":"First Name","last_name":"Last Name","email":"Email","email_ph":"Enter your email","password":"Password","password_ph":"Enter your password","confirm_password":"Re-enter Password","confirm_password_ph":"Re-enter your password","forgot_password":"Forgot Password?","sign_in":"Sign In","create_account":"Create Account","toggle_no_account":"Don\'t have an account? ","toggle_register_now":"Register Now","toggle_have_account":"Already have an account? ","toggle_sign_in":"Sign In","please_wait":"Please wait...","fill_required":"Please fill in all required fields.","passwords_no_match":"Passwords do not match."},"onboarding":{"skip":"Skip","step1":{"title":"Tap. Sit. Enjoy.","subtitle":"A small tap \u2013 a big experience!","description":"Enjoy food, drinks and merch delivered right to your seat\u2014so you can stay in the action, not the line."},"step2":{"title":"Tap. Order. Relax.","subtitle":"Stay in your seat \u2013 we\u2019re on our way!","description":"Order from your phone and get everything you need without ever leaving your seat. Enjoy!"},"step3":{"title":"Tap. Order. Experience.","subtitle":"No getting up. No waiting. No missing out.","description":"Great food, drinks and products delivered to your seat\u2014so you stay in the game, not the line."}},"stadium":{"title":"Select Your Stadium","subtitle":"Choose where you want to order food from","loading":"Loading stadiums...","retry":"Retry","capacity":"Capacity","select_button":"Select a Stadium","continue_to":"Continue to"}}'),Ot=JSON.parse('{"home":{"select_stadium":"\u05d1\u05d7\u05d9\u05e8\u05ea \u05d0\u05e6\u05d8\u05d3\u05d9\u05d5\u05df","greeting":"\u05d1\u05d5\u05e7\u05e8 \u05d8\u05d5\u05d1,","search_placeholder":"\u05d7\u05e4\u05e9\u05d5 \u05e4\u05e8\u05d9\u05d8\u05d9 \u05de\u05d6\u05d5\u05df...","categories":"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea","cat_all":"\u05d4\u05db\u05d5\u05dc","cat_pizza":"\u05e4\u05d9\u05e6\u05d4","cat_burgers":"\u05d4\u05de\u05d1\u05d5\u05e8\u05d2\u05e8\u05d9\u05dd","cat_drinks":"\u05de\u05e9\u05e7\u05d0\u05d5\u05ea","cat_desserts":"\u05e7\u05d9\u05e0\u05d5\u05d7\u05d9\u05dd","cat_coffee":"\u05e7\u05e4\u05d4","cat_asian":"\u05d0\u05e1\u05d9\u05d9\u05ea\u05d9","cat_bakery":"\u05de\u05d0\u05e4\u05d9\u05d9\u05d4","popular_menu":"\u05ea\u05e4\u05e8\u05d9\u05d8 \u05e4\u05d5\u05e4\u05d5\u05dc\u05e8\u05d9","see_all":"\u05d4\u05e6\u05d2 \u05d4\u05db\u05dc","search_results":"\u05ea\u05d5\u05e6\u05d0\u05d5\u05ea \u05d7\u05d9\u05e4\u05d5\u05e9","no_results_for":"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea \u05e2\u05d1\u05d5\u05e8","no_menu":"\u05d0\u05d9\u05df \u05e4\u05e8\u05d9\u05d8\u05d9 \u05ea\u05e4\u05e8\u05d9\u05d8 \u05d6\u05de\u05d9\u05e0\u05d9\u05dd","shops":"\u05d7\u05e0\u05d5\u05d9\u05d5\u05ea","error_fetch_shops":"\u05d0\u05d9\u05e8\u05e2 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05de\u05e1\u05e2\u05d3\u05d5\u05ea","retry":"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1","no_shops":"\u05d0\u05d9\u05df \u05d7\u05e0\u05d5\u05d9\u05d5\u05ea \u05d6\u05de\u05d9\u05e0\u05d5\u05ea","more_suffix":"\u05e2\u05d5\u05d3"},"cart":{"add_to_cart":"\u05d4\u05d5\u05e1\u05e3 \u05dc\u05e2\u05d2\u05dc\u05d4","empty":"\u05d4\u05e2\u05d2\u05dc\u05d4 \u05e8\u05d9\u05e7\u05d4","subtotal":"\u05e1\u05d4\\"\u05db \u05d1\u05d9\u05e0\u05d9\u05d9\u05dd","delivery":"\u05d8\u05d9\u05e4\u05d5\u05dc \u05d5\u05de\u05e9\u05dc\u05d5\u05d7","tip":"\u05d8\u05d9\u05e4","discount":"\u05d4\u05e0\u05d7\u05d4","total":"\u05e1\u05d4\\"\u05db","place_order":"\u05d1\u05e6\u05e2 \u05d4\u05d6\u05de\u05e0\u05d4"},"food":{"description":"\u05ea\u05d9\u05d0\u05d5\u05e8","no_description":"\u05d0\u05d9\u05df \u05ea\u05d0\u05d5\u05e8 \u05d6\u05de\u05d9\u05df","off":"\u05d4\u05e0\u05d7\u05d4","min":"\u05d3\u05e7\u05f3","orders":"\u05d4\u05d6\u05de\u05e0\u05d5\u05ea","swipe_add_to_cart":"\u05d4\u05d7\u05dc\u05e7 \u05dc\u05d4\u05d5\u05e1\u05e4\u05d4 \u05dc\u05e2\u05d2\u05dc\u05d4","add_to_cart_short":"\u05d4\u05d5\u05e1\u05e3 \u05dc\u05e1\u05dc","not_found":"\u05d4\u05de\u05e0\u05d4 \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4","try_again":"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"},"tip":{"title":"\u05d4\u05d5\u05e1\u05e3 \u05d8\u05d9\u05e4","supports_runner":"\u05db\u05dc \u05d4\u05d8\u05d9\u05e4 \u05e9\u05dc\u05da \u05ea\u05d5\u05de\u05da \u05d1\u05e9\u05dc\u05d9\u05d7.","order_total_is":"\u05e1\u05db\u05d5\u05dd \u05d4\u05d4\u05d6\u05de\u05e0\u05d4 \u05d4\u05d5\u05d0","illustration_alt":"\u05d4\u05d5\u05e1\u05e3 \u05d8\u05d9\u05e4","tip_amount":"\u05e1\u05db\u05d5\u05dd \u05d4\u05d8\u05d9\u05e4","custom_tip":"\u05d8\u05d9\u05e4 \u05de\u05d5\u05ea\u05d0\u05dd","custom_tip_label":"\u05d8\u05d9\u05e4 \u05de\u05d5\u05ea\u05d0\u05dd (%)","custom_tip_placeholder":"\u05d4\u05db\u05e0\u05e1 \u05d0\u05d7\u05d5\u05d6 \u05de\u05d5\u05ea\u05d0\u05dd","add_tip":"\u05d4\u05d5\u05e1\u05e3 \u05d8\u05d9\u05e4","skip":"\u05d3\u05dc\u05d2"},"order":{"confirm_title":"\u05d0\u05d9\u05e9\u05d5\u05e8 \u05d4\u05d6\u05de\u05e0\u05d4","ticket_image_title":"\u05e6\u05d9\u05dc\u05d5\u05dd \u05db\u05e8\u05d8\u05d9\u05e1 \u05de\u05d5\u05e9\u05d1 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)","ticket_image_desc":"\u05d4\u05e2\u05dc\u05d5 \u05ea\u05de\u05d5\u05e0\u05ea \u05db\u05e8\u05d8\u05d9\u05e1 \u05db\u05d3\u05d9 \u05dc\u05de\u05dc\u05d0 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea \u05d0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05d4\u05de\u05d5\u05e9\u05d1","choose_from_gallery":"\u05d1\u05d7\u05d9\u05e8\u05d4 \u05de\u05d4\u05d2\u05dc\u05e8\u05d9\u05d4","front_camera":"\u05de\u05e6\u05dc\u05de\u05d4","or":"\u05d0\u05d5","ticket_alt":"\u05db\u05e8\u05d8\u05d9\u05e1","seat_info_title":"\u05e4\u05e8\u05d8\u05d9 \u05de\u05d5\u05e9\u05d1","seat_number":"\u05de\u05e1\u05e4\u05e8 \u05de\u05d5\u05e9\u05d1","seat_number_ph":"\u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05de\u05e1\u05e4\u05e8 \u05de\u05d5\u05e9\u05d1","stand_number":"\u05de\u05e1\u05e4\u05e8 \u05d9\u05e6\u05d9\u05e2","stand_number_ph":"\u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05d9\u05e6\u05d9\u05e2","row_number":"\u05de\u05e1\u05e4\u05e8 \u05e9\u05d5\u05e8\u05d4","row_number_ph":"\u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05de\u05e1\u05e4\u05e8 \u05e9\u05d5\u05e8\u05d4","entrance":"\u05db\u05e0\u05d9\u05e1\u05d4","entrance_ph":"\u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05db\u05e0\u05d9\u05e1\u05d4","area":"\u05d0\u05d6\u05d5\u05e8","area_ph":"\u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05d0\u05d6\u05d5\u05e8","additional_details":"\u05e4\u05e8\u05d8\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd","additional_details_ph":"\u05d4\u05d5\u05e1\u05d9\u05e4\u05d5 \u05d8\u05e7\u05e1\u05d8","summary_title":"\u05e1\u05d9\u05db\u05d5\u05dd \u05d4\u05d6\u05de\u05e0\u05d4","subtotal":"\u05e1\u05db\u05d5\u05dd \u05d1\u05d9\u05e0\u05d9\u05d9\u05dd","tip":"\u05d8\u05d9\u05e4","total":"\u05e1\u05d4\\"\u05db","processing":"\u05de\u05e2\u05d1\u05d3...","place_order_with_total":"\u05d1\u05e6\u05e2 \u05d4\u05d6\u05de\u05e0\u05d4 - {total}","place_order":"\u05d1\u05e6\u05e2 \u05d4\u05d6\u05de\u05e0\u05d4","card_payment_title":"\u05ea\u05e9\u05dc\u05d5\u05dd \u05d1\u05db\u05e8\u05d8\u05d9\u05e1","confirm_card_payment":"\u05d0\u05e9\u05e8 \u05ea\u05e9\u05dc\u05d5\u05dd \u05d1\u05db\u05e8\u05d8\u05d9\u05e1"},"auth":{"title_login":"\u05d4\u05ea\u05d7\u05d1\u05e8 \u05dc\u05d7\u05e9\u05d1\u05d5\u05df \u05e9\u05dc\u05da","title_register":"\u05e6\u05d5\u05e8 \u05d7\u05e9\u05d1\u05d5\u05df","first_name":"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9","last_name":"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4","email":"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc","email_ph":"\u05d4\u05db\u05e0\u05e1 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc","password":"\u05e1\u05d9\u05e1\u05de\u05d4","password_ph":"\u05d4\u05db\u05e0\u05e1 \u05e1\u05d9\u05e1\u05de\u05d4","confirm_password":"\u05d0\u05d9\u05de\u05d5\u05ea \u05e1\u05d9\u05e1\u05de\u05d4","confirm_password_ph":"\u05d4\u05db\u05e0\u05e1 \u05e9\u05d5\u05d1 \u05d0\u05ea \u05d4\u05e1\u05d9\u05e1\u05de\u05d4","forgot_password":"\u05e9\u05db\u05d7\u05ea \u05e1\u05d9\u05e1\u05de\u05d4?","sign_in":"\u05d4\u05ea\u05d7\u05d1\u05e8","create_account":"\u05d4\u05d9\u05e8\u05e9\u05dd","toggle_no_account":"\u05d0\u05d9\u05df \u05dc\u05da \u05d7\u05e9\u05d1\u05d5\u05df? ","toggle_register_now":"\u05d4\u05d9\u05e8\u05e9\u05dd \u05e2\u05db\u05e9\u05d9\u05d5","toggle_have_account":"\u05db\u05d1\u05e8 \u05d9\u05e9 \u05dc\u05da \u05d7\u05e9\u05d1\u05d5\u05df? ","toggle_sign_in":"\u05d4\u05ea\u05d7\u05d1\u05e8","please_wait":"\u05d0\u05e0\u05d0 \u05d4\u05de\u05ea\u05df...","fill_required":"\u05e0\u05d0 \u05dc\u05de\u05dc\u05d0 \u05d0\u05ea \u05db\u05dc \u05d4\u05e9\u05d3\u05d5\u05ea \u05d4\u05e0\u05d3\u05e8\u05e9\u05d9\u05dd.","passwords_no_match":"\u05d4\u05e1\u05d9\u05e1\u05de\u05d0\u05d5\u05ea \u05d0\u05d9\u05e0\u05df \u05ea\u05d5\u05d0\u05de\u05d5\u05ea."},"onboarding":{"skip":"\u05d3\u05dc\u05d2","step1":{"title":"\u05ea\u05e9\u05d1. \u05ea\u05d6\u05de\u05d9\u05df. \u05ea\u05ea\u05e4\u05e0\u05e7.","subtitle":"\u05dc\u05d7\u05d9\u05e6\u05d4 \u05e7\u05d8\u05e0\u05d4 \u2013 \u05d7\u05d5\u05d5\u05d9\u05d4 \u05d2\u05d3\u05d5\u05dc\u05d4!","description":"\u05ea\u05d9\u05d4\u05e0\u05d4 \u05de\u05d0\u05d5\u05db\u05dc, \u05de\u05e9\u05e7\u05d0\u05d5\u05ea \u05d5\u05de\u05d5\u05e6\u05e8\u05d9\u05dd \u05e9\u05d9\u05d2\u05d9\u05e2\u05d5 \u05d9\u05e9\u05d9\u05e8\u05d5\u05ea \u05dc\u05de\u05d5\u05e9\u05d1 \u05e9\u05dc\u05da \u2013 \u05db\u05d3\u05d9 \u05e9\u05ea\u05d5\u05db\u05dc \u05dc\u05d4\u05d9\u05e9\u05d0\u05e8 \u05d1\u05de\u05e9\u05d7\u05e7, \u05dc\u05d0 \u05d1\u05ea\u05d5\u05e8."},"step2":{"title":"\u05ea\u05e9\u05d1. \u05ea\u05d6\u05de\u05d9\u05df. \u05ea\u05d4\u05e0\u05d4.","subtitle":"\u05ea\u05d9\u05e9\u05d0\u05e8 \u05d1\u05db\u05d9\u05e1\u05d0 \u2013 \u05d0\u05e0\u05d7\u05e0\u05d5 \u05db\u05d1\u05e8 \u05d1\u05d0\u05d9\u05dd!","description":"\u05d4\u05d6\u05de\u05df \u05de\u05d4\u05e0\u05d9\u05d9\u05d3 \u05d5\u05e7\u05d1\u05dc \u05d4\u05db\u05dc \u05d1\u05dc\u05d9 \u05dc\u05d6\u05d5\u05d6 \u05de\u05d4\u05de\u05e7\u05d5\u05dd \u2013 \u05d7\u05d5\u05d5\u05d9\u05d4 \u05e0\u05d5\u05d7\u05d4 \u05d5\u05de\u05d4\u05d9\u05e8\u05d4."},"step3":{"title":"\u05ea\u05e9\u05d1. \u05ea\u05d6\u05de\u05d9\u05df. \u05ea\u05d7\u05d5\u05d5\u05d4.","subtitle":"\u05d1\u05dc\u05d9 \u05dc\u05e7\u05d5\u05dd. \u05d1\u05dc\u05d9 \u05dc\u05d7\u05db\u05d5\u05ea. \u05d1\u05dc\u05d9 \u05dc\u05e4\u05e1\u05e4\u05e1.","description":"\u05de\u05d5\u05e6\u05e8\u05d9\u05dd, \u05de\u05e9\u05e7\u05d0\u05d5\u05ea \u05d5\u05d0\u05d5\u05db\u05dc \u05e2\u05d3 \u05d4\u05db\u05d9\u05e1\u05d0 \u05e9\u05dc\u05da \u2013 \u05db\u05d3\u05d9 \u05e9\u05ea\u05d9\u05e9\u05d0\u05e8 \u05d1\u05de\u05e8\u05db\u05d6 \u05d4\u05e2\u05e0\u05d9\u05d9\u05e0\u05d9\u05dd, \u05dc\u05d0 \u05d1\u05ea\u05d5\u05e8."}},"stadium":{"title":"\u05d1\u05d7\u05e8\u05d5 \u05d0\u05e6\u05d8\u05d3\u05d9\u05d5\u05df","subtitle":"\u05d1\u05d7\u05e8\u05d5 \u05de\u05d0\u05d9\u05e4\u05d4 \u05ea\u05e8\u05e6\u05d5 \u05dc\u05d4\u05d6\u05de\u05d9\u05df \u05d0\u05d5\u05db\u05dc","loading":"\u05d8\u05d5\u05e2\u05df \u05d0\u05e6\u05d8\u05d3\u05d9\u05d5\u05e0\u05d9\u05dd...","retry":"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1","capacity":"\u05e7\u05d9\u05d1\u05d5\u05dc\u05ea","select_button":"\u05d1\u05d7\u05e8\u05d5 \u05d0\u05e6\u05d8\u05d3\u05d9\u05d5\u05df","continue_to":"\u05d4\u05de\u05e9\u05da \u05d0\u05dc"}}'),Lt={en:{common:{ok:"OK",cancel:"Cancel",back:"Back"},nav:{home:"Home",menu:"Menu",orders:"Orders",cart:"Cart",profile:"Profile"},profile:{logout:"Logout",active:"Active",completed:"Completed",settings:"Settings",language:"Language",language_sub:"Choose your language",about:"About app",about_sub:"Version and info",terms:"Terms and conditions",terms_sub:"Read our terms",feedback:"Feedback",feedback_sub:"Tell us what you think",privacy:"Privacy policy",privacy_sub:"How we handle data",report:"Report a Problem",report_sub:"Something not working?"},orders:{order:"Order",my_orders:"My Orders",subtitle:"Track your food orders",active:"Active",completed:"Completed",loading:"Loading your orders...",error_loading:"Error Loading Orders",try_again:"Try Again",no_orders:"No orders",empty_hint:"Your orders will appear here",items:"Items",track:"Track Order",delivered:"Delivered",cancelled:"Cancelled",pending:"Pending",preparing:"Preparing",delivering:"Delivering"},track:{show_qr:"Show QR Code",order:"Order",order_received:"Order Received",preparing:"Preparing",on_the_way:"On the way",delivered:"Delivered",loading:"Loading\u2026",no_code:"No code",items:"Items",item:"Item",qty:"Qty",no_items:"No items"},settings:{select_language:"Select Language",app_language:"App Language",current:"Current",english:"English",hebrew:"Hebrew",about_title:"About App",terms_title:"Terms and Conditions",privacy_title:"Privacy Policy",feedback_title:"Feedback",report_title:"Report a Problem",feedback_thanks:"Thanks for your feedback! We'll review it shortly.",report_thanks:"Thanks, we received your report. Our team will investigate.",share_thoughts:"Share your thoughts",email_optional:"Email (optional)",category:"Category",message:"Message",send:"Send",submit:"Submit",general:"General",feature:"Feature Request",design_ui:"Design / UI",performance:"Performance",what_wrong:"What went wrong?",rtl_note:"The interface direction will switch automatically for Hebrew (RTL)."}},he:{common:{ok:"\u05d0\u05d9\u05e9\u05d5\u05e8",cancel:"\u05d1\u05d9\u05d8\u05d5\u05dc",back:"\u05d7\u05d6\u05e8\u05d4"},nav:{home:"\u05d1\u05d9\u05ea",menu:"\u05ea\u05e4\u05e8\u05d9\u05d8",orders:"\u05d4\u05d6\u05de\u05e0\u05d5\u05ea",cart:"\u05e1\u05dc",profile:"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"},profile:{logout:"\u05d4\u05ea\u05e0\u05ea\u05e7\u05d5\u05ea",active:"\u05e4\u05e2\u05d9\u05dc",completed:"\u05d4\u05d5\u05e9\u05dc\u05de\u05d5",settings:"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea",language:"\u05e9\u05e4\u05d4",language_sub:"\u05d1\u05d7\u05e8\u05d5 \u05d0\u05ea \u05d4\u05e9\u05e4\u05d4",about:"\u05d0\u05d5\u05d3\u05d5\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4",about_sub:"\u05d2\u05e8\u05e1\u05d4 \u05d5\u05de\u05d9\u05d3\u05e2",terms:"\u05ea\u05e0\u05d0\u05d9\u05dd \u05d5\u05d4\u05d2\u05d1\u05dc\u05d5\u05ea",terms_sub:"\u05e7\u05e8\u05d9\u05d0\u05ea \u05d4\u05ea\u05e0\u05d0\u05d9\u05dd \u05e9\u05dc\u05e0\u05d5",feedback:"\u05de\u05e9\u05d5\u05d1",feedback_sub:"\u05e1\u05e4\u05e8\u05d5 \u05dc\u05e0\u05d5 \u05de\u05d4 \u05d3\u05e2\u05ea\u05db\u05dd",privacy:"\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05e4\u05e8\u05d8\u05d9\u05d5\u05ea",privacy_sub:"\u05d0\u05d9\u05da \u05d0\u05e0\u05d7\u05e0\u05d5 \u05de\u05d8\u05e4\u05dc\u05d9\u05dd \u05d1\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd",report:"\u05d3\u05d9\u05d5\u05d5\u05d7 \u05e2\u05dc \u05d1\u05e2\u05d9\u05d4",report_sub:"\u05de\u05e9\u05d4\u05d5 \u05dc\u05d0 \u05e2\u05d5\u05d1\u05d3?"},orders:{order:"\u05d4\u05d6\u05de\u05e0\u05d4",my_orders:"\u05d4\u05d4\u05d6\u05de\u05e0\u05d5\u05ea \u05e9\u05dc\u05d9",subtitle:"\u05e2\u05e7\u05d1\u05d5 \u05d0\u05d7\u05e8\u05d9 \u05d4\u05d6\u05de\u05e0\u05d5\u05ea \u05d4\u05d0\u05d5\u05db\u05dc \u05e9\u05dc\u05db\u05dd",active:"\u05e4\u05e2\u05d9\u05dc",completed:"\u05d4\u05d5\u05e9\u05dc\u05de\u05d5",loading:"\u05d8\u05d5\u05e2\u05df \u05d0\u05ea \u05d4\u05d4\u05d6\u05de\u05e0\u05d5\u05ea\u2026",error_loading:"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05d6\u05de\u05e0\u05d5\u05ea",try_again:"\u05e0\u05e1\u05d5 \u05e9\u05d5\u05d1",no_orders:"\u05d0\u05d9\u05df \u05d4\u05d6\u05de\u05e0\u05d5\u05ea",empty_hint:"\u05d4\u05d4\u05d6\u05de\u05e0\u05d5\u05ea \u05e9\u05dc\u05db\u05dd \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05db\u05d0\u05df",items:"\u05e4\u05e8\u05d9\u05d8\u05d9\u05dd",track:"\u05e2\u05e7\u05d5\u05d1 \u05d0\u05d7\u05e8\u05d9 \u05d4\u05d6\u05de\u05e0\u05d4",delivered:"\u05e0\u05de\u05e1\u05e8\u05d4",cancelled:"\u05d1\u05d5\u05d8\u05dc\u05d4",pending:"\u05de\u05de\u05ea\u05d9\u05e0\u05d4",preparing:"\u05d1\u05d4\u05db\u05e0\u05d4",delivering:"\u05d1\u05d3\u05e8\u05da"},track:{show_qr:"\u05d4\u05e6\u05d2 \u05e7\u05d5\u05d3 QR",order:"\u05d4\u05d6\u05de\u05e0\u05d4",order_received:"\u05d4\u05d4\u05d6\u05de\u05e0\u05d4 \u05d4\u05ea\u05e7\u05d1\u05dc\u05d4",preparing:"\u05d1\u05d4\u05db\u05e0\u05d4",on_the_way:"\u05d1\u05d3\u05e8\u05da",delivered:"\u05e0\u05de\u05e1\u05e8\u05d4",loading:"\u05d8\u05d5\u05e2\u05df\u2026",no_code:"\u05d0\u05d9\u05df \u05e7\u05d5\u05d3",items:"\u05e4\u05e8\u05d9\u05d8\u05d9\u05dd",item:"\u05e4\u05e8\u05d9\u05d8",qty:"\u05db\u05de\u05d5\u05ea",no_items:"\u05d0\u05d9\u05df \u05e4\u05e8\u05d9\u05d8\u05d9\u05dd"},settings:{select_language:"\u05d1\u05d7\u05e8\u05d5 \u05e9\u05e4\u05d4",app_language:"\u05e9\u05e4\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4",current:"\u05e0\u05d5\u05db\u05d7\u05d9\u05ea",english:"\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea",hebrew:"\u05e2\u05d1\u05e8\u05d9\u05ea",about_title:"\u05d0\u05d5\u05d3\u05d5\u05ea \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4",terms_title:"\u05ea\u05e0\u05d0\u05d9\u05dd \u05d5\u05d4\u05d2\u05d1\u05dc\u05d5\u05ea",privacy_title:"\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05e4\u05e8\u05d8\u05d9\u05d5\u05ea",feedback_title:"\u05de\u05e9\u05d5\u05d1",report_title:"\u05d3\u05d9\u05d5\u05d5\u05d7 \u05e2\u05dc \u05d1\u05e2\u05d9\u05d4",feedback_thanks:"\u05ea\u05d5\u05d3\u05d4 \u05e2\u05dc \u05d4\u05de\u05e9\u05d5\u05d1! \u05e0\u05e2\u05d1\u05d5\u05e8 \u05e2\u05dc\u05d9\u05d5 \u05d1\u05e7\u05e8\u05d5\u05d1.",report_thanks:"\u05ea\u05d5\u05d3\u05d4, \u05e7\u05d9\u05d1\u05dc\u05e0\u05d5 \u05d0\u05ea \u05d4\u05d3\u05d9\u05d5\u05d5\u05d7. \u05d4\u05e6\u05d5\u05d5\u05ea \u05d9\u05d1\u05d3\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e2\u05e0\u05d9\u05d9\u05df.",share_thoughts:"\u05e9\u05ea\u05e4\u05d5 \u05d0\u05d5\u05ea\u05e0\u05d5",email_optional:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)",category:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4",message:"\u05d4\u05d5\u05d3\u05e2\u05d4",send:"\u05e9\u05dc\u05d9\u05d7\u05d4",submit:"\u05e9\u05dc\u05d9\u05d7\u05d4",general:"\u05db\u05dc\u05dc\u05d9",feature:"\u05d1\u05e7\u05e9\u05ea \u05e4\u05d9\u05e6\u05f3\u05e8",design_ui:"\u05e2\u05d9\u05e6\u05d5\u05d1 / \u05de\u05de\u05e9\u05e7",performance:"\u05d1\u05d9\u05e6\u05d5\u05e2\u05d9\u05dd",what_wrong:"\u05de\u05d4 \u05dc\u05d0 \u05e2\u05d1\u05d3?",rtl_note:"\u05db\u05d9\u05d5\u05d5\u05df \u05d4\u05de\u05de\u05e9\u05e7 \u05d9\u05e2\u05d1\u05d5\u05e8 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea \u05dc\u05d9\u05de\u05d9\u05df- \u05dc\u05e9\u05de\u05d0\u05dc \u05d1\u05e2\u05d1\u05e8\u05d9\u05ea (RTL)."}}};function jt(e,t){if(!t)return e;const n=Array.isArray(e)?[...e]:{...e};return Object.keys(t).forEach(e=>{const r=t[e],i=n[e];r&&"object"===typeof r&&!Array.isArray(r)?n[e]=jt(i&&"object"===typeof i?i:{},r):n[e]=r}),n}const Mt=(0,e.createContext)({lang:"en",t:e=>e,setLang:()=>{}}),Ft=t=>{let{children:n}=t;const[r,i]=(0,e.useState)(Rt.getLanguagePreference()||"he");(0,e.useEffect)(()=>{const e=e=>{e.detail&&i(e.detail)};return window.addEventListener("language-changed",e),()=>window.removeEventListener("language-changed",e)},[]),(0,e.useEffect)(()=>{const e="he"===r;document.documentElement.setAttribute("lang",r),document.documentElement.setAttribute("dir",e?"rtl":"ltr"),document.body.setAttribute("lang",r),document.body.style.direction=e?"rtl":"ltr"},[r]);const s=(0,e.useMemo)(()=>jt(Lt[r]||Lt.en,"he"===r?Ot:Dt),[r]),a=(0,e.useMemo)(()=>e=>{const t=e.split(".");let n=s;for(const i of t){var r;if(n=null===(r=n)||void 0===r?void 0:r[i],null==n)return e}return"string"===typeof n?n:e},[s]);return(0,_t.jsx)(Mt.Provider,{value:{lang:r,t:a,setLang:i},children:n})},Ut=()=>(0,e.useContext)(Mt),zt=()=>{const[t,n]=(0,e.useState)(!1),r=te();return(0,e.useEffect)(()=>{const e=setTimeout(()=>{n(!0)},500),t=setTimeout(()=>{const e=localStorage.getItem("selectedStadium"),t=localStorage.getItem("userToken");r(t&&e?"/home":t?"/stadium":"/auth")},2500);return()=>{clearTimeout(e),clearTimeout(t)}},[r]),(0,_t.jsxs)("div",{className:"splash-screen",children:[(0,_t.jsx)("div",{className:"splash-background",children:(0,_t.jsx)("div",{className:"pattern-overlay"})}),(0,_t.jsx)("div",{className:"splash-logo "+(t?"visible":""),children:(0,_t.jsxs)("div",{className:"logo-container",children:[(0,_t.jsx)("div",{className:"logo-circle",children:(0,_t.jsx)("span",{className:"logo-emoji",children:"\ud83c\udf54"})}),(0,_t.jsx)("h1",{className:"logo-text",children:"Food Munch"}),(0,_t.jsx)("p",{className:"logo-tagline",children:"Delicious food delivered fresh"})]})}),(0,_t.jsx)("div",{className:"splash-loading",children:(0,_t.jsxs)("div",{className:"loading-dots",children:[(0,_t.jsx)("span",{}),(0,_t.jsx)("span",{}),(0,_t.jsx)("span",{})]})})]})},Vt=()=>{const[t,n]=(0,e.useState)(0),r=te(),{t:i,lang:s}=Ut(),a=[{id:1,title:i("onboarding.step1.title"),subtitle:i("onboarding.step1.subtitle"),description:i("onboarding.step1.description"),image:"/assets/images/on-boarding-1.png",color:"#000000"},{id:2,title:i("onboarding.step2.title"),subtitle:i("onboarding.step2.subtitle"),description:i("onboarding.step2.description"),image:"/assets/images/on-boarding-2.png",color:"#000000"},{id:3,title:i("onboarding.step3.title"),subtitle:i("onboarding.step3.subtitle"),description:i("onboarding.step3.description"),image:"/assets/images/on-boarding-3.png",color:"#000000"}],o=a[t];return(0,_t.jsxs)("div",{className:"onboarding-screen",dir:"he"===s?"rtl":"ltr",children:[(0,_t.jsx)("div",{className:"onboarding-bg",style:{backgroundImage:`url(${o.image})`}}),(0,_t.jsx)("div",{className:"onboarding-overlay"}),(0,_t.jsxs)("div",{className:"onboarding-container",children:[(0,_t.jsx)("button",{className:"skip-button",onClick:()=>{localStorage.setItem("hasSeenOnboarding","true"),r("/stadium-selection")},children:i("onboarding.skip")}),(0,_t.jsxs)("div",{className:"onboarding-content",children:[(0,_t.jsxs)("div",{className:"onboarding-text top",children:[(0,_t.jsx)("h1",{className:"onboarding-title",children:o.title}),(0,_t.jsx)("h2",{className:"onboarding-subtitle",children:o.subtitle})]}),(0,_t.jsx)("div",{className:"onboarding-text bottom",children:(0,_t.jsx)("p",{className:"onboarding-description",children:o.description})})]}),(0,_t.jsxs)("div",{className:"onboarding-navigation",children:[(0,_t.jsx)("div",{className:"progress-indicators",children:a.map((e,n)=>(0,_t.jsx)("div",{className:`progress-dot ${n===t?"active":""} ${n<t?"completed":""}`},n))}),(0,_t.jsx)("div",{className:"navigation-buttons",children:(0,_t.jsx)("button",{className:"nav-button next-button",onClick:()=>{t<a.length-1?n(t+1):(localStorage.setItem("hasSeenOnboarding","true"),r("/stadium-selection"))},"aria-label":"Next",children:(0,_t.jsxs)("svg",{className:"nav-icon",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,_t.jsx)("path",{d:"M5 12h14",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),(0,_t.jsx)("path",{d:"M13 5l7 7-7 7",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]})]})]})},Bt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Ht;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ht extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qt=function(e){return function(e){const t=Bt(e);return $t.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Wt=function(e){try{return $t.decodeString(e,!0)}catch(K_){console.error("base64Decode failed: ",K_)}return null};function Kt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Gt=()=>{try{return Kt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(K_){return}const t=e&&Wt(e[1]);return t&&JSON.parse(t)})()}catch(K_){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K_}`)}},Qt=e=>Gt()?.emulatorHosts?.[e],Yt=()=>Gt()?.config,Jt=e=>Gt()?.[`_${e}`];class Xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Zt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function en(e){return(await fetch(e,{credentials:"include"})).ok}const tn={};let nn=!1;function rn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Zt(window.location.host)||tn[e]===t||tn[e]||nn)return;function n(e){return`__firebase__banner__${e}`}tn[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(tn))tn[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{nn=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function sn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function an(){const e=Gt()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(K_){return!1}}function on(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ln(){return!an()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cn(){try{return"object"===typeof indexedDB}catch(K_){return!1}}function un(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}function dn(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class hn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fn.prototype.create)}}class fn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(pn,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new hn(n,s,t)}}const pn=/\{\$([^}]+)}/g;function mn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(gn(n)&&gn(s)){if(!mn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gn(e){return null!==e&&"object"===typeof e}function yn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function vn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function wn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class bn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=En),void 0===r.error&&(r.error=En),void 0===r.complete&&(r.complete=En);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(K_){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(K_){"undefined"!==typeof console&&console.error&&console.error(K_)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}function _n(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Sn(e){return e&&e._delegate?e._delegate:e}class kn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const In="[DEFAULT]";class Tn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Xt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(K_){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(K_){if(n)return null;throw K_}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:In})}catch(K_){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(K_){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===In?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In;return this.component?this.component.multipleInstances?e:In:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Cn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Nn=[];var xn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xn||(xn={}));const An={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},Pn=xn.INFO,Rn={[xn.DEBUG]:"log",[xn.VERBOSE]:"log",[xn.INFO]:"info",[xn.WARN]:"warn",[xn.ERROR]:"error"},Dn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Rn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class On{constructor(e){this.name=e,this._logLevel=Pn,this._logHandler=Dn,this._userLogHandler=null,Nn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?An[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.DEBUG,...t),this._logHandler(this,xn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.VERBOSE,...t),this._logHandler(this,xn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.INFO,...t),this._logHandler(this,xn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.WARN,...t),this._logHandler(this,xn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xn.ERROR,...t),this._logHandler(this,xn.ERROR,...t)}}let Ln,jn;const Mn=new WeakMap,Fn=new WeakMap,Un=new WeakMap,zn=new WeakMap,Vn=new WeakMap;let Bn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Fn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Un.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function $n(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(jn||(jn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Wn(this),n),qn(Mn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qn(e.apply(Wn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Wn(this),t,...r);return Un.set(s,t.sort?t.sort():[t]),qn(s)}}function Hn(e){return"function"===typeof e?$n(e):(e instanceof IDBTransaction&&function(e){if(Fn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Fn.set(e,t)}(e),t=e,(Ln||(Ln=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Bn):e);var t}function qn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(qn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Mn.set(t,e)}).catch(()=>{}),Vn.set(t,e),t}(e);if(zn.has(e))return zn.get(e);const t=Hn(e);return t!==e&&(zn.set(e,t),Vn.set(t,e)),t}const Wn=e=>Vn.get(e);function Kn(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=qn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(qn(a.result),e.oldVersion,e.newVersion,qn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function Gn(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),qn(n).then(()=>{})}const Qn=["get","getKey","getAll","getAllKeys","count"],Yn=["put","add","delete","clear"],Jn=new Map;function Xn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Jn.get(t))return Jn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Yn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Qn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Jn.set(t,s),s}Bn=(e=>({...e,get:(t,n,r)=>Xn(t,n)||e.get(t,n,r),has:(t,n)=>!!Xn(t,n)||e.has(t,n)}))(Bn);class Zn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const er="@firebase/app",tr="0.14.0",nr=new On("@firebase/app"),rr="@firebase/app-compat",ir="@firebase/analytics-compat",sr="@firebase/analytics",ar="@firebase/app-check-compat",or="@firebase/app-check",lr="@firebase/auth",cr="@firebase/auth-compat",ur="@firebase/database",dr="@firebase/data-connect",hr="@firebase/database-compat",fr="@firebase/functions",pr="@firebase/functions-compat",mr="@firebase/installations",gr="@firebase/installations-compat",yr="@firebase/messaging",vr="@firebase/messaging-compat",wr="@firebase/performance",br="@firebase/performance-compat",Er="@firebase/remote-config",_r="@firebase/remote-config-compat",Sr="@firebase/storage",kr="@firebase/storage-compat",Ir="@firebase/firestore",Tr="@firebase/ai",Cr="@firebase/firestore-compat",Nr="firebase",xr="[DEFAULT]",Ar={[er]:"fire-core",[rr]:"fire-core-compat",[sr]:"fire-analytics",[ir]:"fire-analytics-compat",[or]:"fire-app-check",[ar]:"fire-app-check-compat",[lr]:"fire-auth",[cr]:"fire-auth-compat",[ur]:"fire-rtdb",[dr]:"fire-data-connect",[hr]:"fire-rtdb-compat",[fr]:"fire-fn",[pr]:"fire-fn-compat",[mr]:"fire-iid",[gr]:"fire-iid-compat",[yr]:"fire-fcm",[vr]:"fire-fcm-compat",[wr]:"fire-perf",[br]:"fire-perf-compat",[Er]:"fire-rc",[_r]:"fire-rc-compat",[Sr]:"fire-gcs",[kr]:"fire-gcs-compat",[Ir]:"fire-fst",[Cr]:"fire-fst-compat",[Tr]:"fire-vertex","fire-js":"fire-js",[Nr]:"fire-js-all"},Pr=new Map,Rr=new Map,Dr=new Map;function Or(e,t){try{e.container.addComponent(t)}catch(K_){nr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,K_)}}function Lr(e){const t=e.name;if(Dr.has(t))return nr.debug(`There were multiple attempts to register component ${t}.`),!1;Dr.set(t,e);for(const n of Pr.values())Or(n,e);for(const n of Rr.values())Or(n,e);return!0}function jr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Fr=new fn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ur{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}const zr="12.0.0";function Vr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r={name:xr,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!==typeof i||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=Yt()),!n)throw Fr.create("no-options");const s=Pr.get(i);if(s){if(mn(n,s.options)&&mn(r,s.config))return s;throw Fr.create("duplicate-app",{appName:i})}const a=new Cn(i);for(const l of Dr.values())a.addComponent(l);const o=new Ur(n,r,a);return Pr.set(i,o),o}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr;const t=Pr.get(e);if(!t&&e===xr&&Yt())return Vr();if(!t)throw Fr.create("no-app",{appName:e});return t}function $r(e,t,n){let r=Ar[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void nr.warn(e.join(" "))}Lr(new kn(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Hr="firebase-heartbeat-store";let qr=null;function Wr(){return qr||(qr=Kn("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Hr)}catch(K_){console.warn(K_)}}}).catch(e=>{throw Fr.create("idb-open",{originalErrorMessage:e.message})})),qr}async function Kr(e,t){try{const n=(await Wr()).transaction(Hr,"readwrite"),r=n.objectStore(Hr);await r.put(t,Gr(e)),await n.done}catch(K_){if(K_ instanceof hn)nr.warn(K_.message);else{const t=Fr.create("idb-set",{originalErrorMessage:K_?.message});nr.warn(t.message)}}}function Gr(e){return`${e.name}!${e.options.appId}`}class Qr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Yr();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(K_){nr.warn(K_)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=Yr(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Xr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=qt(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(K_){return nr.warn(K_),""}}}function Yr(){return(new Date).toISOString().substring(0,10)}class Jr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!cn()&&un().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Wr()).transaction(Hr),n=await t.objectStore(Hr).get(Gr(e));return await t.done,n}catch(K_){if(K_ instanceof hn)nr.warn(K_.message);else{const t=Fr.create("idb-get",{originalErrorMessage:K_?.message});nr.warn(t.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Kr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Kr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Xr(e){return qt(JSON.stringify({version:2,heartbeats:e})).length}var Zr;Zr="",Lr(new kn("platform-logger",e=>new Zn(e),"PRIVATE")),Lr(new kn("heartbeat",e=>new Qr(e),"PRIVATE")),$r(er,tr,Zr),$r(er,tr,"esm2020"),$r("fire-js","");var ei,ti,ni="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ri={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ti=ri.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},ei=ri.Integer=r}).apply("undefined"!==typeof ni?ni:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ii,si,ai,oi,li,ci,ui,di,hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof hi&&hi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function k(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,N=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){S(n)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,D);var j={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):z(e)}}}function J(e){return e in q?q[e]:q[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;E(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function we(){D.call(this,"c")}d(ve,D),d(we,D);var be={},Ee=null;function _e(){return Ee=Ee||new ne}function Se(e){D.call(this,be.La,e)}function ke(e){const t=_e();re(t,new Se(t))}function Ie(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function Te(e){const t=_e();re(t,new Ie(t,e))}function Ce(e,t){D.call(this,be.Ma,e),this.size=t}function Ne(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function xe(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(Se,D),be.STAT_EVENT="statevent",d(Ie,D),be.Ma="timingevent",d(Ce,D),xe.prototype.xa=function(){this.g=!1},xe.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ne(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ne(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),$e(o)),r.g=a}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||ke(),qe(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Wt(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ke(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ge(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ae(this.i,this.l,o,null),Ge(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),We(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Te(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Et;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new Et(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Et?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new Et(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function Et(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){_t(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return _t(e),t=Tt(e,t),e.g.has(t)}function It(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Nt(){this.g=new fe}function xt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(K_){throw t.push(r+"type="+encodeURIComponent("_badmap")),K_}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Et.prototype).add=function(e,t){_t(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,kt(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(At,pe),At.prototype.g=function(){return new Pt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Ot(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),$t(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Vt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(K_){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Nt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),N||(C(),N=!0),x.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{xt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),N||(C(),N=!0),x.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ne(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,ze(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ne(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new xe;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),dn(e),Jt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void zt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){zt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),E(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&jt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ne(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,we),d(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,di=fi.createWebChannelTransport=function(){return new mn},ui=fi.getStatEventTarget=function(){return _e()},ci=fi.Event=be,li=fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,oi=fi.ErrorCode=Re,De.COMPLETE="complete",ai=fi.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,si=fi.WebChannel=ge,fi.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ii=fi.XhrIo=Mt}).apply("undefined"!==typeof hi?hi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const pi="@firebase/firestore",mi="4.9.0";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let yi="12.0.0";const vi=new On("@firebase/firestore");function wi(){return vi.logLevel}function bi(e){if(vi.logLevel<=xn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Si);vi.debug(`Firestore (${yi}): ${e}`,...i)}}function Ei(e){if(vi.logLevel<=xn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Si);vi.error(`Firestore (${yi}): ${e}`,...i)}}function _i(e){if(vi.logLevel<=xn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Si);vi.warn(`Firestore (${yi}): ${e}`,...i)}}function Si(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ki(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ii(e,r,n)}function Ii(e,t,n){let r=`FIRESTORE (${yi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ei(r),new Error(r)}function Ti(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Ii(t,i,r)}function Ci(e,t){return e}const Ni={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xi extends hn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ri{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class Di{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Oi{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ti(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ai,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{bi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(bi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ai)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(bi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ti("string"==typeof t.accessToken,31837,{l:t}),new Pi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ti(null===e||"string"==typeof e,2055,{h:e}),new gi(e)}}class Li{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ji{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Li(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fi{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ti(void 0===this.o,3512);const n=e=>{null!=e.error&&bi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,bi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{bi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):bi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ti("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Mi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ui(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class zi{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ui(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Vi(e,t){return e<t?-1:e>t?1:0}function Bi(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return qi(n)===qi(i)?Vi(n,i):qi(n)?1:-1}return Vi(e.length,t.length)}const $i=55296,Hi=57343;function qi(e){const t=e.charCodeAt(0);return t>=$i&&t<=Hi}function Wi(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Ki="__name__";class Gi{constructor(e,t,n){void 0===t?t=0:t>e.length&&ki(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ki(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Gi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Gi.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Vi(e.length,t.length)}static compareSegments(e,t){const n=Gi.isNumericId(e),r=Gi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Gi.extractNumericId(e).compare(Gi.extractNumericId(t)):Bi(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}}class Qi extends Gi{construct(e,t,n){return new Qi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new xi(Ni.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Qi(e)}static emptyPath(){return new Qi([])}}const Yi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends Gi{construct(e,t,n){return new Ji(e,t,n)}static isValidIdentifier(e){return Yi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ki}static keyField(){return new Ji([Ki])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new xi(Ni.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new xi(Ni.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xi(Ni.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new xi(Ni.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ji(t)}static emptyPath(){return new Ji([])}}class Xi{constructor(e){this.path=e}static fromPath(e){return new Xi(Qi.fromString(e))}static fromName(e){return new Xi(Qi.fromString(e).popFirst(5))}static empty(){return new Xi(Qi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xi(new Qi(e.slice()))}}function Zi(e,t,n){if(!n)throw new xi(Ni.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function es(e){if(!Xi.isDocumentKey(e))throw new xi(Ni.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ts(e){if(Xi.isDocumentKey(e))throw new xi(Ni.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ns(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function rs(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ki(12329,{type:typeof e})}function is(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xi(Ni.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rs(e);throw new xi(Ni.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function ss(e,t){if(t<=0)throw new xi(Ni.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function as(e,t){const n={typeString:e};return t&&(n.value=t),n}function os(e,t){if(!ns(e))throw new xi(Ni.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new xi(Ni.INVALID_ARGUMENT,n);return!0}const ls=-62135596800,cs=1e6;class us{static now(){return us.fromMillis(Date.now())}static fromDate(e){return us.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*cs);return new us(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xi(Ni.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xi(Ni.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ls)throw new xi(Ni.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xi(Ni.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cs}_compareTo(e){return this.seconds===e.seconds?Vi(this.nanoseconds,e.nanoseconds):Vi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:us._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(os(e,us._jsonSchema))return new us(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ls;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}us._jsonSchemaVersion="firestore/timestamp/1.0",us._jsonSchema={type:as("string",us._jsonSchemaVersion),seconds:as("number"),nanoseconds:as("number")};class ds{static fromTimestamp(e){return new ds(e)}static min(){return new ds(new us(0,0))}static max(){return new ds(new us(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hs=-1;class fs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fs.UNKNOWN_ID=-1;function ps(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ds.fromTimestamp(1e9===r?new us(n+1,0):new us(n,r));return new gs(i,Xi.empty(),t)}function ms(e){return new gs(e.readTime,e.key,hs)}class gs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gs(ds.min(),Xi.empty(),hs)}static max(){return new gs(ds.max(),Xi.empty(),hs)}}function ys(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Xi.comparator(e.documentKey,t.documentKey),0!==n?n:Vi(e.largestBatchId,t.largestBatchId))}const vs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ws{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function bs(e){if(e.code!==Ni.FAILED_PRECONDITION||e.message!==vs)throw e;bi("LocalStore","Unexpectedly lost primary lease")}class Es{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ki(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Es((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Es?t:Es.resolve(t)}catch(e){return Es.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Es.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Es.reject(t)}static resolve(e){return new Es((t,n)=>{t(e)})}static reject(e){return new Es((t,n)=>{n(e)})}static waitFor(e){return new Es((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Es.resolve(!1);for(const n of e)t=t.next(e=>e?Es.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Es((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Es((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function _s(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ss(e){return"IndexedDbTransactionError"===e.name}class ks{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ks.ce=-1;const Is=-1;function Ts(e){return null==e}function Cs(e){return 0===e&&1/e==-1/0}function Ns(e){return"number"==typeof e&&Number.isInteger(e)&&!Cs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const xs="\x01";function As(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rs(t)),t=Ps(e.get(n),t);return Rs(t)}function Ps(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case xs:n+="\x01\x11";break;default:n+=t}}return n}function Rs(e){return e+xs+"\x01"}const Ds="remoteDocuments",Os="owner",Ls="mutationQueues",js="mutations";const Ms="documentMutations",Fs="remoteDocumentsV14",Us="remoteDocumentGlobal",zs="targets",Vs="targetDocuments",Bs="targetGlobal",$s="collectionParents",Hs="clientMetadata",qs="bundles",Ws="namedQueries",Ks="indexConfiguration",Gs="indexState",Qs="indexEntries",Ys="documentOverlays",Js="globals",Xs=[Ls,js,Ms,Ds,zs,Os,Bs,Vs,Hs,Us,$s,qs,Ws],Zs=[Ls,js,Ms,Fs,zs,Os,Bs,Vs,Hs,Us,$s,qs,Ws,Ys],ea=Zs,ta=[...ea,Ks,Gs,Qs];function na(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ra(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ia(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class sa{constructor(e,t){this.comparator=e,this.root=t||oa.EMPTY}insert(e,t){return new sa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oa.BLACK,null,null))}remove(e){return new sa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aa(this.root,e,this.comparator,!0)}}class aa{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oa{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:oa.RED,this.left=null!=r?r:oa.EMPTY,this.right=null!=i?i:oa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new oa(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return oa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return oa.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ki(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ki(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ki(27949);return e+(this.isRed()?0:1)}}oa.EMPTY=null,oa.RED=!0,oa.BLACK=!1,oa.EMPTY=new class{constructor(){this.size=0}get key(){throw ki(57766)}get value(){throw ki(16141)}get color(){throw ki(16727)}get left(){throw ki(29726)}get right(){throw ki(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new oa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class la{constructor(e){this.comparator=e,this.data=new sa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ca(this.data.getIterator())}getIteratorFrom(e){return new ca(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof la))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new la(this.comparator);return t.data=e,t}}class ca{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ua{constructor(e){this.fields=e,e.sort(Ji.comparator)}static empty(){return new ua([])}unionWith(e){let t=new la(Ji.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ua(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wi(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class da extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ha{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new da("Invalid base64 string: "+e):e}}(e);return new ha(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ha(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ha.EMPTY_BYTE_STRING=new ha("");const fa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pa(e){if(Ti(!!e,39018),"string"==typeof e){let t=0;const n=fa.exec(e);if(Ti(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ma(e.seconds),nanos:ma(e.nanos)}}function ma(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ga(e){return"string"==typeof e?ha.fromBase64String(e):ha.fromUint8Array(e)}const ya="server_timestamp",va="__type__",wa="__previous_value__",ba="__local_write_time__";function Ea(e){const t=(e?.mapValue?.fields||{})[va]?.stringValue;return t===ya}function _a(e){const t=e.mapValue.fields[wa];return Ea(t)?_a(t):t}function Sa(e){const t=pa(e.mapValue.fields[ba].timestampValue);return new us(t.seconds,t.nanos)}class ka{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Ia="(default)";class Ta{constructor(e,t){this.projectId=e,this.database=t||Ia}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database===Ia}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}const Ca="__type__",Na="__max__",xa={mapValue:{fields:{__type__:{stringValue:Na}}}},Aa="__vector__",Pa="value";function Ra(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ea(e)?4:Qa(e)?9007199254740991:Ka(e)?10:11:ki(28295,{value:e})}function Da(e,t){if(e===t)return!0;const n=Ra(e);if(n!==Ra(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sa(e).isEqual(Sa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pa(e.timestampValue),r=pa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ga(e.bytesValue).isEqual(ga(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ma(e.geoPointValue.latitude)===ma(t.geoPointValue.latitude)&&ma(e.geoPointValue.longitude)===ma(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ma(e.integerValue)===ma(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ma(e.doubleValue),r=ma(t.doubleValue);return n===r?Cs(n)===Cs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Wi(e.arrayValue.values||[],t.arrayValue.values||[],Da);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(na(n)!==na(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Da(n[i],r[i])))return!1;return!0}(e,t);default:return ki(52216,{left:e})}}function Oa(e,t){return void 0!==(e.values||[]).find(e=>Da(e,t))}function La(e,t){if(e===t)return 0;const n=Ra(e),r=Ra(t);if(n!==r)return Vi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ma(e.integerValue||e.doubleValue),r=ma(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ja(e.timestampValue,t.timestampValue);case 4:return ja(Sa(e),Sa(t));case 5:return Bi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ga(e),r=ga(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Vi(n[i],r[i]);if(0!==e)return e}return Vi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Vi(ma(e.latitude),ma(t.latitude));return 0!==n?n:Vi(ma(e.longitude),ma(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ma(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[Pa]?.arrayValue,s=r[Pa]?.arrayValue,a=Vi(i?.values?.length||0,s?.values?.length||0);return 0!==a?a:Ma(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===xa.mapValue&&t===xa.mapValue)return 0;if(e===xa.mapValue)return 1;if(t===xa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Bi(r[a],s[a]);if(0!==e)return e;const t=La(n[r[a]],i[s[a]]);if(0!==t)return t}return Vi(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ki(23264,{he:n})}}function ja(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vi(e,t);const n=pa(e),r=pa(t),i=Vi(n.seconds,r.seconds);return 0!==i?i:Vi(n.nanos,r.nanos)}function Ma(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=La(n[i],r[i]);if(e)return e}return Vi(n.length,r.length)}function Fa(e){return Ua(e)}function Ua(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pa(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ga(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Xi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ua(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ua(e.fields[i])}`;return n+"}"}(e.mapValue):ki(61005,{value:e})}function za(e){switch(Ra(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_a(e);return t?16+za(t):16;case 5:return 2*e.stringValue.length;case 6:return ga(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+za(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ra(e.fields,(e,n)=>{t+=e.length+za(n)}),t}(e.mapValue);default:throw ki(13486,{value:e})}}function Va(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ba(e){return!!e&&"integerValue"in e}function $a(e){return!!e&&"arrayValue"in e}function Ha(e){return!!e&&"nullValue"in e}function qa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wa(e){return!!e&&"mapValue"in e}function Ka(e){const t=(e?.mapValue?.fields||{})[Ca]?.stringValue;return t===Aa}function Ga(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ra(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ga(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ga(e.arrayValue.values[n]);return t}return{...e}}function Qa(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Na}class Ya{constructor(e){this.value=e}static empty(){return new Ya({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(t)}setAll(e){let t=Ji.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ga(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Wa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ra(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ya(Ga(this.value))}}function Ja(e){const t=[];return ra(e.fields,(e,n)=>{const r=new Ji([e]);if(Wa(n)){const e=Ja(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ua(t)}class Xa{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Xa(e,0,ds.min(),ds.min(),ds.min(),Ya.empty(),0)}static newFoundDocument(e,t,n,r){return new Xa(e,1,t,ds.min(),n,r,0)}static newNoDocument(e,t){return new Xa(e,2,t,ds.min(),ds.min(),Ya.empty(),0)}static newUnknownDocument(e,t){return new Xa(e,3,t,ds.min(),ds.min(),Ya.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ds.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ya.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ya.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ds.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Za{constructor(e,t){this.position=e,this.inclusive=t}}function eo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Xi.comparator(Xi.fromName(a.referenceValue),n.key):La(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function to(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Da(e.position[n],t.position[n]))return!1;return!0}class no{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ro(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class io{}class so extends io{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new po(e,t,n):"array-contains"===t?new vo(e,n):"in"===t?new wo(e,n):"not-in"===t?new bo(e,n):"array-contains-any"===t?new Eo(e,n):new so(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new mo(e,n):new go(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(La(t,this.value)):null!==t&&Ra(this.value)===Ra(t)&&this.matchesComparison(La(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ki(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ao extends io{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ao(e,t)}matches(e){return oo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oo(e){return"and"===e.op}function lo(e){return co(e)&&oo(e)}function co(e){for(const t of e.filters)if(t instanceof ao)return!1;return!0}function uo(e){if(e instanceof so)return e.field.canonicalString()+e.op.toString()+Fa(e.value);if(lo(e))return e.filters.map(e=>uo(e)).join(",");{const t=e.filters.map(e=>uo(e)).join(",");return`${e.op}(${t})`}}function ho(e,t){return e instanceof so?function(e,t){return t instanceof so&&e.op===t.op&&e.field.isEqual(t.field)&&Da(e.value,t.value)}(e,t):e instanceof ao?function(e,t){return t instanceof ao&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ho(n,t.filters[r]),!0)}(e,t):void ki(19439)}function fo(e){return e instanceof so?function(e){return`${e.field.canonicalString()} ${e.op} ${Fa(e.value)}`}(e):e instanceof ao?function(e){return e.op.toString()+" {"+e.getFilters().map(fo).join(" ,")+"}"}(e):"Filter"}class po extends so{constructor(e,t,n){super(e,t,n),this.key=Xi.fromName(n.referenceValue)}matches(e){const t=Xi.comparator(e.key,this.key);return this.matchesComparison(t)}}class mo extends so{constructor(e,t){super(e,"in",t),this.keys=yo("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class go extends so{constructor(e,t){super(e,"not-in",t),this.keys=yo("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yo(e,t){return(t.arrayValue?.values||[]).map(e=>Xi.fromName(e.referenceValue))}class vo extends so{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $a(t)&&Oa(t.arrayValue,this.value)}}class wo extends so{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Oa(this.value.arrayValue,t)}}class bo extends so{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Oa(this.value.arrayValue,t)}}class Eo extends so{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$a(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Oa(this.value.arrayValue,e))}}class _o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function So(e){return new _o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ko(e){const t=Ci(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>uo(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ts(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Fa(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Fa(e)).join(",")),t.Te=e}return t.Te}function Io(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ro(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ho(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!to(e.startAt,t.startAt)&&to(e.endAt,t.endAt)}function To(e){return Xi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Co{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function No(e,t,n,r,i,s,a,o){return new Co(e,t,n,r,i,s,a,o)}function xo(e){return new Co(e)}function Ao(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Po(e){return null!==e.collectionGroup}function Ro(e){const t=Ci(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new la(Ji.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new no(r,n))}),e.has(Ji.keyField().canonicalString())||t.Ie.push(new no(Ji.keyField(),n))}return t.Ie}function Do(e){const t=Ci(e);return t.Ee||(t.Ee=Oo(t,Ro(e))),t.Ee}function Oo(e,t){if("F"===e.limitType)return So(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new no(e.field,t)});const n=e.endAt?new Za(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Za(e.startAt.position,e.startAt.inclusive):null;return So(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Lo(e,t){const n=e.filters.concat([t]);return new Co(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jo(e,t,n){return new Co(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mo(e,t){return Io(Do(e),Do(t))&&e.limitType===t.limitType}function Fo(e){return`${ko(Do(e))}|lt:${e.limitType}`}function Uo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>fo(e)).join(", ")}]`),Ts(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Fa(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Fa(e)).join(",")),`Target(${t})`}(Do(e))}; limitType=${e.limitType})`}function zo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ro(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=eo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ro(e),t))&&!(e.endAt&&!function(e,t,n){const r=eo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ro(e),t))}(e,t)}function Vo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bo(e){return(t,n)=>{let r=!1;for(const i of Ro(e)){const e=$o(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function $o(e,t,n){const r=e.field.isKeyField()?Xi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?La(r,i):ki(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ki(19790,{direction:e.dir})}}class Ho{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ia(this.inner)}size(){return this.innerSize}}const qo=new sa(Xi.comparator);function Wo(){return qo}const Ko=new sa(Xi.comparator);function Go(){let e=Ko;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Qo(e){let t=Ko;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Yo(){return Xo()}function Jo(){return Xo()}function Xo(){return new Ho(e=>e.toString(),(e,t)=>e.isEqual(t))}const Zo=new sa(Xi.comparator),el=new la(Xi.comparator);function tl(){let e=el;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const nl=new la(Vi);function rl(){return nl}function il(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cs(t)?"-0":t}}function sl(e){return{integerValue:""+e}}function al(e,t){return Ns(t)?sl(t):il(e,t)}class ol{constructor(){this._=void 0}}function ll(e,t,n){return e instanceof dl?function(e,t){const n={fields:{[va]:{stringValue:ya},[ba]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ea(t)&&(t=_a(t)),t&&(n.fields[wa]=t),{mapValue:n}}(n,t):e instanceof hl?fl(e,t):e instanceof pl?ml(e,t):function(e,t){const n=ul(e,t),r=yl(n)+yl(e.Ae);return Ba(n)&&Ba(e.Ae)?sl(r):il(e.serializer,r)}(e,t)}function cl(e,t,n){return e instanceof hl?fl(e,t):e instanceof pl?ml(e,t):n}function ul(e,t){return e instanceof gl?function(e){return Ba(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class dl extends ol{}class hl extends ol{constructor(e){super(),this.elements=e}}function fl(e,t){const n=vl(t);for(const r of e.elements)n.some(e=>Da(e,r))||n.push(r);return{arrayValue:{values:n}}}class pl extends ol{constructor(e){super(),this.elements=e}}function ml(e,t){let n=vl(t);for(const r of e.elements)n=n.filter(e=>!Da(e,r));return{arrayValue:{values:n}}}class gl extends ol{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yl(e){return ma(e.integerValue||e.doubleValue)}function vl(e){return $a(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wl{constructor(e,t){this.field=e,this.transform=t}}class bl{constructor(e,t){this.version=e,this.transformResults=t}}class El{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new El}static exists(e){return new El(void 0,e)}static updateTime(e){return new El(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Sl{}function kl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ol(e.key,El.none()):new xl(e.key,e.data,El.none());{const n=e.data,r=Ya.empty();let i=new la(Ji.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Al(e.key,r,new ua(i.toArray()),El.none())}}function Il(e,t,n){e instanceof xl?function(e,t,n){const r=e.value.clone(),i=Rl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Al?function(e,t,n){if(!_l(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Rl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Pl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Tl(e,t,n,r){return e instanceof xl?function(e,t,n,r){if(!_l(e.precondition,t))return n;const i=e.value.clone(),s=Dl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Al?function(e,t,n,r){if(!_l(e.precondition,t))return n;const i=Dl(e.fieldTransforms,r,t),s=t.data;return s.setAll(Pl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return _l(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Cl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ul(r.transform,e||null);null!=i&&(null===n&&(n=Ya.empty()),n.set(r.field,i))}return n||null}function Nl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Wi(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof hl&&t instanceof hl||e instanceof pl&&t instanceof pl?Wi(e.elements,t.elements,Da):e instanceof gl&&t instanceof gl?Da(e.Ae,t.Ae):e instanceof dl&&t instanceof dl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xl extends Sl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Al extends Sl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pl(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Rl(e,t,n){const r=new Map;Ti(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,cl(a,o,n[i]))}return r}function Dl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ll(e,s,t))}return r}class Ol extends Sl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ll extends Sl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Il(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Tl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Tl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Jo();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=kl(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ds.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tl())}isEqual(e){return this.batchId===e.batchId&&Wi(this.mutations,e.mutations,(e,t)=>Nl(e,t))&&Wi(this.baseMutations,e.baseMutations,(e,t)=>Nl(e,t))}}class Ml{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ti(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Zo;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ml(e,t,n,r)}}class Fl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ul{constructor(e,t){this.count=e,this.unchangedNames=t}}var zl,Vl;function Bl(e){switch(e){case Ni.OK:return ki(64938);case Ni.CANCELLED:case Ni.UNKNOWN:case Ni.DEADLINE_EXCEEDED:case Ni.RESOURCE_EXHAUSTED:case Ni.INTERNAL:case Ni.UNAVAILABLE:case Ni.UNAUTHENTICATED:return!1;case Ni.INVALID_ARGUMENT:case Ni.NOT_FOUND:case Ni.ALREADY_EXISTS:case Ni.PERMISSION_DENIED:case Ni.FAILED_PRECONDITION:case Ni.ABORTED:case Ni.OUT_OF_RANGE:case Ni.UNIMPLEMENTED:case Ni.DATA_LOSS:return!0;default:return ki(15467,{code:e})}}function $l(e){if(void 0===e)return Ei("GRPC error has no .code"),Ni.UNKNOWN;switch(e){case zl.OK:return Ni.OK;case zl.CANCELLED:return Ni.CANCELLED;case zl.UNKNOWN:return Ni.UNKNOWN;case zl.DEADLINE_EXCEEDED:return Ni.DEADLINE_EXCEEDED;case zl.RESOURCE_EXHAUSTED:return Ni.RESOURCE_EXHAUSTED;case zl.INTERNAL:return Ni.INTERNAL;case zl.UNAVAILABLE:return Ni.UNAVAILABLE;case zl.UNAUTHENTICATED:return Ni.UNAUTHENTICATED;case zl.INVALID_ARGUMENT:return Ni.INVALID_ARGUMENT;case zl.NOT_FOUND:return Ni.NOT_FOUND;case zl.ALREADY_EXISTS:return Ni.ALREADY_EXISTS;case zl.PERMISSION_DENIED:return Ni.PERMISSION_DENIED;case zl.FAILED_PRECONDITION:return Ni.FAILED_PRECONDITION;case zl.ABORTED:return Ni.ABORTED;case zl.OUT_OF_RANGE:return Ni.OUT_OF_RANGE;case zl.UNIMPLEMENTED:return Ni.UNIMPLEMENTED;case zl.DATA_LOSS:return Ni.DATA_LOSS;default:return ki(39323,{code:e})}}(Vl=zl||(zl={}))[Vl.OK=0]="OK",Vl[Vl.CANCELLED=1]="CANCELLED",Vl[Vl.UNKNOWN=2]="UNKNOWN",Vl[Vl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vl[Vl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vl[Vl.NOT_FOUND=5]="NOT_FOUND",Vl[Vl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vl[Vl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vl[Vl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vl[Vl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vl[Vl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vl[Vl.ABORTED=10]="ABORTED",Vl[Vl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vl[Vl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vl[Vl.INTERNAL=13]="INTERNAL",Vl[Vl.UNAVAILABLE=14]="UNAVAILABLE",Vl[Vl.DATA_LOSS=15]="DATA_LOSS";let Hl=null;function ql(){return new TextEncoder}const Wl=new ei([4294967295,4294967295],0);function Kl(e){const t=ql().encode(e),n=new ti;return n.update(t),new Uint8Array(n.digest())}function Gl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ei([n,r],0),new ei([i,s],0)]}class Ql{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Yl(`Invalid padding: ${t}`);if(n<0)throw new Yl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Yl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Yl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ei.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ei.fromNumber(n)));return 1===r.compare(Wl)&&(r=new ei([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Kl(e),[n,r]=Gl(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ql(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Kl(e),[n,r]=Gl(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Jl(ds.min(),r,new sa(Vi),Wo(),tl())}}class Xl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xl(n,t,tl(),tl(),tl())}}class Zl{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ec{constructor(e,t){this.targetId=e,this.Ce=t}}class tc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ha.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class nc{constructor(){this.ve=0,this.Fe=sc(),this.Me=ha.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tl(),t=tl(),n=tl();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ki(38017,{changeType:i})}}),new Xl(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=sc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ti(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wo(),this.Je=ic(),this.He=ic(),this.Ye=new sa(Vi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ki(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(To(i))if(0===n){const e=new Xi(i.path);this.et(t,e,Xa.newNoDocument(e,ds.min()))}else Ti(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}Hl?.lt(function(e,t,n,r,i){const s={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},a=t.unchangedNames;return a&&(s.bloomFilter={applied:0===i,hashCount:a?.hashCount??0,bitmapLength:a?.bits?.bitmap?.length??0,padding:a?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),s}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=ga(n).toUint8Array()}catch(e){if(e instanceof da)return _i("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ql(s,r,i)}catch(e){return _i(e instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&To(i.target)){const t=new Xi(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Xa.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=tl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Jl(e,t,this.Ye,this.je,n);return this.je=Wo(),this.Je=ic(),this.He=ic(),this.Ye=new sa(Vi),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new la(Vi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new la(Vi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||bi("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ic(){return new sa(Xi.comparator)}function sc(){return new sa(Xi.comparator)}const ac={asc:"ASCENDING",desc:"DESCENDING"},oc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lc={and:"AND",or:"OR"};class cc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uc(e,t){return e.useProto3Json||Ts(t)?t:{value:t}}function dc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fc(e,t){return dc(e,t.toTimestamp())}function pc(e){return Ti(!!e,49232),ds.fromTimestamp(function(e){const t=pa(e);return new us(t.seconds,t.nanos)}(e))}function mc(e,t){return gc(e,t).canonicalString()}function gc(e,t){const n=function(e){return new Qi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function yc(e){const t=Qi.fromString(e);return Ti(Mc(t),10190,{key:t.toString()}),t}function vc(e,t){return mc(e.databaseId,t.path)}function wc(e,t){const n=yc(t);if(n.get(1)!==e.databaseId.projectId)throw new xi(Ni.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xi(Ni.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xi(Sc(n))}function bc(e,t){return mc(e.databaseId,t)}function Ec(e){const t=yc(e);return 4===t.length?Qi.emptyPath():Sc(t)}function _c(e){return new Qi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sc(e){return Ti(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function kc(e,t,n){return{name:vc(e,t),fields:n.value.mapValue.fields}}function Ic(e,t){let n;if(t instanceof xl)n={update:kc(e,t.key,t.value)};else if(t instanceof Ol)n={delete:vc(e,t.key)};else if(t instanceof Al)n={update:kc(e,t.key,t.data),updateMask:jc(t.fieldMask)};else{if(!(t instanceof Ll))return ki(16599,{Vt:t.type});n={verify:vc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof dl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ki(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ki(27497)}(e,t.precondition)),n}function Tc(e,t){return{documents:[bc(e,t.path)]}}function Cc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bc(e,i);const s=function(e){if(0!==e.length)return Lc(ao.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Dc(e.field),direction:Ac(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=uc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Nc(e){let t=Ec(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ti(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=xc(e);return t instanceof ao&&lo(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new no(Oc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ts(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Za(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Za(n,t)}(n.endAt)),No(t,i,a,s,o,"F",l,c)}function xc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Oc(e.unaryFilter.field);return so.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Oc(e.unaryFilter.field);return so.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Oc(e.unaryFilter.field);return so.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Oc(e.unaryFilter.field);return so.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ki(61313);default:return ki(60726)}}(e):void 0!==e.fieldFilter?function(e){return so.create(Oc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ki(58110);default:return ki(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ao.create(e.compositeFilter.filters.map(e=>xc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ki(1026)}}(e.compositeFilter.op))}(e):ki(30097,{filter:e})}function Ac(e){return ac[e]}function Pc(e){return oc[e]}function Rc(e){return lc[e]}function Dc(e){return{fieldPath:e.canonicalString()}}function Oc(e){return Ji.fromServerFormat(e.fieldPath)}function Lc(e){return e instanceof so?function(e){if("=="===e.op){if(qa(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NAN"}};if(Ha(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qa(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NOT_NAN"}};if(Ha(e.value))return{unaryFilter:{field:Dc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(e.field),op:Pc(e.op),value:e.value}}}(e):e instanceof ao?function(e){const t=e.getFilters().map(e=>Lc(e));return 1===t.length?t[0]:{compositeFilter:{op:Rc(e.op),filters:t}}}(e):ki(54877,{filter:e})}function jc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Mc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Fc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ds.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ds.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ha.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Uc{constructor(e){this.yt=e}}function zc(e){const t=Nc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jo(t,t.limit,"L"):t}class Vc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ma(e.integerValue));else if("doubleValue"in e){const n=ma(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Cs(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=pa(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ga(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Qa(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ka(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ki(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Pa,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ma(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Xi.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Vc.Kt=new Vc;class Bc{constructor(){this.Cn=new $c}addToCollectionParentIndex(e,t){return this.Cn.add(t),Es.resolve()}getCollectionParents(e,t){return Es.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Es.resolve()}deleteFieldIndex(e,t){return Es.resolve()}deleteAllFieldIndexes(e){return Es.resolve()}createTargetIndexes(e,t){return Es.resolve()}getDocumentsMatchingTarget(e,t){return Es.resolve(null)}getIndexType(e,t){return Es.resolve(0)}getFieldIndexes(e,t){return Es.resolve([])}getNextCollectionGroupToUpdate(e){return Es.resolve(null)}getMinOffset(e,t){return Es.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return Es.resolve(gs.min())}updateCollectionGroup(e,t,n){return Es.resolve()}updateIndexEntries(e,t){return Es.resolve()}}class $c{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new la(Qi.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new la(Qi.comparator)).toArray()}}new Uint8Array(0);const Hc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qc=41943040;class Wc{static withCacheSize(e){return new Wc(e,Wc.DEFAULT_COLLECTION_PERCENTILE,Wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Wc.DEFAULT_COLLECTION_PERCENTILE=10,Wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wc.DEFAULT=new Wc(qc,Wc.DEFAULT_COLLECTION_PERCENTILE,Wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wc.DISABLED=new Wc(-1,0,0);class Kc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Kc(0)}static cr(){return new Kc(-1)}}const Gc="LruGarbageCollector",Qc=1048576;function Yc(e,t){let[n,r]=e,[i,s]=t;const a=Vi(n,i);return 0===a?Vi(r,s):a}class Jc{constructor(e){this.Ir=e,this.buffer=new la(Yc),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Yc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xc{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){bi(Gc,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ss(e)?bi(Gc,"Ignoring IndexedDB error during garbage collection: ",e):await bs(e)}await this.Vr(3e5)})}}class Zc{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Es.resolve(ks.ce);const n=new Jc(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(bi("LruGarbageCollector","Garbage collection skipped; disabled"),Es.resolve(Hc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(bi("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hc):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(bi("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),wi()<=xn.DEBUG&&bi("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),Es.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function eu(e,t){return new Zc(e,t)}class tu{constructor(){this.changes=new Ho(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Es.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ru{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Tl(n.mutation,e,ua.empty(),us.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,tl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tl();const r=Yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Go();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Yo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,tl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Wo();const s=Xo(),a=Xo();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Al)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Tl(a.mutation,t,a.mutation.getFieldMask(),us.now())):s.set(t.key,ua.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>a.set(e,new nu(t,s.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const n=Xo();let r=new sa((e,t)=>e-t),i=tl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||ua.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||tl()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Jo();l.forEach(e=>{if(!i.has(e)){const r=kl(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Es.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Xi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Po(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Es.resolve(Yo());let a=hs,o=i;return s.next(t=>Es.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Es.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,tl())).next(e=>({batchId:a,changes:Qo(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xi(t)).next(e=>{let t=Go();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Go();return this.indexManager.getCollectionParents(e,i).next(a=>Es.forEach(a,a=>{const o=function(e,t){return new Co(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xa.newInvalidDocument(r)))});let n=Go();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Tl(s.mutation,r,ua.empty(),us.now()),zo(t,r)&&(n=n.insert(e,r))}),n})}}class iu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Es.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:pc(e.createTime)}}(t)),Es.resolve()}getNamedQuery(e,t){return Es.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:zc(e.bundledQuery),readTime:pc(e.readTime)}}(t)),Es.resolve()}}class su{constructor(){this.overlays=new sa(Xi.comparator),this.qr=new Map}getOverlay(e,t){return Es.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Yo();return Es.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Es.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Es.resolve()}getOverlaysForCollection(e,t,n){const r=Yo(),i=t.length+1,s=new Xi(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Es.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new sa((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Yo(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Yo(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Es.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fl(t,n));let i=this.qr.get(t);void 0===i&&(i=tl(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class au{constructor(){this.sessionToken=ha.EMPTY_BYTE_STRING}getSessionToken(e){return Es.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Es.resolve()}}class ou{constructor(){this.Qr=new la(lu.$r),this.Ur=new la(lu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new lu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new lu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Xi(new Qi([])),n=new lu(t,e),r=new lu(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Xi(new Qi([])),n=new lu(t,e),r=new lu(t,e+1);let i=tl();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new lu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class lu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Xi.comparator(e.key,t.key)||Vi(e.Yr,t.Yr)}static Kr(e,t){return Vi(e.Yr,t.Yr)||Xi.comparator(e.key,t.key)}}class cu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new la(lu.$r)}checkEmpty(e){return Es.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new jl(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new lu(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Es.resolve(s)}lookupMutationBatch(e,t){return Es.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Es.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Es.resolve(0===this.mutationQueue.length?Is:this.tr-1)}getAllMutationBatches(e){return Es.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new lu(t,0),r=new lu(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Es.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new la(Vi);return t.forEach(e=>{const t=new lu(e,0),r=new lu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Es.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Xi.isDocumentKey(i)||(i=i.child(""));const s=new lu(new Xi(i),0);let a=new la(Vi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Es.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ti(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Es.forEach(t.mutations,r=>{const i=new lu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new lu(t,0),r=this.Zr.firstAfterOrEqual(n);return Es.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Es.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uu{constructor(e){this.ri=e,this.docs=new sa(Xi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Es.resolve(n?n.document.mutableCopy():Xa.newInvalidDocument(t))}getEntries(e,t){let n=Wo();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xa.newInvalidDocument(e))}),Es.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Wo();const s=t.path,a=new Xi(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ys(ms(a),n)<=0||(r.has(a.key)||zo(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Es.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ki(9500)}ii(e,t){return Es.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new du(this)}getSize(e){return Es.resolve(this.size)}}class du extends tu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Es.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class hu{constructor(e){this.persistence=e,this.si=new Ho(e=>ko(e),Io),this.lastRemoteSnapshotVersion=ds.min(),this.highestTargetId=0,this.oi=0,this._i=new ou,this.targetCount=0,this.ai=Kc.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Es.resolve()}getLastRemoteSnapshotVersion(e){return Es.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Es.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Es.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Es.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Es.resolve()}updateTargetData(e,t){return this.Pr(t),Es.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Es.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Es.waitFor(i).next(()=>r)}getTargetCount(e){return Es.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Es.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Es.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Es.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Es.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Es.resolve(n)}containsKey(e,t){return Es.resolve(this._i.containsKey(t))}}class fu{constructor(e,t){this.ui={},this.overlays={},this.ci=new ks(0),this.li=!1,this.li=!0,this.hi=new au,this.referenceDelegate=e(this),this.Pi=new hu(this),this.indexManager=new Bc,this.remoteDocumentCache=function(e){return new uu(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Uc(t),this.Ii=new iu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new su,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new cu(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){bi("MemoryPersistence","Starting transaction:",e);const r=new pu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Es.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class pu extends ws{constructor(e){super(),this.currentSequenceNumber=e}}class mu{constructor(e){this.persistence=e,this.Ri=new ou,this.Vi=null}static mi(e){return new mu(e)}get fi(){if(this.Vi)return this.Vi;throw ki(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Es.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Es.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Es.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Es.forEach(this.fi,n=>{const r=Xi.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ds.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Es.or([()=>Es.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gu{constructor(e,t){this.persistence=e,this.pi=new Ho(e=>As(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=eu(this,t)}static mi(e,t){return new gu(e,t)}Ei(){}di(e){return Es.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Es.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Es.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ds.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Es.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Es.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Es.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Es.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=za(e.data.value)),t}br(e,t,n){return Es.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Es.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class yu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=tl(),r=tl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new yu(e,t.fromCache,n,r)}}class vu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wu{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=ln()?8:_s(sn())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new vu;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(wi()<=xn.DEBUG&&bi("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Es.resolve()):(wi()<=xn.DEBUG&&bi("QueryEngine","Query:",Uo(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(wi()<=xn.DEBUG&&bi("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Do(t))):Es.resolve())}ys(e,t){if(Ao(t))return Es.resolve(null);let n=Do(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=jo(t,null,"F"),n=Do(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=tl(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,jo(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Ao(t)||r.isEqual(ds.min())?Es.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Es.resolve(null):(wi()<=xn.DEBUG&&bi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Uo(t)),this.vs(e,s,t,ps(r,hs)).next(e=>e))})}Ds(e,t){let n=new la(Bo(e));return t.forEach((t,r)=>{zo(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return wi()<=xn.DEBUG&&bi("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.ps.getDocumentsMatchingQuery(e,t,gs.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const bu="LocalStore";class Eu{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new sa(Vi),this.xs=new Ho(e=>ko(e),Io),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ru(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _u(e,t,n,r){return new Eu(e,t,n,r)}async function Su(e,t){const n=Ci(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=tl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function ku(e){const t=Ci(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Iu(e,t,n){let r=tl(),i=tl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Wo();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ds.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):bi(bu,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Tu(e,t){const n=Ci(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Is),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Cu(e,t){const n=Ci(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Es.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Fc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Nu(e,t,n){const r=Ci(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ss(e))throw e;bi(bu,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function xu(e,t,n){const r=Ci(e);let i=ds.min(),s=tl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ci(e),i=r.xs.get(n);return void 0!==i?Es.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Do(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ds.min(),n?s:tl())).next(e=>(Au(r,Vo(t),e),{documents:e,Qs:s})))}function Au(e,t,n){let r=e.Os.get(t)||ds.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Pu{constructor(){this.activeTargetIds=rl()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ru{constructor(){this.Mo=new Pu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Du{Oo(e){}shutdown(){}}const Ou="ConnectivityMonitor";class Lu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){bi(Ou,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){bi(Ou,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ju=null;function Mu(){return null===ju?ju=268435456+Math.round(2147483648*Math.random()):ju++,"0x"+ju.toString(16)}const Fu="RestConnection",Uu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zu{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Ia?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=Mu(),a=this.zo(e,t.toUriEncodedString());bi(Fu,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=Zt(l);return this.Jo(e,a,o,n,c).then(t=>(bi(Fu,`Received RPC '${e}' ${s}: `,t),t),t=>{throw _i(Fu,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+yi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Uu[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Vu{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Bu="WebChannelConnection";class $u extends zu{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Mu();return new Promise((i,a)=>{const o=new ii;o.setWithCredentials(!0),o.listenOnce(ai.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case oi.NO_ERROR:const t=o.getResponseJson();bi(Bu,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case oi.TIMEOUT:bi(Bu,`RPC '${e}' ${s} timed out`),a(new xi(Ni.DEADLINE_EXCEEDED,"Request time out"));break;case oi.HTTP_ERROR:const n=o.getStatus();if(bi(Bu,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ni).indexOf(t)>=0?t:Ni.UNKNOWN}(t.status);a(new xi(e,t.message))}else a(new xi(Ni.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new xi(Ni.UNAVAILABLE,"Connection failed."));break;default:ki(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{bi(Bu,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);bi(Bu,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Mu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=di(),a=ui(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");bi(Bu,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new Vu({Yo:t=>{h?bi(Bu,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(bi(Bu,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),bi(Bu,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,si.EventType.OPEN,()=>{h||(bi(Bu,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(u,si.EventType.CLOSE,()=>{h||(h=!0,bi(Bu,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(u))}),p(u,si.EventType.ERROR,t=>{h||(h=!0,_i(Bu,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new xi(Ni.UNAVAILABLE,"The operation could not be completed")))}),p(u,si.EventType.MESSAGE,t=>{if(!h){const n=t.data[0];Ti(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){bi(Bu,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=zl[e];if(void 0!==t)return $l(t)}(t),i=s.message;void 0===n&&(n=Ni.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.a_(new xi(n,i)),u.close()}else bi(Bu,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(a,ci.STAT_EVENT,t=>{t.stat===li.PROXY?bi(Bu,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===li.NOPROXY&&bi(Bu,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Hu(){return"undefined"!=typeof document?document:null}function qu(e){return new cc(e,!0)}class Wu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&bi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ku="PersistentStream";class Gu{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wu(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Ni.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ni.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new xi(Ni.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return bi(Ku,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(bi(Ku,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qu extends Gu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ki(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ti(void 0===t||"string"==typeof t,58123),ha.fromBase64String(t||"")):(Ti(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ha.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Ni.UNKNOWN:$l(e.code);return new xi(t,e.message||"")}(a);n=new tc(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=wc(e,r.document.name),s=pc(r.document.updateTime),a=r.document.createTime?pc(r.document.createTime):ds.min(),o=new Ya({mapValue:{fields:r.document.fields}}),l=Xa.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Zl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=wc(e,r.document),s=r.readTime?pc(r.readTime):ds.min(),a=Xa.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Zl([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=wc(e,r.document),s=r.removedTargetIds||[];n=new Zl([],s,i,null)}else{if(!("filter"in t))return ki(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ul(r,i),a=e.targetId;n=new ec(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ds.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ds.min():t.readTime?pc(t.readTime):ds.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=_c(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=To(r)?{documents:Tc(e,r)}:{query:Cc(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=hc(e,t.resumeToken);const r=uc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ds.min())>0){n.readTime=dc(e,t.snapshotVersion.toTimestamp());const r=uc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ki(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=_c(this.serializer),t.removeTarget=e,this.q_(t)}}class Yu extends Gu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ti(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ti(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ti(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ti(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?pc(e.updateTime):pc(t);return n.isEqual(ds.min())&&(n=pc(t)),new bl(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=pc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=_c(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ic(this.serializer,e))};this.q_(t)}}class Ju{}class Xu extends Ju{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new xi(Ni.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,gc(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ni.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xi(Ni.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,gc(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ni.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xi(Ni.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Zu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ei(t),this.aa=!1):bi("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ed="RemoteStore";class td{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{ud(this)&&(bi(ed,"Restarting streams for network reachability change."),await async function(e){const t=Ci(e);t.Ea.add(4),await rd(t),t.Ra.set("Unknown"),t.Ea.delete(4),await nd(t)}(this))})}),this.Ra=new Zu(n,r)}}async function nd(e){if(ud(e))for(const t of e.da)await t(!0)}async function rd(e){for(const t of e.da)await t(!1)}function id(e,t){const n=Ci(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),cd(n)?ld(n):xd(n).O_()&&ad(n,t))}function sd(e,t){const n=Ci(e),r=xd(n);n.Ia.delete(t),r.O_()&&od(n,t),0===n.Ia.size&&(r.O_()?r.L_():ud(n)&&n.Ra.set("Unknown"))}function ad(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ds.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xd(e).Y_(t)}function od(e,t){e.Va.Ue(t),xd(e).Z_(t)}function ld(e){e.Va=new rc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),xd(e).start(),e.Ra.ua()}function cd(e){return ud(e)&&!xd(e).x_()&&e.Ia.size>0}function ud(e){return 0===Ci(e).Ea.size}function dd(e){e.Va=void 0}async function hd(e){e.Ra.set("Online")}async function fd(e){e.Ia.forEach((t,n)=>{ad(e,t)})}async function pd(e,t){dd(e),cd(e)?(e.Ra.ha(t),ld(e)):e.Ra.set("Unknown")}async function md(e,t,n){if(e.Ra.set("Online"),t instanceof tc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){bi(ed,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await gd(e,n)}else if(t instanceof Zl?e.Va.Ze(t):t instanceof ec?e.Va.st(t):e.Va.tt(t),!n.isEqual(ds.min()))try{const t=await ku(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ha.EMPTY_BYTE_STRING,r.snapshotVersion)),od(e,t);const i=new Fc(r.target,t,n,r.sequenceNumber);ad(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){bi(ed,"Failed to raise snapshot:",t),await gd(e,t)}}async function gd(e,t,n){if(!Ss(t))throw t;e.Ea.add(1),await rd(e),e.Ra.set("Offline"),n||(n=()=>ku(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{bi(ed,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await nd(e)})}function yd(e,t){return t().catch(n=>gd(e,n,t))}async function vd(e){const t=Ci(e),n=Ad(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Is;for(;wd(t);)try{const e=await Tu(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,bd(t,e)}catch(e){await gd(t,e)}Ed(t)&&_d(t)}function wd(e){return ud(e)&&e.Ta.length<10}function bd(e,t){e.Ta.push(t);const n=Ad(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ed(e){return ud(e)&&!Ad(e).x_()&&e.Ta.length>0}function _d(e){Ad(e).start()}async function Sd(e){Ad(e).ra()}async function kd(e){const t=Ad(e);for(const n of e.Ta)t.ea(n.mutations)}async function Id(e,t,n){const r=e.Ta.shift(),i=Ml.from(r,t,n);await yd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await vd(e)}async function Td(e,t){t&&Ad(e).X_&&await async function(e,t){if(function(e){return Bl(e)&&e!==Ni.ABORTED}(t.code)){const n=e.Ta.shift();Ad(e).B_(),await yd(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await vd(e)}}(e,t),Ed(e)&&_d(e)}async function Cd(e,t){const n=Ci(e);n.asyncQueue.verifyOperationInProgress(),bi(ed,"RemoteStore received new credentials");const r=ud(n);n.Ea.add(3),await rd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await nd(n)}async function Nd(e,t){const n=Ci(e);t?(n.Ea.delete(2),await nd(n)):t||(n.Ea.add(2),await rd(n),n.Ra.set("Unknown"))}function xd(e){return e.ma||(e.ma=function(e,t,n){const r=Ci(e);return r.sa(),new Qu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:hd.bind(null,e),t_:fd.bind(null,e),r_:pd.bind(null,e),H_:md.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),cd(e)?ld(e):e.Ra.set("Unknown")):(await e.ma.stop(),dd(e))})),e.ma}function Ad(e){return e.fa||(e.fa=function(e,t,n){const r=Ci(e);return r.sa(),new Yu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Sd.bind(null,e),r_:Td.bind(null,e),ta:kd.bind(null,e),na:Id.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await vd(e)):(await e.fa.stop(),e.Ta.length>0&&(bi(ed,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class Pd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Pd(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xi(Ni.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rd(e,t){if(Ei("AsyncQueue",`${t}: ${e}`),Ss(e))return new xi(Ni.UNAVAILABLE,`${t}: ${e}`);throw e}class Dd{static emptySet(e){return new Dd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Xi.comparator(t.key,n.key):(e,t)=>Xi.comparator(e.key,t.key),this.keyedMap=Go(),this.sortedSet=new sa(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Dd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Od{constructor(){this.ga=new sa(Xi.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ki(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ld{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ld(e,t,Dd.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class jd{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Md{constructor(){this.queries=Fd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Ci(e),r=n.queries;n.queries=Fd(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new xi(Ni.ABORTED,"Firestore shutting down"))}}function Fd(){return new Ho(e=>Fo(e),Mo)}async function Ud(e,t){const n=Ci(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new jd,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Rd(e,`Initialization of query '${Uo(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&$d(n)}async function zd(e,t){const n=Ci(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Vd(e,t){const n=Ci(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&$d(n)}function Bd(e,t,n){const r=Ci(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function $d(e){e.Ca.forEach(e=>{e.next()})}var Hd,qd;(qd=Hd||(Hd={})).Ma="default",qd.Cache="cache";class Wd{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ld(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hd.Cache}}class Kd{constructor(e){this.key=e}}class Gd{constructor(e){this.key=e}}class Qd{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tl(),this.mutatedKeys=tl(),this.eu=Bo(e),this.tu=new Dd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Od,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=zo(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ki(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new Ld(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Od,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Gd(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Kd(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=tl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ld.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Yd="SyncEngine";class Jd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Xd{constructor(e){this.key=e,this.hu=!1}}class Zd{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ho(e=>Fo(e),Mo),this.Iu=new Map,this.Eu=new Set,this.du=new sa(Xi.comparator),this.Au=new Map,this.Ru=new ou,this.Vu={},this.mu=new Map,this.fu=Kc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function eh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Eh(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await nh(r,t,n,!0),i}async function th(e,t){const n=Eh(e);await nh(n,t,!0,!1)}async function nh(e,t,n,r){const i=await Cu(e.localStore,Do(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await rh(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&id(e.remoteStore,i),o}async function rh(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await xu(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return mh(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await xu(e.localStore,t,!0),a=new Qd(t,s.Qs),o=a.ru(s.documents),l=Xl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);mh(e,n,c.au);const u=new Jd(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ih(e,t,n){const r=Ci(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Mo(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sd(r.remoteStore,i.targetId),fh(r,i.targetId)}).catch(bs)):(fh(r,i.targetId),await Nu(r.localStore,i.targetId,!0))}async function sh(e,t){const n=Ci(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sd(n.remoteStore,r.targetId))}async function ah(e,t){const n=Ci(e);try{const e=await function(e,t){const n=Ci(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ha.EMPTY_BYTE_STRING,ds.min()).withLastLimboFreeSnapshotVersion(ds.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=Wo(),l=tl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Iu(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(ds.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Es.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ti(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ti(r.hu,14607):e.removedDocuments.size>0&&(Ti(r.hu,42227),r.hu=!1))}),await vh(n,e,t)}catch(e){await bs(e)}}function oh(e,t,n){const r=Ci(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ci(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&$d(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function lh(e,t,n){const r=Ci(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new sa(Xi.comparator);e=e.insert(s,Xa.newNoDocument(s,ds.min()));const n=tl().add(s),i=new Jl(ds.min(),new Map,new sa(Vi),e,n);await ah(r,i),r.du=r.du.remove(s),r.Au.delete(t),yh(r)}else await Nu(r.localStore,t,!1).then(()=>fh(r,t,n)).catch(bs)}async function ch(e,t){const n=Ci(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ci(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Es.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Ti(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=tl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);hh(n,r,null),dh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vh(n,e)}catch(e){await bs(e)}}async function uh(e,t,n){const r=Ci(e);try{const e=await function(e,t){const n=Ci(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ti(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);hh(r,t,n),dh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await vh(r,e)}catch(n){await bs(n)}}function dh(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function hh(e,t,n){const r=Ci(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function fh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||ph(e,t)})}function ph(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(sd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),yh(e))}function mh(e,t,n){for(const r of n)r instanceof Kd?(e.Ru.addReference(r.key,t),gh(e,r)):r instanceof Gd?(bi(Yd,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||ph(e,r.key)):ki(19791,{wu:r})}function gh(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(bi(Yd,"New document in limbo: "+n),e.Eu.add(r),yh(e))}function yh(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Xi(Qi.fromString(t)),r=e.fu.next();e.Au.set(r,new Xd(n)),e.du=e.du.insert(n,r),id(e.remoteStore,new Fc(Do(xo(n.path)),r,"TargetPurposeLimboResolution",ks.ce))}}async function vh(e,t,n){const r=Ci(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(o.targetId)?.current;r.sharedClientState.updateQueryState(o.targetId,t?"current":"not-current")}if(e){i.push(e);const t=yu.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=Ci(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Es.forEach(t,t=>Es.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Es.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ss(e))throw e;bi(bu,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function wh(e,t){const n=Ci(e);if(!n.currentUser.isEqual(t)){bi(Yd,"User change. New user:",t.toKey());const e=await Su(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new xi(Ni.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vh(n,e.Ls)}}function bh(e,t){const n=Ci(e),r=n.Au.get(t);if(r&&r.hu)return tl().add(r.key);{let e=tl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Eh(e){const t=Ci(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ah.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lh.bind(null,t),t.Pu.H_=Vd.bind(null,t.eventManager),t.Pu.yu=Bd.bind(null,t.eventManager),t}function _h(e){const t=Ci(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ch.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uh.bind(null,t),t}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _u(this.persistence,new wu,e.initialUser,this.serializer)}Cu(e){return new fu(mu.mi,this.serializer)}Du(e){return new Ru}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class kh extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ti(this.persistence.referenceDelegate instanceof gu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Xc(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Wc.withCacheSize(this.cacheSizeBytes):Wc.DEFAULT;return new fu(e=>gu.mi(e,t),this.serializer)}}class Ih{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>oh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=wh.bind(null,this.syncEngine),await Nd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Md}createDatastore(e){const t=qu(e.databaseInfo.databaseId),n=function(e){return new $u(e)}(e.databaseInfo);return function(e,t,n,r){return new Xu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new td(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>oh(this.syncEngine,e,0),Lu.v()?new Lu:new Du)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Zd(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=Ci(e);bi(ed,"RemoteStore shutting down."),t.Ea.add(5),await rd(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ih.provider={build:()=>new Ih};class Th{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Ch="FirestoreClient";class Nh{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=gi.UNAUTHENTICATED,this.clientId=zi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{bi(Ch,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(bi(Ch,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Rd(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function xh(e,t){e.asyncQueue.verifyOperationInProgress(),bi(Ch,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Su(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ah(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ph(e);bi(Ch,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Cd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Cd(t.remoteStore,n)),e._onlineComponents=t}async function Ph(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){bi(Ch,"Using user provided OfflineComponentProvider");try{await xh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ni.FAILED_PRECONDITION||e.code===Ni.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;_i("Error using user provided cache. Falling back to memory cache: "+n),await xh(e,new Sh)}}else bi(Ch,"Using default OfflineComponentProvider"),await xh(e,new kh(void 0));return e._offlineComponents}async function Rh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(bi(Ch,"Using user provided OnlineComponentProvider"),await Ah(e,e._uninitializedComponentsProvider._online)):(bi(Ch,"Using default OnlineComponentProvider"),await Ah(e,new Ih))),e._onlineComponents}function Dh(e){return Rh(e).then(e=>e.syncEngine)}async function Oh(e){const t=await Rh(e),n=t.eventManager;return n.onListen=eh.bind(null,t.syncEngine),n.onUnlisten=ih.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=th.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=sh.bind(null,t.syncEngine),n}function Lh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ai;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Th({next:o=>{s.Nu(),t.enqueueAndForget(()=>zd(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new xi(Ni.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new xi(Ni.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Wd(xo(n.path),s,{includeMetadataChanges:!0,qa:!0});return Ud(e,a)}(await Oh(e),e.asyncQueue,t,n,r)),r.promise}function jh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ai;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Th({next:n=>{s.Nu(),t.enqueueAndForget(()=>zd(e,a)),n.fromCache&&"server"===r.source?i.reject(new xi(Ni.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Wd(n,s,{includeMetadataChanges:!0,qa:!0});return Ud(e,a)}(await Oh(e),e.asyncQueue,t,n,r)),r.promise}function Mh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fh=new Map,Uh="firestore.googleapis.com",zh=!0;class Vh{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new xi(Ni.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uh,this.ssl=zh}else this.host=e.host,this.ssl=e.ssl??zh;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=qc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Qc)throw new xi(Ni.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new xi(Ni.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mh(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xi(Ni.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new xi(Ni.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new xi(Ni.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xi(Ni.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xi(Ni.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vh(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ri;switch(e.type){case"firstParty":return new ji(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xi(Ni.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fh.get(e);t&&(bi("ComponentProvider","Removing Datastore"),Fh.delete(e),t.terminate())}(this),Promise.resolve()}}function $h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=is(e,Bh);const i=Zt(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${n}`;i&&(en(`https://${o}`),rn("Firestore",!0)),s.host!==Uh&&s.host!==o&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!mn(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=gi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[qt(JSON.stringify({alg:"none",type:"JWT"})),qt(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new xi(Ni.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new gi(i)}e._authCredentials=new Di(new Pi(t,n))}}class Hh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hh(this.firestore,e,this._query)}}class qh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qh(this.firestore,e,this._key)}toJSON(){return{type:qh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(os(t,qh._jsonSchema))return new qh(e,n||null,new Xi(Qi.fromString(t.referencePath)))}}qh._jsonSchemaVersion="firestore/documentReference/1.0",qh._jsonSchema={type:as("string",qh._jsonSchemaVersion),referencePath:as("string")};class Wh extends Hh{constructor(e,t,n){super(e,t,xo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qh(this.firestore,null,new Xi(e))}withConverter(e){return new Wh(this.firestore,e,this._path)}}function Kh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Sn(e),Zi("collection","path",t),e instanceof Bh){const n=Qi.fromString(t,...r);return ts(n),new Wh(e,null,n)}{if(!(e instanceof qh||e instanceof Wh))throw new xi(Ni.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qi.fromString(t,...r));return ts(n),new Wh(e.firestore,null,n)}}function Gh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Sn(e),1===arguments.length&&(t=zi.newId()),Zi("doc","path",t),e instanceof Bh){const n=Qi.fromString(t,...r);return es(n),new qh(e,null,new Xi(n))}{if(!(e instanceof qh||e instanceof Wh))throw new xi(Ni.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qi.fromString(t,...r));return es(n),new qh(e.firestore,e instanceof Wh?e.converter:null,new Xi(n))}}const Qh="AsyncQueue";class Yh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wu(this,"async_queue_retry"),this._c=()=>{const e=Hu();e&&bi(Qh,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Hu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ai;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(K_){if(!Ss(K_))throw K_;bi(Qh,"Operation failed with retryable error: "+K_)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Ei("INTERNAL UNHANDLED ERROR: ",Jh(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Pd.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ki(47125,{Pc:Jh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Xh(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Zh extends Bh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Yh,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,await e}}}function ef(e){if(e._terminated)throw new xi(Ni.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||tf(e),e._firestoreClient}function tf(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new ka(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Mh(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Nh(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class nf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nf(ha.fromBase64String(e))}catch(e){throw new xi(Ni.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nf(ha.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(os(e,nf._jsonSchema))return nf.fromBase64String(e.bytes)}}nf._jsonSchemaVersion="firestore/bytes/1.0",nf._jsonSchema={type:as("string",nf._jsonSchemaVersion),bytes:as("string")};class rf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new xi(Ni.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sf{constructor(e){this._methodName=e}}class af{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xi(Ni.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xi(Ni.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Vi(this._lat,e._lat)||Vi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:af._jsonSchemaVersion}}static fromJSON(e){if(os(e,af._jsonSchema))return new af(e.latitude,e.longitude)}}af._jsonSchemaVersion="firestore/geoPoint/1.0",af._jsonSchema={type:as("string",af._jsonSchemaVersion),latitude:as("number"),longitude:as("number")};class of{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:of._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(os(e,of._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new of(e.vectorValues);throw new xi(Ni.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}of._jsonSchemaVersion="firestore/vectorValue/1.0",of._jsonSchema={type:as("string",of._jsonSchemaVersion),vectorValues:as("object")};const lf=/^__.*__$/;class cf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new xl(e,this.data,t,this.fieldTransforms)}}class uf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Al(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function df(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ki(40011,{Ac:e})}}class hf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(df(this.Ac)&&lf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ff{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qu(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new hf({Ac:e,methodName:t,Dc:n,path:Ji.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pf(e){const t=e._freezeSettings(),n=qu(e._databaseId);return new ff(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mf(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);kf("Data must be an object, but it was:",a,r);const o=_f(r,a);let l,c;if(s.merge)l=new ua(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=If(t,r,n);if(!a.contains(i))throw new xi(Ni.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);xf(e,i)||e.push(i)}l=new ua(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new cf(new Ya(o),l,c)}class gf extends sf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}class yf extends sf{_toFieldTransform(e){return new wl(e.path,new dl)}isEqual(e){return e instanceof yf}}function vf(e,t,n,r){const i=e.Cc(1,t,n);kf("Data must be an object, but it was:",i,r);const s=[],a=Ya.empty();ra(r,(e,r)=>{const o=Cf(t,e,n);r=Sn(r);const l=i.yc(o);if(r instanceof gf)s.push(o);else{const e=Ef(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new ua(s);return new uf(a,o,i.fieldTransforms)}function wf(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[If(t,r,n)],l=[i];if(s.length%2!=0)throw new xi(Ni.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(If(t,s[h])),l.push(s[h+1]);const c=[],u=Ya.empty();for(let h=o.length-1;h>=0;--h)if(!xf(c,o[h])){const e=o[h];let t=l[h];t=Sn(t);const n=a.yc(e);if(t instanceof gf)c.push(e);else{const r=Ef(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ua(c);return new uf(u,d,a.fieldTransforms)}function bf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ef(n,e.Cc(r?4:3,t))}function Ef(e,t){if(Sf(e=Sn(e)))return kf("Unsupported field value:",t,e),_f(e,t);if(e instanceof sf)return function(e,t){if(!df(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ef(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Sn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return al(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=us.fromDate(e);return{timestampValue:dc(t.serializer,n)}}if(e instanceof us){const n=new us(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:dc(t.serializer,n)}}if(e instanceof af)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nf)return{bytesValue:hc(t.serializer,e._byteString)};if(e instanceof qh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:mc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof of)return function(e,t){return{mapValue:{fields:{[Ca]:{stringValue:Aa},[Pa]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return il(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${rs(e)}`)}(e,t)}function _f(e,t){const n={};return ia(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ra(e,(e,r)=>{const i=Ef(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Sf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof us||e instanceof af||e instanceof nf||e instanceof qh||e instanceof sf||e instanceof of)}function kf(e,t,n){if(!Sf(n)||!ns(n)){const r=rs(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function If(e,t,n){if((t=Sn(t))instanceof rf)return t._internalPath;if("string"==typeof t)return Cf(e,t);throw Nf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Tf=new RegExp("[~\\*/\\[\\]]");function Cf(e,t,n){if(t.search(Tf)>=0)throw Nf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rf(...t.split("."))._internalPath}catch(r){throw Nf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Nf(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new xi(Ni.INVALID_ARGUMENT,o+e+l)}function xf(e,t){return e.some(e=>e.isEqual(t))}class Af{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pf extends Af{data(){return super.data()}}function Rf(e,t){return"string"==typeof t?Cf(e,t):t instanceof rf?t._internalPath:t._delegate._internalPath}function Df(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xi(Ni.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Of{}class Lf extends Of{}function jf(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Of&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Uf).length,n=e.filter(e=>e instanceof Mf).length;if(t>1||t>0&&n>0)throw new xi(Ni.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Mf extends Lf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Mf(e,t,n)}_apply(e){const t=this._parse(e);return Wf(e._query,t),new Hh(e.firestore,e.converter,Lo(e._query,t))}_parse(e){const t=pf(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new xi(Ni.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){qf(a,s);const t=[];for(const n of a)t.push(Hf(r,e,n));o={arrayValue:{values:t}}}else o=Hf(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||qf(a,s),o=bf(n,t,a,"in"===s||"not-in"===s);return so.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ff(e,t,n){const r=t,i=Rf("where",e);return Mf._create(i,r,n)}class Uf extends Of{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uf(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ao.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Wf(n,i),n=Lo(n,i)}(e._query,t),new Hh(e.firestore,e.converter,Lo(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zf extends Lf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zf(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new xi(Ni.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xi(Ni.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new no(t,n)}(e._query,this._field,this._direction);return new Hh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Co(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Vf(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Rf("orderBy",e);return zf._create(n,t)}class Bf extends Lf{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Bf(e,t,n)}_apply(e){return new Hh(e.firestore,e.converter,jo(e._query,this._limit,this._limitType))}}function $f(e){return ss("limit",e),Bf._create("limit",e,"F")}function Hf(e,t,n){if("string"==typeof(n=Sn(n))){if(""===n)throw new xi(Ni.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Po(t)&&-1!==n.indexOf("/"))throw new xi(Ni.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Qi.fromString(n));if(!Xi.isDocumentKey(r))throw new xi(Ni.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Va(e,new Xi(r))}if(n instanceof qh)return Va(e,n._key);throw new xi(Ni.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rs(n)}.`)}function qf(e,t){if(!Array.isArray(e)||0===e.length)throw new xi(Ni.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new xi(Ni.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new xi(Ni.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Kf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ma(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ki(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ra(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[Pa].arrayValue?.values?.map(e=>ma(e.doubleValue));return new of(t)}convertGeoPoint(e){return new af(ma(e.latitude),ma(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_a(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){const t=pa(e);return new us(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qi.fromString(e);Ti(Mc(n),9688,{name:e});const r=new Ta(n.get(1),n.get(3)),i=new Xi(n.popFirst(5));return r.isEqual(t)||Ei(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Gf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yf extends Af{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Rf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xi(Ni.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yf._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yf._jsonSchema={type:as("string",Yf._jsonSchemaVersion),bundleSource:as("string","DocumentSnapshot"),bundleName:as("string"),bundle:as("string")};class Jf extends Yf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Xf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Jf(this._firestore,this._userDataWriter,n.key,n,new Qf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xi(Ni.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Jf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Jf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Zf(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xi(Ni.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Zf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ki(61501,{type:e})}}function ep(e){e=is(e,qh);const t=is(e.firestore,Zh);return Lh(ef(t),e._key).then(n=>ap(t,e,n))}Xf._jsonSchemaVersion="firestore/querySnapshot/1.0",Xf._jsonSchema={type:as("string",Xf._jsonSchemaVersion),bundleSource:as("string","QuerySnapshot"),bundleName:as("string"),bundle:as("string")};class tp extends Kf{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qh(this.firestore,null,t)}}function np(e){e=is(e,Hh);const t=is(e.firestore,Zh),n=ef(t),r=new tp(t);return Df(e._query),jh(n,e._query).then(n=>new Xf(t,r,e,n))}function rp(e,t,n){e=is(e,qh);const r=is(e.firestore,Zh),i=pf(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=Sn(t))||t instanceof rf?wf(i,"updateDoc",e._key,t,n,o):vf(i,"updateDoc",e._key,t),sp(r,[s.toMutation(e._key,El.exists(!0))])}function ip(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=Sn(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||Xh(n[s])||(i=n[s++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Xh(n[s])){const e=n[s];n[s]=e.next?.bind(e),n[s+1]=e.error?.bind(e),n[s+2]=e.complete?.bind(e)}let o,l,c;if(e instanceof qh)l=is(e.firestore,Zh),c=xo(e._key.path),o={next:t=>{n[s]&&n[s](ap(l,e,t))},error:n[s+1],complete:n[s+2]};else{const t=is(e,Hh);l=is(t.firestore,Zh),c=t._query;const r=new tp(l);o={next:e=>{n[s]&&n[s](new Xf(l,r,t,e))},error:n[s+1],complete:n[s+2]},Df(e._query)}return function(e,t,n,r){const i=new Th(r),s=new Wd(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Ud(await Oh(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>zd(await Oh(e),s))}}(ef(l),c,a,o)}function sp(e,t){return function(e,t){const n=new Ai;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=_h(e);try{const e=await function(e,t){const n=Ci(e),r=us.now(),i=t.reduce((e,t)=>e.add(t.key),tl());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Wo(),l=tl();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Cl(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Al(e.key,t,Ja(t.value.mapValue),El.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Qo(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new sa(Vi)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await vh(r,e.changes),await vd(r.remoteStore)}catch(e){const t=Rd(e,"Failed to persist write");n.reject(t)}}(await Dh(e),t,n)),n.promise}(ef(e),t)}function ap(e,t,n){const r=n.docs.get(t._key),i=new tp(e);return new Yf(e,i,t._key,r,new Qf(n.hasPendingWrites,n.fromCache),t.converter)}function op(){return new yf("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){yi=e}(zr),Lr(new kn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Zh(new Oi(e.getProvider("auth-internal")),new Fi(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xi(Ni.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(e.options.projectId,t)}(s,r),s);return i={useFetchStreams:t,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),$r(pi,mi,e),$r(pi,mi,"esm2020")}();function lp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cp=lp,up=new fn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dp=new On("@firebase/auth");function hp(e){if(dp.logLevel<=xn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dp.error(`Auth (${zr}): ${e}`,...n)}}function fp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw yp(e,...n)}function pp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yp(e,...n)}function mp(e,t,n){const r={...cp(),[t]:n};return new fn("auth","Firebase",r).create(t,{appName:e.name})}function gp(e){return mp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return up.create(e,...n)}function vp(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw yp(t,...r)}}function wp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hp(t),new Error(t)}function bp(e,t){e||wp(t)}function Ep(){return"undefined"!==typeof self&&self.location?.href||""}function _p(){return"http:"===Sp()||"https:"===Sp()}function Sp(){return"undefined"!==typeof self&&self.location?.protocol||null}class kp{constructor(e,t){this.shortDelay=e,this.longDelay=t,bp(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(_p()||on()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ip(e,t){bp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Tp{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void wp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void wp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void wp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Np=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xp=new kp(3e4,6e4);function Ap(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Pp(e,t,n,r){return Rp(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=yn({key:e.config.apiKey,...s}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:o,...i};return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Zt(e.emulatorConfig.host)&&(l.credentials="include"),Tp.fetch()(await Op(e,e.config.apiHost,n,a),l)})}async function Rp(e,t,n){e._canInitEmulator=!1;const r={...Cp,...t};try{const t=new jp(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Mp(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mp(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Mp(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Mp(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw mp(e,o,a);fp(e,o)}}catch(K_){if(K_ instanceof hn)throw K_;fp(e,"network-request-failed",{message:String(K_)})}}async function Dp(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Pp(e,t,n,r,i);return"mfaPendingCredential"in s&&fp(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Op(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?Ip(e.config,i):`${e.config.apiScheme}://${i}`;if(Np.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function Lp(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jp{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pp(this.auth,"network-request-failed")),xp.get())})}}function Mp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pp(e,t,r);return i.customData._tokenResponse=n,i}function Fp(e){return void 0!==e&&void 0!==e.enterprise}class Up{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Lp(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zp(e,t){return Pp(e,"GET","/v2/recaptchaConfig",Ap(e,t))}async function Vp(e,t){return Pp(e,"POST","/v1/accounts:lookup",t)}function Bp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(K_){}}function $p(e){return 1e3*Number(e)}function Hp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return hp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Wt(n);return e?JSON.parse(e):(hp("Failed to decode base64 JWT payload"),null)}catch(K_){return hp("Caught error parsing JWT payload as JSON",K_?.toString()),null}}function qp(e){const t=Hp(e);return vp(t,"internal-error"),vp("undefined"!==typeof t.exp,"internal-error"),vp("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Wp(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(K_){throw K_ instanceof hn&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(K_)&&e.auth.currentUser===e&&await e.auth.signOut(),K_}}class Kp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(K_){return void("auth/network-request-failed"===K_?.code&&this.schedule(!0))}this.schedule()}}class Gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bp(this.lastLoginAt),this.creationTime=Bp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qp(e){const t=e.auth,n=await e.getIdToken(),r=await Wp(e,Vp(t,{idToken:n}));vp(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?Yp(i.providerUserInfo):[],a=(o=e.providerData,l=s,[...o.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var o,l;const c=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!a?.length,d=!!c&&u,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Gp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function Yp(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Jp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vp(e.idToken,"internal-error"),vp("undefined"!==typeof e.idToken,"internal-error"),vp("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):qp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vp(0!==e.length,"internal-error");const t=qp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(vp(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Rp(e,{},async()=>{const n=yn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Op(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Zt(e.emulatorConfig.host)&&(o.credentials="include"),Tp.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Jp;return n&&(vp("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(vp("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(vp("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jp,this.toJSON())}_performRefresh(){return wp("not implemented")}}function Xp(e,t){vp("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Zp{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...i}=e;this.providerId="firebase",this.proactiveRefresh=new Kp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Wp(this,this.stsTokenManager.getToken(this.auth,e));return vp(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Sn(e),r=await n.getIdToken(t),i=Hp(r);vp(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Bp($p(i.auth_time)),issuedAtTime:Bp($p(i.iat)),expirationTime:Bp($p(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=Sn(e);await Qp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vp(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zp({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){vp(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Qp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject(gp(this.auth));const e=await this.getIdToken();return await Wp(this,async function(e,t){return Pp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:f,stsTokenManager:p}=t;vp(u&&p,e,"internal-error");const m=Jp.fromJSON(this.name,p);vp("string"===typeof u,e,"internal-error"),Xp(n,e.name),Xp(r,e.name),vp("boolean"===typeof d,e,"internal-error"),vp("boolean"===typeof h,e,"internal-error"),Xp(i,e.name),Xp(s,e.name),Xp(a,e.name),Xp(o,e.name),Xp(l,e.name),Xp(c,e.name);const g=new Zp({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:s,phoneNumber:i,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Jp;r.updateFromServerResponse(t);const i=new Zp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Qp(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];vp(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Yp(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!i?.length,a=new Jp;a.updateFromIdToken(n);const o=new Zp({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Gp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(o,l),o}}const em=new Map;function tm(e){bp(e instanceof Function,"Expected a class definition");let t=em.get(e);return t?(bp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,em.set(e,t),t)}class nm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nm.type="NONE";const rm=nm;function im(e,t,n){return`firebase:${e}:${t}:${n}`}class sm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=im(this.userKey,r.apiKey,i),this.fullPersistenceKey=im("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Vp(this.auth,{idToken:e}).catch(()=>{});return t?Zp._fromGetAccountInfoResponse(this.auth,t,e):null}return Zp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new sm(tm(rm),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||tm(rm);const s=im(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await Vp(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Zp._fromGetAccountInfoResponse(e,r,t)}else n=Zp._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch{}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new sm(i,e,n)):new sm(i,e,n)}}function am(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(um(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(om(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hm(t))return"Blackberry";if(fm(t))return"Webos";if(lm(t))return"Safari";if((t.includes("chrome/")||cm(t))&&!t.includes("edge/"))return"Chrome";if(dm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function om(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/firefox\//i.test(e)}function lm(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/crios\//i.test(e)}function um(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/iemobile/i.test(e)}function dm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/android/i.test(e)}function hm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/blackberry/i.test(e)}function fm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/webos/i.test(e)}function pm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mm(){return function(){const e=sn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function gm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn();return pm(e)||dm(e)||fm(e)||hm(e)||/windows phone/i.test(e)||um(e)}function ym(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=am(sn());break;case"Worker":t=`${am(sn())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${zr}/${r}`}class vm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(K_){r(K_)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(K_){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:K_?.message})}}}class wm{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class bm{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _m(this),this.idTokenSubscription=new _m(this),this.beforeStateQueue=new vm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=up,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tm(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(K_){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Vp(this,{idToken:e}),n=await Zp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==i||!s?.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(K_){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(K_))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return vp(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(K_){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qp(e)}catch(K_){if("auth/network-request-failed"!==K_?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject(gp(this));const t=e?Sn(e):null;return t&&vp(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vp(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject(gp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject(gp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tm(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Pp(e,"GET","/v2/passwordPolicy",Ap(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wm(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Pp(e,"POST","/v2/accounts:revokeToken",Ap(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tm(e)||this._popupRedirectResolver;vp(t,this,"argument-error"),this.redirectPersistenceManager=await sm.create(this,[tm(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vp(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vp(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ym(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(dp.logLevel<=xn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dp.warn(`Auth (${zr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Em(e){return Sn(e)}class _m{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new bn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return vp(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function km(e){return Sm.loadJS(e)}function Im(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Tm{constructor(){this.enterprise=new Cm}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Cm{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Nm="NO_RECAPTCHA";class xm{constructor(e){this.type="recaptcha-enterprise",this.auth=Em(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Fp(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Nm)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Tm).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{zp(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Up(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Fp(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Sm.recaptchaEnterpriseScript;0!==t.length&&(t+=i),km(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Am(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new xm(e);let a;if(i)a=Nm;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Pm(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Am(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Am(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Am(e,t,n);return r(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Am(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Am(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Rm(e){const t=Em(e),n=await zp(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Up(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new xm(t).verify()}}function Dm(e,t,n){const r=Em(e);vp(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=Om(t),{host:a,port:o}=function(e){const t=Om(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Lm(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Lm(t)}}}(t),l=null===o?"":`:${o}`,c={url:`${s}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return vp(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void vp(mn(c,r.config.emulator)&&mn(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Zt(a)?(en(`${s}//${a}${l}`),rn("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Om(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Lm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class jm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wp("not implemented")}_getIdTokenResponse(e){return wp("not implemented")}_linkToIdToken(e,t){return wp("not implemented")}_getReauthenticationResolver(e){return wp("not implemented")}}async function Mm(e,t){return Pp(e,"POST","/v1/accounts:signUp",t)}async function Fm(e,t){return Dp(e,"POST","/v1/accounts:signInWithPassword",Ap(e,t))}class Um extends jm{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Um(e,t,"password")}static _fromEmailAndCode(e,t){return new Um(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Pm(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Fm,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Dp(e,"POST","/v1/accounts:signInWithEmailLink",Ap(e,t))}(e,{email:this._email,oobCode:this._password});default:fp(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Pm(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mm,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Dp(e,"POST","/v1/accounts:signInWithEmailLink",Ap(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:fp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zm(e,t){return Dp(e,"POST","/v1/accounts:signInWithIdp",Ap(e,t))}class Vm extends jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fp("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Vm(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return zm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zm(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yn(t)}return e}}async function Bm(e,t){return Pp(e,"POST","/v1/accounts:sendVerificationCode",Ap(e,t))}const $m={USER_NOT_FOUND:"user-not-found"};class Hm extends jm{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Hm({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Hm({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Dp(e,"POST","/v1/accounts:signInWithPhoneNumber",Ap(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Dp(e,"POST","/v1/accounts:signInWithPhoneNumber",Ap(e,t));if(n.temporaryProof)throw Mp(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return Dp(e,"POST","/v1/accounts:signInWithPhoneNumber",Ap(e,{...t,operation:"REAUTH"}),$m)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Hm({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qm{constructor(e){const t=vn(wn(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);vp(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=vn(wn(e)).link,n=t?vn(wn(t)).deep_link_id:null,r=vn(wn(e)).deep_link_id;return(r?vn(wn(r)).link:null)||r||n||t||e}(e);try{return new qm(t)}catch{return null}}}class Wm{constructor(){this.providerId=Wm.PROVIDER_ID}static credential(e,t){return Um._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qm.parseLink(t);return vp(n,"argument-error"),Um._fromEmailAndCode(e,n.code,n.tenantId)}}Wm.PROVIDER_ID="password",Wm.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gm extends Km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qm extends Gm{constructor(){super("facebook.com")}static credential(e){return Vm._fromParams({providerId:Qm.PROVIDER_ID,signInMethod:Qm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qm.credentialFromTaggedObject(e)}static credentialFromError(e){return Qm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qm.credential(t.oauthAccessToken)}catch{return null}}}Qm.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qm.PROVIDER_ID="facebook.com";class Ym extends Gm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vm._fromParams({providerId:Ym.PROVIDER_ID,signInMethod:Ym.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ym.credentialFromTaggedObject(e)}static credentialFromError(e){return Ym.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ym.credential(n,r)}catch{return null}}}Ym.GOOGLE_SIGN_IN_METHOD="google.com",Ym.PROVIDER_ID="google.com";class Jm extends Gm{constructor(){super("github.com")}static credential(e){return Vm._fromParams({providerId:Jm.PROVIDER_ID,signInMethod:Jm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jm.credentialFromTaggedObject(e)}static credentialFromError(e){return Jm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Jm.credential(t.oauthAccessToken)}catch{return null}}}Jm.GITHUB_SIGN_IN_METHOD="github.com",Jm.PROVIDER_ID="github.com";class Xm extends Gm{constructor(){super("twitter.com")}static credential(e,t){return Vm._fromParams({providerId:Xm.PROVIDER_ID,signInMethod:Xm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xm.credentialFromTaggedObject(e)}static credentialFromError(e){return Xm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xm.credential(n,r)}catch{return null}}}async function Zm(e,t){return Dp(e,"POST","/v1/accounts:signUp",Ap(e,t))}Xm.TWITTER_SIGN_IN_METHOD="twitter.com",Xm.PROVIDER_ID="twitter.com";class eg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Zp._fromIdTokenResponse(e,n,r),s=tg(n);return new eg({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=tg(n);return new eg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function tg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ng extends hn{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ng.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ng(e,t,n,r)}}function rg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw ng._fromErrorAndOperation(e,n,t,r);throw n})}async function ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Wp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return eg._forOperation(e,"link",r)}async function sg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Mr(r.app))return Promise.reject(gp(r));const i="reauthenticate";try{const s=await Wp(e,rg(r,i,t,e),n);vp(s.idToken,r,"internal-error");const a=Hp(s.idToken);vp(a,r,"internal-error");const{sub:o}=a;return vp(e.uid===o,r,"user-mismatch"),eg._forOperation(e,i,s)}catch(K_){throw"auth/user-not-found"===K_?.code&&fp(r,"user-mismatch"),K_}}async function ag(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Mr(e.app))return Promise.reject(gp(e));const r="signIn",i=await rg(e,r,t),s=await eg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function og(e,t){return ag(Em(e),t)}async function lg(e){const t=Em(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function cg(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Sn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Wp(i,async function(e,t){return Pp(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function ug(e,t){return Pp(e,"POST","/v2/accounts/mfaEnrollment:start",Ap(e,t))}new WeakMap;const dg="__sak";class hg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dg,"1"),this.storage.removeItem(dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class fg extends hg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);mm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fg.type="LOCAL";const pg=fg;function mg(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function gg(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class yg{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=gg(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return mg(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=gg(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=gg(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=mg(n);const i=setInterval(()=>{const e=mg(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}yg.type="COOKIE";class vg extends hg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vg.type="SESSION";const wg=vg;class bg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new bg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Eg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}bg.receivers=[];class _g{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Eg("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Sg(){return window}function kg(){return"undefined"!==typeof Sg().WorkerGlobalScope&&"function"===typeof Sg().importScripts}const Ig="firebaseLocalStorageDb",Tg="firebaseLocalStorage",Cg="fbase_key";class Ng{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xg(e,t){return e.transaction([Tg],t?"readwrite":"readonly").objectStore(Tg)}function Ag(){const e=indexedDB.open(Ig,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Tg,{keyPath:Cg})}catch(K_){n(K_)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Tg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ig);return new Ng(e).toPromise()}(),t(await Ag()))})})}async function Pg(e,t,n){const r=xg(e,!0).put({[Cg]:t,value:n});return new Ng(r).toPromise()}function Rg(e,t){const n=xg(e,!0).delete(t);return new Ng(n).toPromise()}class Dg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ag()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(K_){if(t++>3)throw K_;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bg._getInstance(kg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new _g(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ag();return await Pg(e,dg,"1"),await Rg(e,dg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=xg(e,!1).get(t),r=await new Ng(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=xg(e,!1).getAll();return new Ng(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Dg.type="LOCAL";const Og=Dg;function Lg(e,t){return Pp(e,"POST","/v2/accounts/mfaSignIn:start",Ap(e,t))}Im("rcb"),new kp(3e4,6e4);const jg="recaptcha";async function Mg(e,t,n){if(!e._getRecaptchaConfig())try{await Rm(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){vp("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Pm(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Nm){vp(n?.type===jg,e,"argument-error");return ug(e,await Fg(e,t,n))}return ug(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{vp("signin"===t.type,e,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;vp(i,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Pm(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Nm){vp(n?.type===jg,e,"argument-error");return Lg(e,await Fg(e,t,n))}return Lg(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Pm(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Nm){vp(n?.type===jg,e,"argument-error");return Bm(e,await Fg(e,t,n))}return Bm(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Fg(e,t,n){vp(n.type===jg,e,"argument-error");const r=await n.verify();vp("string"===typeof r,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ug{constructor(e){this.providerId=Ug.PROVIDER_ID,this.auth=Em(e)}verifyPhoneNumber(e,t){return Mg(this.auth,e,Sn(t))}static credential(e,t){return Hm._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ug.credentialFromTaggedObject(t)}static credentialFromError(e){return Ug.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Hm._fromTokenResponse(n,r):null}}function zg(e,t){return t?tm(t):(vp(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ug.PROVIDER_ID="phone",Ug.PHONE_SIGN_IN_METHOD="phone";class Vg extends jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bg(e){return ag(e.auth,new Vg(e),e.bypassAuthState)}function $g(e){const{auth:t,user:n}=e;return vp(n,t,"internal-error"),sg(n,new Vg(e),e.bypassAuthState)}async function Hg(e){const{auth:t,user:n}=e;return vp(n,t,"internal-error"),ig(n,new Vg(e),e.bypassAuthState)}class qg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(K_){this.reject(K_)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(K_){this.reject(K_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bg;case"linkViaPopup":case"linkViaRedirect":return Hg;case"reauthViaPopup":case"reauthViaRedirect":return $g;default:fp(this.auth,"internal-error")}}resolve(e){bp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wg=new kp(2e3,1e4);class Kg extends qg{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Kg.currentPopupAction&&Kg.currentPopupAction.cancel(),Kg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vp(e,this.auth,"internal-error"),e}async onExecution(){bp(1===this.filter.length,"Popup operations only handle one event");const e=Eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kg.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pp(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Wg.get())};e()}}Kg.currentPopupAction=null;const Gg=new Map;class Qg extends qg{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Gg.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xg(t),r=Jg(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(K_){e=()=>Promise.reject(K_)}Gg.set(this.auth._key(),e)}return this.bypassAuthState||Gg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Yg(e,t){Gg.set(e._key(),t)}function Jg(e){return tm(e._redirectPersistence)}function Xg(e){return im("pendingRedirect",e.config.apiKey,e.name)}async function Zg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Mr(e.app))return Promise.reject(gp(e));const r=Em(e),i=zg(r,t),s=new Qg(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class ey{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ny(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ny(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pp(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ty(e))}saveEventToCache(e){this.cachedEventUids.add(ty(e)),this.lastProcessedEventTime=Date.now()}}function ty(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ny(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const ry=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iy=/^https?/;async function sy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Pp(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(ay(n))return}catch{}fp(e,"unauthorized-domain")}function ay(e){const t=Ep(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!iy.test(n))return!1;if(ry.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const oy=new kp(3e4,6e4);function ly(){const e=Sg().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function cy(e){return new Promise((t,n)=>{function r(){ly(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ly(),n(pp(e,"network-request-failed"))},timeout:oy.get()})}if(Sg().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!Sg().gapi?.load){const t=Im("iframefcb");return Sg()[t]=()=>{gapi.load?r():n(pp(e,"network-request-failed"))},km(`${Sm.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw uy=null,e})}let uy=null;const dy=new kp(5e3,15e3),hy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function py(e){const t=e.config;vp(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ip(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:zr},i=fy.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yn(r).slice(1)}`}async function my(e){const t=await function(e){return uy=uy||cy(e),uy}(e),n=Sg().gapi;return vp(n,e,"internal-error"),t.open({where:document.body,url:py(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hy,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=pp(e,"network-request-failed"),s=Sg().setTimeout(()=>{r(i)},dy.get());function a(){Sg().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const gy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(K_){}}}function vy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...gy,width:r.toString(),height:i.toString(),top:s,left:a},c=sn().toLowerCase();n&&(o=cm(c)?"_blank":n),om(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return pm(arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn())&&!!window.navigator?.standalone}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new yy(null);const d=window.open(t||"",o,u);vp(d,e,"popup-blocked");try{d.focus()}catch(K_){}return new yy(d)}const wy="__/auth/handler",by="emulator/auth/handler",Ey=encodeURIComponent("fac");async function _y(e,t,n,r,i,s){vp(e.config.authDomain,e,"auth-domain-config-required"),vp(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:zr,eventId:i};if(t instanceof Km){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Gm){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Ey}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${wy}`;return Ip(t,by)}(e)}?${yn(o).slice(1)}${c}`}const Sy="webStorageSupport";const ky=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wg,this._completeRedirectFn=Zg,this._overrideRedirectResult=Yg}async _openPopup(e,t,n,r){bp(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return vy(e,await _y(e,t,n,Ep(),r),Eg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Sg().location.href=e}(await _y(e,t,n,Ep(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await my(e),n=new ey(e);return t.register("authEvent",t=>{vp(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sy,{type:Sy},n=>{const r=n?.[0]?.[Sy];void 0!==r&&t(!!r),fp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gm()||lm()||pm()}};var Iy="@firebase/auth",Ty="1.11.0";class Cy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vp(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ny=Jt("authIdTokenMaxAge")||300;let xy=null;var Ay;Sm={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pp("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ay="Browser",Lr(new kn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;vp(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Ay,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ym(Ay)},c=new bm(r,i,s,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tm);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Lr(new kn("auth-internal",e=>(e=>new Cy(e))(Em(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),$r(Iy,Ty,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ay)),$r(Iy,Ty,"esm2020");$r("firebase","12.0.0","app");const Py="@firebase/installations",Ry="0.6.19",Dy=1e4,Oy=`w:${Ry}`,Ly="FIS_v2",jy=36e5,My=new fn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fy(e){return e instanceof hn&&e.code.includes("request-failed")}function Uy(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function zy(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Vy(e,t){const n=(await t.json()).error;return My.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function By(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $y(e,t){let{refreshToken:n}=t;const r=By(e);return r.append("Authorization",function(e){return`${Ly} ${e}`}(n)),r}async function Hy(e){const t=await e();return t.status>=500&&t.status<600?e():t}function qy(e){return new Promise(t=>{setTimeout(t,e)})}const Wy=/^[cdef][\w-]{21}$/;function Ky(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Wy.test(t)?t:""}catch{return""}}function Gy(e){return`${e.appName}!${e.appId}`}const Qy=new Map;function Yy(e,t){const n=Gy(e);Jy(n,t),function(e,t){const n=Zy();n&&n.postMessage({key:e,fid:t});ev()}(n,t)}function Jy(e,t){const n=Qy.get(e);if(n)for(const r of n)r(t)}let Xy=null;function Zy(){return!Xy&&"BroadcastChannel"in self&&(Xy=new BroadcastChannel("[Firebase] FID Change"),Xy.onmessage=e=>{Jy(e.data.key,e.data.fid)}),Xy}function ev(){0===Qy.size&&Xy&&(Xy.close(),Xy=null)}const tv="firebase-installations-store";let nv=null;function rv(){return nv||(nv=Kn("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(tv)}})),nv}async function iv(e,t){const n=Gy(e),r=(await rv()).transaction(tv,"readwrite"),i=r.objectStore(tv),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Yy(e,t.fid),t}async function sv(e){const t=Gy(e),n=(await rv()).transaction(tv,"readwrite");await n.objectStore(tv).delete(t),await n.done}async function av(e,t){const n=Gy(e),r=(await rv()).transaction(tv,"readwrite"),i=r.objectStore(tv),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||Yy(e,a.fid),a}async function ov(e){let t;const n=await av(e.appConfig,n=>{const r=function(e){const t=e||{fid:Ky(),registrationStatus:0};return uv(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(My.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Uy(n),a=By(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:Ly,appId:n.appId,sdkVersion:Oy},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Hy(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:zy(e.authToken)}}throw await Vy("Create Installation",u)}(e,t);return iv(e.appConfig,n)}catch(K_){throw Fy(K_)&&409===K_.customData.serverCode?await sv(e.appConfig):await iv(e.appConfig,{fid:t.fid,registrationStatus:0}),K_}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:lv(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function lv(e){let t=await cv(e.appConfig);for(;1===t.registrationStatus;)await qy(100),t=await cv(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ov(e);return n||t}return t}function cv(e){return av(e,e=>{if(!e)throw My.create("installation-not-found");return uv(e)})}function uv(e){return 1===(t=e).registrationStatus&&t.registrationTime+Dy<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function dv(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Uy(e)}/${n}/authTokens:generate`}(n,t),s=$y(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Oy,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Hy(()=>fetch(i,l));if(c.ok){return zy(await c.json())}throw await Vy("Generate Auth Token",c)}async function hv(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await av(e.appConfig,r=>{if(!pv(r))throw My.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+jy}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await fv(e.appConfig);for(;1===n.authToken.requestStatus;)await qy(100),n=await fv(e.appConfig);const r=n.authToken;return 0===r.requestStatus?hv(e,t):r}(e,n),r;{if(!navigator.onLine)throw My.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}(r);return t=async function(e,t){try{const n=await dv(e,t),r={...t,authToken:n};return await iv(e.appConfig,r),n}catch(K_){if(!Fy(K_)||401!==K_.customData.serverCode&&404!==K_.customData.serverCode){const n={...t,authToken:{requestStatus:0}};await iv(e.appConfig,n)}else await sv(e.appConfig);throw K_}}(e,n),n}});return t?await t:r.authToken}function fv(e){return av(e,e=>{if(!pv(e))throw My.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Dy<Date.now()?{...e,authToken:{requestStatus:0}}:e;var n})}function pv(e){return void 0!==e&&2===e.registrationStatus}async function mv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await ov(e);t&&await t}(n);return(await hv(n,t)).token}function gv(e){return My.create("missing-app-config-values",{valueName:e})}const yv="installations",vv=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw gv("App Configuration");if(!e.name)throw gv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw gv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:jr(t,"heartbeat"),_delete:()=>Promise.resolve()}},wv=e=>{const t=jr(e.getProvider("app").getImmediate(),yv).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ov(t);return r?r.catch(console.error):hv(t).catch(console.error),n.fid}(t),getToken:e=>mv(t,e)}};Lr(new kn(yv,vv,"PUBLIC")),Lr(new kn("installations-internal",wv,"PRIVATE")),$r(Py,Ry),$r(Py,Ry,"esm2020");const bv="analytics",Ev="https://www.googletagmanager.com/gtag/js",_v=new On("@firebase/analytics"),Sv=new fn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function kv(e){if(!e.startsWith(Ev)){const t=Sv.create("invalid-gtag-resource",{gtagURL:e});return _v.warn(t.message),""}return e}function Iv(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Tv(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:kv}),r=document.createElement("script"),i=`${Ev}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Cv(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Iv(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(K_){_v.error(K_)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await Iv(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(K_){_v.error(K_)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(K_){_v.error(K_)}}}const Nv=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function xv(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Av(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nv,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Sv.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Sv.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Rv;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Pv({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Pv(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nv;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Sv.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(K_){if(o)return _v.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${K_?.message}]`),{appId:a,measurementId:o};throw K_}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:xv(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(i,r);if(200!==s.status&&304!==s.status){let e="";try{const t=await s.json();t.error?.message&&(e=t.error.message)}catch(a){}throw Sv.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return s.deleteThrottleMetadata(a),t}catch(K_){const r=K_;if(!function(e){if(!(e instanceof hn)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),o)return _v.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${r?.message}]`),{appId:a,measurementId:o};throw K_}const l=503===Number(r?.customData?.httpStatus)?_n(i,s.intervalMillis,30):_n(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:i+1};return s.setThrottleMetadata(a,c),_v.debug(`Calling attemptFetch again in ${l} millis`),Pv(e,c,n,s)}}class Rv{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Dv,Ov;function Lv(e){Ov=e}function jv(e){Dv=e}async function Mv(e,t,n,r,i,s,a){const o=Av(e);o.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&_v.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>_v.error(e)),t.push(o);const l=async function(){if(!cn())return _v.warn(Sv.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await un()}catch(K_){return _v.warn(Sv.create("indexeddb-unavailable",{errorInfo:K_?.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[c,u]=await Promise.all([o,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Ev)&&n.src.includes(e))return n;return null})(s)||Tv(s,c.measurementId),Ov&&(i("consent","default",Ov),Lv(void 0)),i("js",new Date);const d=a?.config??{};return d.origin="firebase",d.update=!0,null!=u&&(d.firebase_id=u),i("config",c.measurementId,d),Dv&&(i("set",Dv),jv(void 0)),c.measurementId}class Fv{constructor(e){this.app=e}_delete(){return delete Uv[this.app.options.appId],Promise.resolve()}}let Uv={},zv=[];const Vv={};let Bv,$v,Hv="dataLayer",qv="gtag",Wv=!1;function Kv(e,t,n){!function(){const e=[];if(on()&&e.push("This is a browser extension environment."),dn()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Sv.create("invalid-analytics-context",{errorInfo:t});_v.warn(n.message)}}();const r=e.options.appId;if(!r)throw Sv.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Sv.create("no-api-key");_v.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Uv[r])throw Sv.create("already-exists",{id:r});if(!Wv){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Hv);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Cv(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Uv,zv,Vv,Hv,qv);$v=e,Bv=t,Wv=!0}Uv[r]=Mv(e,zv,Vv,t,Bv,Hv,n);return new Fv(e)}const Gv="@firebase/analytics",Qv="0.10.18";Lr(new kn(bv,(e,t)=>{let{options:n}=t;return Kv(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),Lr(new kn("analytics-internal",function(e){try{const t=e.getProvider(bv).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=Sn(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,{...r,send_to:i})}}($v,Uv[e.app.options.appId],t,n,r).catch(e=>_v.error(e))}(t,e,n,r)}}catch(K_){throw Sv.create("interop-component-reg-failed",{reason:K_})}},"PRIVATE")),$r(Gv,Qv),$r(Gv,Qv,"esm2020");const Yv="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Jv="google.c.a.c_id",Xv=1e4;var Zv,ew;function tw(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nw(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Zv||(Zv={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ew||(ew={}));const rw="fcm_token_details_db",iw="fcm_token_object_Store";const sw="firebase-messaging-store";let aw=null;function ow(){return aw||(aw=Kn("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(sw)}})),aw}async function lw(e){const t=uw(e),n=await ow(),r=await n.transaction(sw).objectStore(sw).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes(rw))return null}let t=null;return(await Kn(rw,5,{upgrade:async(n,r,i,s)=>{if(r<2)return;if(!n.objectStoreNames.contains(iw))return;const a=s.objectStore(iw),o=await a.index("fcmSenderId").get(e);if(await a.clear(),o)if(2===r){const e=o;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:e.createTime??Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:tw(e.vapidKey)}}}else if(3===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:tw(e.auth),p256dh:tw(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:tw(e.vapidKey)}}}else if(4===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:tw(e.auth),p256dh:tw(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:tw(e.vapidKey)}}}}})).close(),await Gn(rw),await Gn("fcm_vapid_details_db"),await Gn("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await cw(e,t),t}}async function cw(e,t){const n=uw(e),r=(await ow()).transaction(sw,"readwrite");return await r.objectStore(sw).put(t,n),await r.done,t}function uw(e){let{appConfig:t}=e;return t.appId}const dw=new fn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function hw(e,t){const n={method:"DELETE",headers:await pw(e)};try{const r=await fetch(`${fw(e.appConfig)}/${t}`,n),i=await r.json();if(i.error){const e=i.error.message;throw dw.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw dw.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}}function fw(e){let{projectId:t}=e;return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}async function pw(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function mw(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:i}=e;const s={web:{endpoint:r,auth:n,p256dh:t}};return i!==Yv&&(s.web.applicationPubKey=i),s}async function gw(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nw(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:tw(t.getKey("auth")),p256dh:tw(t.getKey("p256dh"))},r=await lw(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await pw(e),r=mw(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch(`${fw(e.appConfig)}/${t.token}`,i);s=await n.json()}catch(a){throw dw.create("token-update-failed",{errorInfo:a?.toString()})}if(s.error){const e=s.error.message;throw dw.create("token-update-failed",{errorInfo:e})}if(!s.token)throw dw.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r={...t,token:n,createTime:Date.now()};return await cw(e.firebaseDependencies,r),n}catch(K_){throw K_}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await hw(e.firebaseDependencies,r.token)}catch(K_){console.warn(K_)}return yw(e.firebaseDependencies,n)}return yw(e.firebaseDependencies,n)}async function yw(e,t){const n=await async function(e,t){const n=await pw(e),r=mw(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(fw(e.appConfig),i);s=await t.json()}catch(a){throw dw.create("token-subscribe-failed",{errorInfo:a?.toString()})}if(s.error){const e=s.error.message;throw dw.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw dw.create("token-subscribe-no-token");return s.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await cw(e,r),r.token}function vw(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){if(!t.fcmOptions&&!t.notification?.click_action)return;e.fcmOptions={};const n=t.fcmOptions?.link??t.notification?.click_action;n&&(e.fcmOptions.link=n);const r=t.fcmOptions?.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function ww(e){return dw.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class bw{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw ww("App Configuration Object");if(!e.name)throw ww("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw ww(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Ew(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{}),await async function(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Service worker not registered after 10000 ms")),Xv),i=e.installing||e.waiting;e.active?(clearTimeout(r),t()):i?i.onstatechange=e=>{"activated"===e.target?.state&&(i.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}(e.swRegistration)}catch(K_){throw dw.create("failed-service-worker-registration",{browserErrorMessage:K_?.message})}}async function _w(e,t){if(!navigator)throw dw.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw dw.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Yv)}(e,t?.vapidKey),await async function(e,t){if(t||e.swRegistration||await Ew(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw dw.create("invalid-sw-registration");e.swRegistration=t}}(e,t?.serviceWorkerRegistration),gw(e)}async function Sw(e,t,n){const r=function(e){switch(e){case ew.NOTIFICATION_CLICKED:return"notification_open";case ew.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Jv],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function kw(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===ew.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(vw(n)):e.onMessageHandler.next(vw(n)));const r=n.data;(function(e){return"object"===typeof e&&!!e&&Jv in e})(r)&&"1"===r["google.c.a.e"]&&await Sw(e,n.messageType,r)}const Iw="@firebase/messaging",Tw="0.12.23",Cw=e=>{const t=new bw(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>kw(t,e)),t},Nw=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>_w(t,e)}};Lr(new kn("messaging",Cw,"PUBLIC")),Lr(new kn("messaging-internal",Nw,"PRIVATE")),$r(Iw,Tw),$r(Iw,Tw,"esm2020");const xw=Vr({apiKey:"AIzaSyB27nVr6lKWiTgj0lW0wQx5m1-lslhMipw",authDomain:"fans-food-stf.firebaseapp.com",projectId:"fans-food-stf",storageBucket:"fans-food-stf.firebasestorage.app",messagingSenderId:"267118373830",appId:"1:267118373830:web:dbec72cb78e58940fc60c7",measurementId:"G-0J0Q8GCTX4"});let Aw=null;try{Aw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br();e=Sn(e);const t=jr(e,bv);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=jr(e,bv);if(n.isInitialized()){const e=n.getImmediate();if(mn(t,n.getOptions()))return e;throw Sv.create("already-initialized")}return n.initialize({options:t})}(e)}(xw)}catch(G_){console.warn("Firebase Analytics not supported in this environment:",G_)}const Pw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br();const t=jr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=jr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(mn(n.getOptions(),t??{}))return e;fp(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ky,persistence:[Og,pg,wg]}),r=Jt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ny)return;const r=t?.token;xy!==r&&(xy=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Sn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Sn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Qt("auth");return s&&Dm(n,`http://${s}`),n}(xw),Rw=function(e,t){const n="object"==typeof e?e:Br(),r="string"==typeof e?e:t||Ia,i=jr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=Qt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&$h(i,...e)}return i}(xw);let Dw=null;try{Dw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br();return async function(){try{await un()}catch(K_){return!1}return"undefined"!==typeof window&&cn()&&dn()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then(e=>{if(!e)throw dw.create("unsupported-browser")},e=>{throw dw.create("indexed-db-unsupported")}),jr(Sn(e),"messaging").getImmediate()}(xw)}catch(G_){console.warn("Firebase Messaging not supported in this environment::",G_)}class Ow{constructor(){let{id:e="",email:t="",phone:n="",firstName:r="",lastName:i="",image:s=null,fcmToken:a="",favoriteFoods:o=[],favoriteRestaurants:l=[],createdAt:c=new Date,updatedAt:u=new Date,isActive:d=!0,type:h="customer"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=e,this.email=t,this.phone=n,this.firstName=r,this.lastName=i,this.image=s,this.fcmToken=a,this.favoriteFoods=o,this.favoriteRestaurants=l,this.createdAt=c,this.updatedAt=u,this.isActive=d,this.type=h}static fromMap(e,t){const n=e=>{if(e&&"function"===typeof e.toDate)return e.toDate();if(e instanceof Date)return e;if("number"===typeof e)return new Date(e<1e12?1e3*e:e);if("string"===typeof e){const t=new Date(e);if(!isNaN(t.getTime()))return t}return new Date};return new Ow({id:e,email:t.email||"",phone:t.phone||"",firstName:t.firstName||"",lastName:t.lastName||"",image:t.image||null,fcmToken:t.fcmToken||"",favoriteFoods:t.favoriteFoods||[],favoriteRestaurants:t.favoriteRestaurants||[],createdAt:n(t.createdAt),updatedAt:n(t.updatedAt),isActive:void 0===t.isActive||t.isActive,type:t.type||"customer"})}toMap(){return{id:this.id,email:this.email,phone:this.phone,firstName:this.firstName,lastName:this.lastName,image:this.image,fcmToken:this.fcmToken,favoriteFoods:this.favoriteFoods,favoriteRestaurants:this.favoriteRestaurants,createdAt:this.createdAt,updatedAt:new Date,isActive:this.isActive,type:this.type}}getFullName(){return`${this.firstName} ${this.lastName}`.trim()}getDisplayName(){return this.firstName||"User"}addToFavoriteFoods(e){this.favoriteFoods.includes(e)||(this.favoriteFoods.push(e),this.updatedAt=new Date)}removeFromFavoriteFoods(e){this.favoriteFoods=this.favoriteFoods.filter(t=>t!==e),this.updatedAt=new Date}addFavoriteRestaurant(e){return this.favoriteRestaurants.includes(e)?this:new Ow({...this.toMap(),favoriteRestaurants:[...this.favoriteRestaurants,e]})}removeFavoriteRestaurant(e){return new Ow({...this.toMap(),favoriteRestaurants:this.favoriteRestaurants.filter(t=>t!==e)})}updateProfile(e){return new Ow({...this.toMap(),...e})}}const Lw=new class{constructor(){this.collectionName="customers"}async registerUser(e){try{const{email:t,password:n,firstName:r,lastName:i}=e,s=await async function(e,t,n){if(Mr(e.app))return Promise.reject(gp(e));const r=Em(e),i=Pm(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zm,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&lg(e),t}),a=await eg._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(Pw,t,n),a=s.user;await cg(a,{displayName:`${r} ${i}`});const o=new Ow({id:a.uid,email:a.email,firstName:r,lastName:i,phone:"",fcmToken:"",favoriteFoods:[],favoriteRestaurants:[],createdAt:new Date,updatedAt:new Date,isActive:!0,type:"customer"}),l={...o.toMap(),createdAt:op(),updatedAt:op()};return await function(e,t,n){e=is(e,qh);const r=is(e.firestore,Zh),i=Gf(e.converter,t,n);return sp(r,[mf(pf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,El.none())])}(Gh(Rw,this.collectionName,a.uid),l),{success:!0,user:o}}catch(G_){return console.error("Error registering user:",G_),"auth/email-already-in-use"===G_.code?{success:!1,error:"This email is already registered. Please try signing in instead."}:"auth/weak-password"===G_.code?{success:!1,error:"Password is too weak. Please choose a stronger password (at least 6 characters)."}:"auth/invalid-email"===G_.code?{success:!1,error:"Please enter a valid email address."}:"auth/operation-not-allowed"===G_.code?{success:!1,error:"Email/password accounts are not enabled. Please contact support."}:"auth/too-many-requests"===G_.code?{success:!1,error:"Too many failed attempts. Please try again later."}:{success:!1,error:"Registration failed. Please try again."}}}async signInUser(e,t){try{const n=await function(e,t,n){return Mr(e.app)?Promise.reject(gp(e)):og(Sn(e),Wm.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&lg(e),t})}(Pw,e,t),r=n.user,i=await ep(Gh(Rw,this.collectionName,r.uid));if(!i.exists())throw new Error("User data not found. Please contact support.");const s=Ow.fromMap(r.uid,i.data());return await this.updateLastActive(s.id),s}catch(G_){throw console.error("Error signing in user:",G_),new Error(this.getErrorMessage(G_.code))}}async signOutUser(){try{await function(e){return Sn(e).signOut()}(Pw)}catch(G_){throw console.error("Error signing out:",G_),new Error("Failed to sign out. Please try again.")}}async getUserById(e){try{const t=await ep(Gh(Rw,this.collectionName,e));return t.exists()?Ow.fromMap(e,t.data()):null}catch(G_){return console.error("Error getting user:",G_),null}}async updateUserProfile(e,t){try{const n={...t,updatedAt:op()};await rp(Gh(Rw,this.collectionName,e),n)}catch(G_){throw console.error("Error updating user profile:",G_),new Error("Failed to update profile. Please try again.")}}async updateLastActive(e){try{await rp(Gh(Rw,this.collectionName,e),{updatedAt:op()})}catch(G_){console.error("Error updating last active:",G_)}}async addFavoriteFood(e,t){try{const n=await this.getUserById(e);n&&(n.addToFavoriteFoods(t),await rp(Gh(Rw,this.collectionName,e),{favoriteFoods:n.favoriteFoods,updatedAt:op()}))}catch(G_){throw console.error("Error adding favorite food:",G_),new Error("Failed to add to favorites. Please try again.")}}async removeFavoriteFood(e,t){try{const n=await this.getUserById(e);n&&(n.removeFromFavoriteFoods(t),await rp(Gh(Rw,this.collectionName,e),{favoriteFoods:n.favoriteFoods,updatedAt:op()}))}catch(G_){throw console.error("Error removing favorite food:",G_),new Error("Failed to remove from favorites. Please try again.")}}async addFavoriteRestaurant(e,t){try{const n=await this.getUserById(e);if(n){const r=n.addFavoriteRestaurant(t);await rp(Gh(Rw,this.collectionName,e),{favoriteRestaurants:r.favoriteRestaurants,updatedAt:op()})}}catch(G_){throw console.error("Error adding favorite restaurant:",G_),new Error("Failed to add to favorites. Please try again.")}}getErrorMessage(e){return{"auth/email-already-in-use":"This email is already registered. Please sign in instead.","auth/invalid-email":"Please enter a valid email address.","auth/operation-not-allowed":"Email/password accounts are not enabled. Please contact support.","auth/weak-password":"Password should be at least 6 characters long.","auth/user-disabled":"This account has been disabled. Please contact support.","auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/invalid-credential":"Invalid email or password. Please check your credentials.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection and try again."}[e]||"An unexpected error occurred. Please try again."}getFallbackUser(){return new Ow({id:"demo-user",email:"demo@foodmunch.com",firstName:"Demo",lastName:"User",phone:"+1 (555) 123-4567",fcmToken:"",favoriteFoods:[],favoriteRestaurants:[],createdAt:new Date,updatedAt:new Date,isActive:!0,type:"customer"})}},jw=Lw,Mw=()=>{const{t:t,lang:n}=Ut(),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(""),d=te(),h=e=>{a({...s,[e.target.name]:e.target.value}),u("")};return(0,_t.jsxs)("div",{className:"auth-screen",dir:"he"===n?"rtl":"ltr",children:[(0,_t.jsx)("div",{className:"auth-upper-section",children:(0,_t.jsxs)("div",{className:"auth-header",children:[(0,_t.jsx)("img",{src:"/app_icon.png",alt:"Fan Munch Logo",className:"app-logo"}),(0,_t.jsx)("h1",{className:"auth-title",children:t(r?"auth.title_login":"auth.title_register")})]})}),(0,_t.jsxs)("div",{className:"auth-container",children:[(0,_t.jsxs)("form",{className:"auth-form",onSubmit:async e=>{e.preventDefault(),l(!0),u("");try{if(r){console.log("\ud83d\udd11 User signing in..."),Pt.initializeFreshSession();const e=await jw.signInUser(s.email,s.password);Nt.setUserData(e.toMap()),Nt.setUserToken(`token_${e.id||Date.now()}`),console.log("\u2705 Sign in completed, navigating to onboarding"),d("/onboarding")}else{if(!s.firstName||!s.lastName||!s.email||!s.password||!s.confirmPassword)return void u(t("auth.fill_required"));if(s.password!==s.confirmPassword)return void u(t("auth.passwords_no_match"));console.log("\ud83d\udcdd User registering..."),Pt.initializeFreshSession();const e=await jw.registerUser(s);e.success?(Nt.setUserData(e.user.toMap()),Nt.setUserToken(`token_${e.user.id||Date.now()}`),console.log("\u2705 Registration completed, navigating to onboarding"),d("/onboarding")):u(e.error)}}catch(n){u(n.message)}finally{l(!1)}},children:[!r&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"firstName",children:t("auth.first_name")}),(0,_t.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:h,placeholder:t("auth.first_name"),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"lastName",children:t("auth.last_name")}),(0,_t.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:h,placeholder:t("auth.last_name"),required:!0})]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"email",children:t("auth.email")}),(0,_t.jsx)("input",{type:"email",id:"email",name:"email",value:s.email,onChange:h,placeholder:t("auth.email_ph"),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"password",children:t("auth.password")}),(0,_t.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:h,placeholder:t("auth.password_ph"),required:!0}),(0,_t.jsx)("a",{href:"#forgot-password",className:"forgot-password",children:t("auth.forgot_password")})]}),!r&&(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"confirmPassword",children:t("auth.confirm_password")}),(0,_t.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:h,placeholder:t("auth.confirm_password_ph"),required:!0})]}),c&&(0,_t.jsx)("div",{className:"error-message",children:c}),(0,_t.jsx)("button",{type:"submit",className:"auth-button",disabled:o,children:t(o?"auth.please_wait":r?"auth.sign_in":"auth.create_account")})]}),(0,_t.jsx)("div",{className:"auth-toggle",children:(0,_t.jsxs)("p",{className:"toggle-text",children:[t(r?"auth.toggle_no_account":"auth.toggle_have_account"),(0,_t.jsx)("button",{type:"button",className:"toggle-button",onClick:()=>{i(!r),u(""),a({firstName:"",lastName:"",email:"",password:"",confirmPassword:""})},children:t(r?"auth.toggle_register_now":"auth.toggle_sign_in")})]})})]})]})};class Fw{constructor(e){let{id:t,name:n,about:r="",location:i,capacity:s,imageUrl:a="",teams:o=[],color:l="#3D70FF",createdAt:c=(new Date).toISOString(),updatedAt:u=(new Date).toISOString()}=e;this.id=t,this.name=n,this.about=r,this.location=i,this.capacity=s,this.imageUrl=a,this.teams=o,this.color=l,this.createdAt=c,this.updatedAt=u}static fromMap(e){return new Fw({id:e.id,name:e.name||"",about:e.about||"",location:e.location||"",capacity:e.capacity||0,imageUrl:e.imageUrl||"",teams:e.teams||[],color:e.color||"#3D70FF",createdAt:e.createdAt||(new Date).toISOString(),updatedAt:e.updatedAt||(new Date).toISOString()})}toMap(){return{id:this.id,name:this.name,about:this.about,location:this.location,capacity:this.capacity,imageUrl:this.imageUrl,teams:this.teams,color:this.color,createdAt:this.createdAt,updatedAt:this.updatedAt}}getFormattedCapacity(){return this.capacity.toLocaleString()}getDisplayName(){return`${this.name} - ${this.location}`}hasTeam(e){return this.teams.some(t=>t.toLowerCase().includes(e.toLowerCase()))}update(e){return new Fw({...this.toMap(),...e,updatedAt:(new Date).toISOString()})}}const Uw=Fw;const zw=new class{constructor(){this.collectionName="stadiums",this.stadiumsRef=Kh(Rw,this.collectionName)}async getAllStadiums(){try{const e=jf(this.stadiumsRef,Vf("name","asc")),t=await np(e),n=[];return t.forEach(e=>{const t={id:e.id,...e.data()};n.push(Uw.fromMap(t))}),n}catch(G_){return console.error("Error fetching stadiums:",G_),this.getFallbackStadiums()}}async getStadiumById(e){try{const t=Gh(Rw,this.collectionName,e),n=await ep(t);if(n.exists()){const e={id:n.id,...n.data()};return Uw.fromMap(e)}return console.log("No stadium found with ID:",e),null}catch(G_){return console.error("Error fetching stadium by ID:",G_),null}}async getStadiumsByLocation(e){try{const t=jf(this.stadiumsRef,Ff("location","==",e),Vf("name","asc")),n=await np(t),r=[];return n.forEach(e=>{const t={id:e.id,...e.data()};r.push(Uw.fromMap(t))}),r}catch(G_){return console.error("Error fetching stadiums by location:",G_),[]}}async getFeaturedStadiums(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;try{const t=jf(this.stadiumsRef,Vf("capacity","desc"),$f(e)),n=await np(t),r=[];return n.forEach(e=>{const t={id:e.id,...e.data()};r.push(Uw.fromMap(t))}),r}catch(G_){return console.error("Error fetching featured stadiums:",G_),this.getFallbackStadiums().slice(0,e)}}async searchStadiums(e){try{const t=await np(this.stadiumsRef),n=[];return t.forEach(t=>{const r={id:t.id,...t.data()},i=Uw.fromMap(r);(i.name.toLowerCase().includes(e.toLowerCase())||i.location.toLowerCase().includes(e.toLowerCase()))&&n.push(i)}),n}catch(G_){return console.error("Error searching stadiums:",G_),[]}}getFallbackStadiums(){return[{id:"metlife-stadium",name:"MetLife Stadium",location:"East Rutherford, NJ",about:"Home to the New York Giants and New York Jets",capacity:82500,imageUrl:"",teams:["Giants","Jets"],color:"#0B2265",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:"madison-square-garden",name:"Madison Square Garden",location:"New York, NY",about:"The World's Most Famous Arena",capacity:20789,imageUrl:"",teams:["Knicks","Rangers"],color:"#F58426",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:"yankee-stadium",name:"Yankee Stadium",location:"Bronx, NY",about:"Home of the New York Yankees",capacity:54251,imageUrl:"",teams:["Yankees"],color:"#132448",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:"barclays-center",name:"Barclays Center",location:"Brooklyn, NY",about:"Home to the Brooklyn Nets and New York Islanders",capacity:17732,imageUrl:"",teams:["Nets","Islanders"],color:"#000000",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:"citi-field",name:"Citi Field",location:"Queens, NY",about:"Home of the New York Mets",capacity:41922,imageUrl:"",teams:["Mets"],color:"#002D72",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:"red-bull-arena",name:"Red Bull Arena",location:"Harrison, NJ",about:"Home of the New York Red Bulls",capacity:25e3,imageUrl:"",teams:["Red Bulls"],color:"#C4122E",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}].map(e=>Uw.fromMap(e))}async isFirebaseAvailable(){try{const e=jf(this.stadiumsRef,$f(1));return await np(e),!0}catch(G_){return console.warn("Firebase not available:",G_.message),!1}}},Vw=zw,Bw=()=>{const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)(null),c=te(),{applyStadiumTheme:u}=(()=>{const t=(0,e.useContext)(St);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t})(),{t:d,lang:h}=Ut();(0,e.useEffect)(()=>{(async()=>{try{a(!0),l(null);const e=await Vw.getAllStadiums();i(e)}catch(e){console.error("Error fetching stadiums:",e),l("Failed to load stadiums. Please try again.");const t=Vw.getFallbackStadiums();i(t)}finally{a(!1)}})()},[]);return(0,_t.jsxs)("div",{className:"stadium-selection-screen",dir:"he"===h?"rtl":"ltr",children:[(0,_t.jsx)("div",{className:"stadium-bg",style:{backgroundImage:"url(/assets/images/on-boarding-1.png)"}}),(0,_t.jsx)("div",{className:"stadium-overlay"}),(0,_t.jsxs)("div",{className:"stadium-container",children:[(0,_t.jsxs)("div",{className:"stadium-header",children:[(0,_t.jsx)("h1",{className:"stadium-title animate-down",children:d("stadium.title")}),(0,_t.jsx)("p",{className:"stadium-subtitle animate-up",children:d("stadium.subtitle")})]}),s&&(0,_t.jsxs)("div",{className:"loading-container",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:d("stadium.loading")})]}),o&&(0,_t.jsxs)("div",{className:"error-container",children:[(0,_t.jsx)("p",{className:"error-message",children:o}),(0,_t.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),children:d("stadium.retry")})]}),!s&&!o&&(0,_t.jsx)("div",{className:"stadium-grid",children:r.map(e=>(0,_t.jsxs)("div",{className:"stadium-card "+((null===t||void 0===t?void 0:t.id)===e.id?"selected":""),onClick:()=>(e=>{n(e)})(e),style:{"--stadium-color":e.color},children:[(0,_t.jsx)("div",{className:"stadium-info",children:(0,_t.jsx)("h3",{className:"stadium-name",children:e.name})}),(null===t||void 0===t?void 0:t.id)===e.id&&(0,_t.jsx)("div",{className:"selected-indicator",children:(0,_t.jsx)("span",{children:"\u2713"})})]},e.id))}),(0,_t.jsx)("div",{className:"stadium-actions",children:(0,_t.jsx)("button",{className:"continue-button "+(t?"active":"disabled"),onClick:()=>{if(t){const e=Uw.fromMap(t);xt.setSelectedStadium(e.toMap()),c("/home")}},disabled:!t,children:t?`${d("stadium.continue_to")} ${t.name}`:d("stadium.select_button")})})]})]})};var $w={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Hw=e.createContext&&e.createContext($w),qw=["attr","size","title"];function Ww(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kw(){return Kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kw.apply(this,arguments)}function Gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(n),!0).forEach(function(t){Yw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jw(t){return t&&t.map((t,n)=>e.createElement(t.tag,Qw({key:n},t.attr),Jw(t.child)))}function Xw(t){return n=>e.createElement(Zw,Kw({attr:Qw({},t.attr)},n),Jw(t.child))}function Zw(t){var n=n=>{var r,{attr:i,size:s,title:a}=t,o=Ww(t,qw),l=s||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",Kw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:r,style:Qw(Qw({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&e.createElement("title",null,a),t.children)};return void 0!==Hw?e.createElement(Hw.Consumer,null,e=>n(e)):n($w)}function eb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function tb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function nb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"},child:[]}]})(e)}function rb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},child:[]}]})(e)}function ib(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function sb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},child:[]}]})(e)}function ab(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(e)}function ob(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function lb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}function cb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)}function ub(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function db(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(e)}function hb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function fb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"},child:[]}]})(e)}function pb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"},child:[]}]})(e)}function mb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2l-1.5 1.5zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11v14z"},child:[]},{tag:"path",attr:{d:"M9 7h6v2H9zM16 7h2v2h-2zM9 10h6v2H9zM16 10h2v2h-2z"},child:[]}]})(e)}function gb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function yb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m8.1 13.34 2.83-2.83L3.91 3.5a4.008 4.008 0 0 0 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"},child:[]}]})(e)}function vb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"},child:[]}]})(e)}function wb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(e)}function bb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(e)}function Eb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(e)}function _b(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function Sb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(e)}function kb(e){return Xw({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(e)}const Ib=t=>{let{onChanged:n}=t;const[r,i]=(0,e.useState)(""),{t:s}=Ut();return(0,_t.jsx)("div",{className:"search-filter-widget",children:(0,_t.jsx)("div",{className:"search-container",children:(0,_t.jsxs)("div",{className:"search-input-wrapper",children:[(0,_t.jsx)(ob,{className:"search-icon"}),(0,_t.jsx)("input",{type:"text",className:"search-input",placeholder:s("home.search_placeholder"),value:r,onChange:e=>{const t=e.target.value;i(t),n&&n(t)}})]})})})},Tb=t=>{const n=te(),[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(null),{t:c,lang:u}=Ut();(0,e.useEffect)(()=>{const e=xt.getSelectedStadium();e&&a(e);const t=Nt.getUserData();l(t)},[]);return(0,_t.jsxs)("div",{className:"home-top-section "+("he"===u?"rtl":""),dir:"he"===u?"rtl":"ltr",children:[(0,_t.jsxs)("div",{className:"home-header",children:[(0,_t.jsxs)("div",{className:"stadium-selector",onClick:()=>{n("/stadium-selection")},children:[(0,_t.jsx)("span",{className:"loc-badge",children:(0,_t.jsx)("img",{src:"/assets/icons/location.png",alt:"Location",className:"location-icon"})}),(0,_t.jsx)("div",{className:"stadium-info",children:(0,_t.jsxs)("div",{className:"stadium-name-container",children:[(0,_t.jsx)("span",{className:"stadium-name",children:s?s.name:c("home.select_stadium")}),"he"===u?(0,_t.jsx)(fb,{size:20,className:"dropdown-arrow"}):(0,_t.jsx)(pb,{size:20,className:"dropdown-arrow"})]})})]}),(0,_t.jsx)("button",{className:"cart-button",onClick:()=>{n("/cart")},children:(0,_t.jsx)(lb,{size:24})})]}),(0,_t.jsxs)("div",{className:"welcome-message",children:[(0,_t.jsx)("h1",{children:c("home.greeting")}),(0,_t.jsx)("h2",{children:o?`${o.firstName} ${o.lastName}!`:"Guest!"})]}),(0,_t.jsx)("div",{className:"search-container",children:(0,_t.jsx)(Ib,{onChanged:e=>{i(e),t.onSearch&&t.onSearch(e)},onFilterTap:()=>{console.log("Filter button clicked")}})})]})};const Cb=t=>{let{selectedCategory:n="all",onSelect:r}=t;const[i,s]=(0,e.useState)(n||"all"),a=null!==n&&void 0!==n?n:i,[o,l]=(0,e.useState)([]),{t:c,lang:u}=Ut();(0,e.useEffect)(()=>{let e=!1;return(async()=>{try{const t=(await np(Kh(Rw,"categories"))).docs.map(e=>{var t,n;const r=e.data()||{},i=(null===r||void 0===r||null===(t=r.nameMap)||void 0===t?void 0:t[u])||(null===r||void 0===r||null===(n=r.nameMap)||void 0===n?void 0:n.en)||(null===r||void 0===r?void 0:r.name)||e.id,s=(null===r||void 0===r?void 0:r.icon)||"\ud83c\udf54";return{id:(null===r||void 0===r?void 0:r.docId)||e.id,name:i,icon:s,color:"#3D70FF"}}),n={id:"all",name:c("home.cat_all"),icon:vb,color:"#3D70FF"};e||l([n,...t])}catch(K_){console.warn("[CategoryList] Failed to load categories:",(null===K_||void 0===K_?void 0:K_.message)||K_),l([{id:"all",name:c("home.cat_all"),icon:vb,color:"#3D70FF"}])}})(),()=>{e=!0}},[Rw,u,c]);return(0,_t.jsxs)("div",{className:"category-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:c("home.categories")})}),(0,_t.jsx)("div",{className:"categories-container",children:o.map(e=>{const t="string"===typeof e.icon,n=t?null:e.icon,i=a===e.id;return(0,_t.jsxs)("button",{className:"category-card "+(i?"selected":""),onClick:()=>{return t=e.id,void(r?r(t):s(t));var t},children:[(0,_t.jsx)("div",{className:"category-icon-wrapper",style:{backgroundColor:i?e.color:`${e.color}15`},children:t?(0,_t.jsx)("span",{className:"category-icon",style:{fontSize:22},children:e.icon}):(0,_t.jsx)(n,{className:"category-icon",style:{color:i?"white":e.color}})}),(0,_t.jsx)("div",{className:"category-info",children:(0,_t.jsx)("h3",{className:"category-name",children:e.name})})]},e.id)})})]})},Nb=["./assets/images/on-boarding-1.png","./assets/images/on-boarding-2.png","./assets/images/on-boarding-3.png"];function xb(e){const t=String(e||"food");let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n|=0;const r=Math.abs(n)%Nb.length;return Nb[r]}const Ab=function(e){let{menuItems:t=[],loading:n=!1,error:r=null,searchTerm:i=""}=e;const s=te(),{t:a,lang:o}=Ut(),l=()=>i.trim()?`${a("home.search_results")} (${t.length})`:a("home.popular_menu");if(n)return(0,_t.jsxs)("div",{className:"menu-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:l()})}),(0,_t.jsx)("div",{className:"menu-loading",children:(0,_t.jsx)("div",{className:"menu-shimmer-container",children:[...Array(5)].map((e,t)=>(0,_t.jsxs)("div",{className:"menu-shimmer-card",children:[(0,_t.jsx)("div",{className:"shimmer-image"}),(0,_t.jsxs)("div",{className:"shimmer-content",children:[(0,_t.jsx)("div",{className:"shimmer-line"}),(0,_t.jsx)("div",{className:"shimmer-line short"})]})]},t))})})]});if(!n&&0===t.length){const e=i.trim()?`${a("home.no_results_for")} "${i}"`:a("home.no_menu");return(0,_t.jsxs)("div",{className:"menu-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:l()})}),(0,_t.jsx)("div",{className:"menu-empty",children:(0,_t.jsx)("p",{children:e})})]})}return(0,_t.jsxs)("div",{className:"menu-list",children:[(0,_t.jsxs)("div",{className:"section-header",children:[(0,_t.jsx)("h2",{className:"section-title",children:l()}),!i&&(0,_t.jsx)("button",{className:"see-all-button",onClick:()=>s("/menu"),children:(0,_t.jsx)("span",{children:a("home.see_all")})}),r&&(0,_t.jsx)("p",{className:"section-subtitle error-text",children:r})]}),(0,_t.jsx)("div",{className:"menu-horizontal-container",children:(0,_t.jsx)("div",{className:"menu-horizontal-scroll",children:t.map(e=>{return(0,_t.jsxs)("div",{className:"menu-card-horizontal",onClick:()=>(e=>{console.log("\ud83c\udf7d\ufe0f Navigating to food detail:",e.name),s(`/food/${e.id}`)})(e),children:[(0,_t.jsxs)("div",{className:"menu-image-horizontal",children:[(0,_t.jsx)("img",{src:e.getPrimaryImage()||xb(e.id||e.name),alt:e.name,onError:t=>{t.currentTarget.src=xb(e.id||e.name)}}),e.getFoodTypeBadges().length>0&&(0,_t.jsx)("div",{className:"food-type-badges",children:e.getFoodTypeBadges().map((e,t)=>(0,_t.jsx)("span",{className:"food-type-badge",children:e},t))})]}),(0,_t.jsxs)("div",{className:"menu-content-horizontal",children:[(()=>{const t=e.nameMap&&(e.nameMap[o]||e.nameMap.en)||e.name;return(0,_t.jsx)("h3",{className:"menu-name-horizontal",children:t})})(),(0,_t.jsx)("p",{className:"menu-price-horizontal",children:(t=e.price,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(t||0))}),(0,_t.jsxs)("div",{className:"menu-prep-time",children:[(0,_t.jsx)(hb,{className:"time-icon-small"}),(0,_t.jsx)("span",{children:e.getPreparationTimeText()})]})]})]},e.id);var t})})})]})},Pb="./assets/images/on-boarding-2.png";function Rb(){return Pb}const Db=[{id:"1",name:"Burger King",description:"American \u2022 Burger \u2022 Fast Food",rating:4.5,reviewCount:124,deliveryTime:"15-20 min",image:Pb,items:["Burgers","Fries","Chicken","Drinks"]},{id:"2",name:"Pizza Hut",description:"Italian \u2022 Pizza \u2022 Pasta",rating:4.2,reviewCount:89,deliveryTime:"20-25 min",image:Pb,items:["Pizza","Pasta","Garlic Bread","Desserts"]},{id:"3",name:"Subway",description:"American \u2022 Sandwich \u2022 Healthy",rating:4,reviewCount:67,deliveryTime:"10-15 min",image:Pb,items:["Subs","Salads","Cookies","Drinks"]}],Ob=t=>{let{onShopSelect:n}=t;const[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)(null),c=te(),{t:u}=Ut();(0,e.useEffect)(()=>{d()},[]);const d=async()=>{try{a(!0),l(null);const e=xt.getSelectedStadium();if(console.log("\ud83c\udfdf\ufe0f Loading shops for stadium:",e),e&&e.id){console.log("\ud83d\udd0d Fetching shops for stadium ID:",e.id);const t=jf(Kh(Rw,"shops"),Ff("stadiumId","==",e.id)),n=await np(t);console.log("\ud83d\udce6 Found shops in Firebase:",n.size);const r=[];n.forEach(e=>{try{var t,n,i,s;console.log("\ud83d\udcc4 Processing shop document:",e.id);const a=e.data();console.log("\ud83d\udccb Shop data:",a);const o={id:e.id,name:a.name||"",description:a.description||"",location:a.location||"",floor:a.floor||"",gate:a.gate||"",stadiumId:a.stadiumId||"",stadiumName:a.stadiumName||"",shopUserFcmToken:a.shopUserFcmToken||"",admins:a.admins||[],createdAt:(null===(t=a.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||a.createdAt||new Date,updatedAt:(null===(i=a.updatedAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||a.updatedAt||new Date};r.push(o),console.log("\u2705 Created shop object:",o.name)}catch(o){console.error("\u274c Error processing shop document",e.id,":",o)}}),i(r),console.log("\u2705 Loaded",r.length,"shops")}else console.log("\u26a0\ufe0f No stadium selected"),i([])}catch(e){console.error("\u274c Error loading shops:",e),l(u("home.error_fetch_shops")),i([])}finally{a(!1)}};if(s)return(0,_t.jsxs)("div",{className:"shop-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:u("home.shops")})}),(0,_t.jsx)("div",{className:"shop-shimmer",children:[1,2,3].map(e=>(0,_t.jsxs)("div",{className:"shop-card-shimmer",children:[(0,_t.jsx)("div",{className:"shop-image-shimmer"}),(0,_t.jsxs)("div",{className:"shop-content-shimmer",children:[(0,_t.jsx)("div",{className:"shop-name-shimmer"}),(0,_t.jsx)("div",{className:"shop-description-shimmer"}),(0,_t.jsx)("div",{className:"shop-details-shimmer"})]})]},e))})]});if(o)return(0,_t.jsxs)("div",{className:"shop-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:u("home.shops")})}),(0,_t.jsxs)("div",{className:"error-container",children:[(0,_t.jsx)("p",{className:"error-text",children:o}),(0,_t.jsx)("button",{className:"retry-button",onClick:d,children:u("home.retry")})]})]});if(0===r.length)return(0,_t.jsxs)("div",{className:"shop-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:u("home.shops")})}),(0,_t.jsx)("div",{className:"empty-container",children:(0,_t.jsx)("p",{className:"empty-text",children:u("home.no_shops")})})]});const h=(r.length>0?r:Db).map(e=>({...e,items:Array.isArray(e.items)?e.items:[]}));return(0,_t.jsxs)("div",{className:"shop-list",children:[(0,_t.jsx)("div",{className:"section-header",children:(0,_t.jsx)("h2",{className:"section-title",children:u("home.shops")})}),(0,_t.jsx)("div",{className:"restaurant-list",children:h.map(e=>(0,_t.jsxs)("div",{className:"restaurant-card",onClick:()=>(e=>{c(`/shop-menu/${e.id}`)})(e),children:[(0,_t.jsx)("div",{className:"restaurant-image",children:(0,_t.jsx)("img",{src:e.image||Rb(),alt:e.name,onError:e=>{e.currentTarget.src=Rb()}})}),(0,_t.jsxs)("div",{className:"restaurant-details",children:[(0,_t.jsx)("div",{className:"restaurant-header",children:(0,_t.jsx)("h3",{className:"restaurant-name",children:e.name})}),(0,_t.jsx)("p",{className:"restaurant-description",children:e.description}),(0,_t.jsx)("div",{className:"restaurant-footer",children:(0,_t.jsxs)("div",{className:"food-items",children:[e.items.slice(0,2).map((e,t)=>(0,_t.jsx)("span",{className:"food-tag",children:e},t)),e.items.length>2&&(0,_t.jsxs)("span",{className:"food-tag more",children:["+",e.items.length-2," ",u("home.more_suffix")]})]})})]})]},e.id))})]})};class Lb{constructor(e){var t,n,r,i,s,a,o,l;let{id:c="",docId:u=null,name:d="",nameMap:h={},description:f="",descriptionMap:p={},price:m=0,currency:g="USD",category:y="",images:v=[],isAvailable:w=!0,preparationTime:b=15,shopIds:E=[],shopId:_="",stadiumId:S="",customization:k={toppings:[],extras:[],sauces:[],sizes:[]},toppings:I=[],extras:T=[],sauces:C=[],sizes:N=[],allergens:x=[],nutritionalInfo:A={},foodType:P={halal:!1,kosher:!1,vegan:!1},createdAt:R=new Date,updatedAt:D=new Date,quantity:O=1}=e;this.id=c||u||"",this.docId=u||c||null,this.name=d,this.nameMap=h||{},this.description=f,this.descriptionMap=p||{},this.price=m,this.currency=g,this.category=y,this.images=v,this.isAvailable=w,this.preparationTime=b;const L=Array.isArray(E)?E:[E].filter(Boolean);_&&!L.includes(_)&&L.push(_),this.shopIds=L,this.shopId=_||L[0]||"",this.stadiumId=S,this.customization={toppings:null!==(t=null!==(n=null===k||void 0===k?void 0:k.toppings)&&void 0!==n?n:I)&&void 0!==t?t:[],extras:null!==(r=null!==(i=null===k||void 0===k?void 0:k.extras)&&void 0!==i?i:T)&&void 0!==r?r:[],sauces:null!==(s=null!==(a=null===k||void 0===k?void 0:k.sauces)&&void 0!==a?a:C)&&void 0!==s?s:[],sizes:null!==(o=null!==(l=null===k||void 0===k?void 0:k.sizes)&&void 0!==l?l:N)&&void 0!==o?o:[]},this.allergens=x,this.nutritionalInfo=A,this.foodType=P,this.createdAt=R,this.updatedAt=D,this.quantity=O}static fromMap(e,t){var n,r,i;return new Lb({id:e,docId:t.docId||e,name:t.name||(null===t||void 0===t||null===(n=t.nameMap)||void 0===n?void 0:n.en)||"",nameMap:t.nameMap||{},description:t.description||(null===t||void 0===t||null===(r=t.descriptionMap)||void 0===r?void 0:r.en)||"",descriptionMap:t.descriptionMap||{},price:null!==(i=t.price)&&void 0!==i?i:0,currency:t.currency||"USD",category:t.category||"",images:t.images||[],isAvailable:void 0===t.isAvailable||t.isAvailable,preparationTime:t.preparationTime||15,shopIds:t.shopIds||(t.shopId?[t.shopId]:[]),shopId:t.shopId||"",stadiumId:t.stadiumId||"",customization:t.customization||{toppings:t.toppings||[],extras:t.extras||[],sauces:t.sauces||[],sizes:t.sizes||[]},allergens:t.allergens||[],nutritionalInfo:t.nutritionalInfo||{},foodType:t.foodType||{halal:!1,kosher:!1,vegan:!1},createdAt:Lb.parseFirestoreDate(t.createdAt),updatedAt:Lb.parseFirestoreDate(t.updatedAt),quantity:t.quantity||1})}static fromFirestore(e){var t,n,r;return new Lb({id:e.id||e.docId||"",docId:e.docId||e.id||null,name:e.name||(null===e||void 0===e||null===(t=e.nameMap)||void 0===t?void 0:t.en)||"",nameMap:e.nameMap||{},description:e.description||(null===e||void 0===e||null===(n=e.descriptionMap)||void 0===n?void 0:n.en)||"",descriptionMap:e.descriptionMap||{},price:null!==(r=e.price)&&void 0!==r?r:0,currency:e.currency||"USD",category:e.category||"",images:e.images||[],isAvailable:void 0===e.isAvailable||e.isAvailable,preparationTime:e.preparationTime||15,shopIds:e.shopIds||(e.shopId?[e.shopId]:[]),shopId:e.shopId||"",stadiumId:e.stadiumId||"",customization:e.customization||{toppings:e.toppings||[],extras:e.extras||[],sauces:e.sauces||[],sizes:e.sizes||[]},allergens:e.allergens||[],nutritionalInfo:e.nutritionalInfo||{},foodType:e.foodType||{halal:!1,kosher:!1,vegan:!1},createdAt:Lb.parseFirestoreDate(e.createdAt),updatedAt:Lb.parseFirestoreDate(e.updatedAt)})}toMap(){var e,t,n,r;return{id:this.id,docId:this.docId,name:this.name,nameMap:this.nameMap,description:this.description,descriptionMap:this.descriptionMap,price:this.price,currency:this.currency,category:this.category,images:this.images,isAvailable:this.isAvailable,preparationTime:this.preparationTime,shopIds:this.shopIds,shopId:this.shopId,stadiumId:this.stadiumId,customization:this.customization,toppings:(null===(e=this.customization)||void 0===e?void 0:e.toppings)||[],extras:(null===(t=this.customization)||void 0===t?void 0:t.extras)||[],sauces:(null===(n=this.customization)||void 0===n?void 0:n.sauces)||[],sizes:(null===(r=this.customization)||void 0===r?void 0:r.sizes)||[],allergens:this.allergens,nutritionalInfo:this.nutritionalInfo,foodType:this.foodType,createdAt:this.createdAt,updatedAt:this.updatedAt,quantity:this.quantity}}toFirestore(){return{name:this.name,nameMap:this.nameMap,description:this.description,descriptionMap:this.descriptionMap,price:this.price,category:this.category,images:this.images,isAvailable:this.isAvailable,preparationTime:this.preparationTime,shopIds:this.shopIds,stadiumId:this.stadiumId,customization:this.customization,allergens:this.allergens,nutritionalInfo:this.nutritionalInfo,foodType:this.foodType,currency:this.currency,docId:this.docId,createdAt:this.createdAt instanceof Date?us.fromDate(this.createdAt):this.createdAt,updatedAt:this.updatedAt instanceof Date?us.fromDate(this.updatedAt):this.updatedAt}}getFormattedPrice(){const e=(this.currency||"USD").toUpperCase();return`${"ILS"===e?"\u20aa":"EUR"===e?"\u20ac":"$"}${this.price.toFixed(2)}`}getPrimaryImage(){return this.images.length>0?this.images[0]:"/api/placeholder/200/150"}getPreparationTimeText(){return`${this.preparationTime} min`}hasAllergens(){return this.allergens.length>0}getAllergensText(){return this.allergens.join(", ")}isFoodType(e){return this.foodType[e]||!1}getFoodTypeBadges(){const e=[];return this.foodType.halal&&e.push("Halal"),this.foodType.kosher&&e.push("Kosher"),this.foodType.vegan&&e.push("Vegan"),e}get available(){return this.isAvailable}updateQuantity(e){return new Lb({...this.toMap(),quantity:Math.max(0,e)})}getTotalPrice(){return this.price*this.quantity}getFormattedTotalPrice(){const e=(this.currency||"USD").toUpperCase();return`${"ILS"===e?"\u20aa":"EUR"===e?"\u20ac":"$"}${this.getTotalPrice().toFixed(2)}`}static parseFirestoreDate(e){return e?"function"===typeof(null===e||void 0===e?void 0:e.toDate)?e.toDate():e instanceof Date?e:"string"===typeof e||"number"===typeof e?new Date(e):new Date:new Date}}const jb=Lb;const Mb=new class{constructor(){this.collectionName="menuItems"}async getMenuItemsByShop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{if(!e)return{success:!1,error:"Invalid shopId"};const n=jf(Kh(Rw,"menuItems"),Ff("shopIds","array-contains",e),$f(t)),r=await np(n),i=[];return r.forEach(e=>{try{i.push(jb.fromMap(e.id,e.data()))}catch(K_){console.error("Error mapping food",e.id,K_)}}),{success:!0,foods:i}}catch(G_){return console.error("Error fetching shop menu:",G_),{success:!1,error:"Failed to fetch shop menu"}}}async getStadiumMenu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{console.log("Fetching menu for stadium:",e);const n=jf(Kh(Rw,"menuItems"),Ff("stadiumId","==",e),$f(t)),r=await np(n);console.log("Found menu items:",r.size);const i=[];return r.forEach(e=>{try{console.log("Processing document:",e.id);const t=e.data();console.log("Document data:",t),i.push(jb.fromMap(e.id,t))}catch(G_){console.error("Error processing document",e.id,":",G_)}}),i.sort((e,t)=>{var n,r,i,s;const a=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||e.createdAt||new Date(0);return((null===(i=t.createdAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||t.createdAt||new Date(0))-a}),console.log("Returning",i.length,"menu items"),{success:!0,foods:i}}catch(G_){return console.error("Error fetching stadium menu:",G_),{success:!1,error:"Failed to fetch menu items"}}}async getAllMenuItems(){try{return{success:!0,foods:this.getMockMenuItems()}}catch(G_){return console.error("Error fetching all menu items:",G_),{success:!1,error:"Failed to fetch menu items"}}}async getMenuItemsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let n=this.getMockMenuItems();return"all"!==e&&(n=n.filter(t=>t.category.toLowerCase()===e.toLowerCase())),t&&(n=n.filter(e=>e.stadiumId===t)),{success:!0,foods:n}}catch(G_){return console.error("Error fetching menu items by category:",G_),{success:!1,error:"Failed to fetch menu items"}}}async searchMenuItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let n=this.getMockMenuItems();const r=e.toLowerCase();return n=n.filter(e=>e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)),t&&(n=n.filter(e=>e.stadiumId===t)),{success:!0,foods:n}}catch(G_){return console.error("Error searching menu items:",G_),{success:!1,error:"Failed to search menu items"}}}};class Fb{constructor(e){let{id:t,allergens:n=[],category:r="",createdAt:i,customization:s={},description:a="",extras:o=[],images:l=[],isAvailable:c=!0,active:u=!0,name:d="",nutritionalInfo:h={},preparationTime:f=15,price:p=0,discountPercentage:m=0,sauces:g=[],shopId:y="",stadiumId:v="",sizes:w=[],toppings:b=[],updatedAt:E,foodType:_={halal:!1,kosher:!1,vegan:!1},quantity:S=1}=e;this.id=t,this.allergens=n,this.category=r,this.createdAt=i,this.customization=s,this.description=a,this.extras=o,this.images=l,this.isAvailable=c,this.active=u,this.name=d,this.nutritionalInfo=h,this.preparationTime=f,this.price=p,this.discountPercentage=m,this.sauces=g,this.shopId=y,this.stadiumId=v,this.sizes=w,this.toppings=b,this.updatedAt=E,this.foodType=_,this.quantity=S}static fromMap(e,t){var n,r,i,s;return new Fb({id:e,allergens:t.allergens||[],category:t.category||"",createdAt:(null===(n=t.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||t.createdAt||new Date,customization:t.customization||{},description:t.description||"",extras:t.extras||[],images:t.images||[],isAvailable:void 0===t.isAvailable||t.isAvailable,active:void 0===t.active||t.active,name:t.name||"",nutritionalInfo:t.nutritionalInfo||{},preparationTime:t.preparationTime||15,price:parseFloat(t.price)||0,discountPercentage:parseFloat(t.discountPercentage)||0,sauces:t.sauces||[],shopId:t.shopId||"",stadiumId:t.stadiumId||"",sizes:t.sizes||[],toppings:t.toppings||[],updatedAt:(null===(i=t.updatedAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||t.updatedAt||new Date,foodType:t.foodType||{halal:!1,kosher:!1,vegan:!1},quantity:t.quantity||1})}toMap(){return{id:this.id,allergens:this.allergens,category:this.category,createdAt:this.createdAt,customization:this.customization,description:this.description,extras:this.extras,images:this.images,isAvailable:this.isAvailable,active:this.active,name:this.name,nutritionalInfo:this.nutritionalInfo,preparationTime:this.preparationTime,price:this.price,discountPercentage:this.discountPercentage,sauces:this.sauces,shopId:this.shopId,stadiumId:this.stadiumId,sizes:this.sizes,toppings:this.toppings,updatedAt:this.updatedAt,foodType:this.foodType,quantity:this.quantity}}getFormattedPrice(){return`\u20aa${this.price.toFixed(2)}`}getDiscountedPrice(){return this.price*(1-this.discountPercentage/100)}getFormattedDiscountedPrice(){return`\u20aa${this.getDiscountedPrice().toFixed(2)}`}getPrimaryImage(){return this.images&&this.images.length>0?this.images[0]:"/api/placeholder/200/150"}hasValidDiscount(){return this.discountPercentage>0&&this.active&&this.isAvailable}getFoodTypeBadges(){const e=[];return this.foodType.halal&&e.push("Halal"),this.foodType.kosher&&e.push("Kosher"),this.foodType.vegan&&e.push("Vegan"),e}getDiscountBadgeText(){return`${Math.round(this.discountPercentage)}% OFF`}}const Ub=Fb;const zb=new class{constructor(){this.collectionName="offers"}async getStadiumOffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{console.log("\ud83d\udd0d Fetching offers for stadium:",e);const n=jf(Kh(Rw,"offers"),Ff("stadiumId","==",e),$f(t)),r=await np(n);console.log("\ud83d\udce6 Found offers in Firebase:",r.size);const i=[];return r.forEach(e=>{try{console.log("\ud83d\udcc4 Processing offer document:",e.id);const t=e.data();console.log("\ud83d\udccb Offer data:",t);const n=Ub.fromMap(e.id,t);console.log("\u2705 Created offer object:",n),i.push(n)}catch(G_){console.error("\u274c Error processing offer document",e.id,":",G_)}}),i.sort((e,t)=>{var n,r,i,s;const a=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||e.createdAt||new Date(0);return((null===(i=t.createdAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||t.createdAt||new Date(0))-a}),console.log("Returning",i.length,"valid offers"),{success:!0,offers:i}}catch(G_){return console.error("Error fetching stadium offers:",G_),{success:!1,error:"Failed to fetch offers"}}}async getAllOffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{const t=jf(Kh(Rw,"offers"),Ff("active","==",!0),Vf("createdAt","desc"),$f(e)),n=await np(t),r=[];return n.forEach(e=>{try{const t=e.data(),n=Ub.fromMap(e.id,t);n.hasValidDiscount()&&r.push(n)}catch(G_){console.error("Error processing offer document",e.id,":",G_)}}),{success:!0,offers:r}}catch(G_){return console.error("Error fetching all offers:",G_),{success:!1,error:"Failed to fetch offers"}}}async searchOffers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let n=[];if(t){const e=await this.getStadiumOffers(t,50);n=e.success?e.offers:[]}else{const e=await this.getAllOffers(50);n=e.success?e.offers:[]}return e&&e.trim()&&(n=n.filter(t=>{var n,r;return t.name.toLowerCase().includes(e.toLowerCase())||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(r=t.category)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase()))})),{success:!0,offers:n}}catch(G_){return console.error("Error searching offers:",G_),{success:!1,error:"Failed to search offers"}}}};const Vb=function(){const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)("all"),[m,g]=(0,e.useState)(!0),[y,v]=(0,e.useState)(!0),[w,b]=(0,e.useState)(null),[E,_]=(0,e.useState)(null);(0,e.useEffect)(()=>{S(),k()},[]),(0,e.useEffect)(()=>{I(),T()},[c,t,s,d,f]);const S=async()=>{try{g(!0),b(null);const e=xt.getSelectedStadium();let t;t=e&&e.id?await Mb.getStadiumMenu(e.id,20):await Mb.getAllMenuItems(),t.success?n(t.foods):(b(t.error||"Failed to load menu items"),n([]))}catch(e){console.error("Error loading menu items:",e),b("Failed to load menu items"),n([])}finally{g(!1)}},k=async()=>{try{v(!0),_(null);const e=xt.getSelectedStadium();let t;console.log("\ud83c\udfdf\ufe0f Selected stadium for offers:",e),e&&e.id?(console.log("\ud83d\udd0d Fetching offers for stadium ID:",e.id),t=await zb.getStadiumOffers(e.id,10)):(console.log("\ud83d\udd0d No stadium selected, fetching all offers"),t=await zb.getAllOffers()),t.success?a(t.offers):(_(t.error||"Failed to load offers"),a([]))}catch(e){console.error("Error loading offers:",e),_("Failed to load offers"),a([])}finally{v(!1)}},I=()=>{let e=t;if(d&&(e=e.filter(e=>Array.isArray(e.shopIds)&&e.shopIds.includes(d))),f&&"all"!==f&&(e=e.filter(e=>(e.category||"").toLowerCase()===String(f).toLowerCase())),c.trim()){const t=c.toLowerCase();e=e.filter(e=>{var n,r,i;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(i=e.category)||void 0===i?void 0:i.toLowerCase().includes(t))||e.nameMap&&Object.values(e.nameMap).some(e=>String(e).toLowerCase().includes(t))||e.descriptionMap&&Object.values(e.descriptionMap).some(e=>String(e).toLowerCase().includes(t))})}i(e)},T=()=>{if(c.trim()){const e=s.filter(e=>{var t,n;return e.name.toLowerCase().includes(c.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.category)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))});l(e)}else l(s)};return(0,_t.jsxs)("div",{className:"home-page",children:[(0,_t.jsx)(Tb,{}),(0,_t.jsxs)("div",{className:"home-content",children:[(0,_t.jsx)(Cb,{selectedCategory:f,onSelect:e=>p(e)}),(0,_t.jsx)(Ab,{menuItems:r,loading:m,error:w,searchTerm:c}),(0,_t.jsx)(Ob,{onShopSelect:e=>{h((null===e||void 0===e?void 0:e.id)||null)}})]})]})},Bb={PENDING:0,PREPARING:1,DELIVERING:2,DELIVERED:3,CANCELED:4,toString:e=>{switch(e){case Bb.PENDING:return"Pending";case Bb.PREPARING:return"Preparing";case Bb.DELIVERING:return"Delivering";case Bb.DELIVERED:return"Delivered";case Bb.CANCELED:return"Canceled";default:return"Pending"}},getColor:e=>{switch(e){case Bb.PENDING:return"#FF9800";case Bb.PREPARING:return"#2196F3";case Bb.DELIVERING:return"#9C27B0";case Bb.DELIVERED:return"#4CAF50";case Bb.CANCELED:return"#F44336";default:return"#FF9800"}}};class $b{constructor(e){let{cart:t=[],subtotal:n=0,deliveryFee:r=0,discount:i=0,total:s=0,tipAmount:a=0,userInfo:o={},stadiumId:l="",shopId:c="",orderId:u="",orderCode:d="",deliveryUserId:h=null,status:f=Bb.PENDING,createdAt:p=null,deliveryTime:m=null,seatInfo:g={},id:y=null,tipPercentage:v=0,isTipAdded:w=!1,customerLocation:b=null,location:E=null,updatedAt:_=null}=e;this.cart=t,this.subtotal=n,this.deliveryFee=r,this.discount=i,this.total=s,this.tipAmount=a,this.userInfo=o,this.stadiumId=l,this.shopId=c,this.orderId=u,this.orderCode=d,this.deliveryUserId=h,this.status=f,this.createdAt=p,this.deliveryTime=m,this.seatInfo=g,this.id=y,this.tipPercentage=v,this.isTipAdded=w,this.customerLocation=b,this.location=E,this.updatedAt=_}static fromMap(e,t){return new $b({id:e,cart:t.cart||[],subtotal:parseFloat(t.subtotal||0),deliveryFee:parseFloat(t.deliveryFee||0),discount:parseFloat(t.discount||0),total:parseFloat(t.total||0),tipAmount:parseFloat(t.tipAmount||0),tipPercentage:parseFloat(t.tipPercentage||0),isTipAdded:!!t.isTipAdded,userInfo:t.userInfo||{},stadiumId:t.stadiumId||"",shopId:t.shopId||"",orderId:t.orderId||"",orderCode:t.orderCode||"",deliveryUserId:t.deliveryUserId||null,status:t.status||Bb.PENDING,createdAt:t.createdAt,updatedAt:t.updatedAt,deliveryTime:t.deliveryTime,seatInfo:t.seatInfo||{},customerLocation:t.customerLocation||null,location:t.location||null})}toMap(){var e,t,n;return{cart:this.cart.map(e=>{const t=e.categoryId||e.category||"",n=(()=>{const t=e.descriptionMap||{},n="string"===typeof e.description?e.description:"";return{en:"string"===typeof t.en&&t.en.trim().length>0?t.en:n,he:"string"===typeof t.he&&t.he.trim().length>0?t.he:n}})(),r=(()=>{const t=e.nameMap||{};if(t&&Object.keys(t).length>0)return t;const n=e.name||"";return{en:t.en||n,he:t.he||n}})();return{id:e.id,docId:e.docId||e.id,allergens:e.allergens||[],category:t,createdAt:e.createdAt instanceof Date?e.createdAt:e.createdAt&&e.createdAt.toDate?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):new Date,customization:e.customization||{},description:e.description||"",descriptionMap:n,extras:e.extras||[],images:e.images||[],isAvailable:void 0===e.isAvailable||e.isAvailable,name:e.name||"",nameMap:r,nutritionalInfo:e.nutritionalInfo||{},preparationTime:e.preparationTime||15,price:parseFloat((e.price||0).toFixed(2)),currency:e.currency||"ILS",sauces:e.sauces||[],shopIds:Array.isArray(e.shopIds)?[...e.shopIds]:e.shopId?[e.shopId]:[],shopId:e.shopId||"",stadiumId:e.stadiumId||"",sizes:e.sizes||[],toppings:e.toppings||[],updatedAt:e.updatedAt instanceof Date?e.updatedAt:e.updatedAt&&e.updatedAt.toDate?e.updatedAt.toDate():e.updatedAt?new Date(e.updatedAt):new Date,foodType:e.foodType||{halal:!1,kosher:!1,vegan:!1},quantity:e.quantity||1,originalPrice:e.originalPrice||e.price||0,discountedPrice:e.discountedPrice||null}}),subtotal:parseFloat(this.subtotal.toFixed(2)),deliveryFee:parseFloat(this.deliveryFee.toFixed(2)),discount:parseFloat(this.discount.toFixed(2)),total:parseFloat(this.total.toFixed(2)),tipAmount:parseFloat(this.tipAmount.toFixed(2)),tipPercentage:parseFloat((this.tipPercentage||0).toFixed(2)),isTipAdded:!!this.isTipAdded,userInfo:this.userInfo,stadiumId:this.stadiumId,shopId:this.shopId,orderId:this.orderId,orderCode:this.orderCode,deliveryUserId:this.deliveryUserId,status:this.status,createdAt:this.createdAt?this.createdAt instanceof Date?us.fromDate(this.createdAt):"function"===typeof(null===(e=this.createdAt)||void 0===e?void 0:e.toDate)?this.createdAt:us.fromDate(new Date(this.createdAt)):us.fromDate(new Date),updatedAt:this.updatedAt?this.updatedAt instanceof Date?us.fromDate(this.updatedAt):"function"===typeof(null===(t=this.updatedAt)||void 0===t?void 0:t.toDate)?this.updatedAt:us.fromDate(new Date(this.updatedAt)):us.fromDate(new Date),deliveryTime:this.deliveryTime?this.deliveryTime instanceof Date?us.fromDate(this.deliveryTime):"function"===typeof(null===(n=this.deliveryTime)||void 0===n?void 0:n.toDate)?this.deliveryTime:us.fromDate(new Date(this.deliveryTime)):null,seatInfo:this.seatInfo,customerLocation:(()=>{const e=this.customerLocation;return e?e instanceof af?e:"number"===typeof(null===e||void 0===e?void 0:e.lat)&&"number"===typeof(null===e||void 0===e?void 0:e.lng)?new af(e.lat,e.lng):"number"===typeof(null===e||void 0===e?void 0:e.latitude)&&"number"===typeof(null===e||void 0===e?void 0:e.longitude)?new af(e.latitude,e.longitude):Array.isArray(e)&&2===e.length?new af(Number(e[0]),Number(e[1])):e:null})(),location:(()=>{const e=this.location;return e?e instanceof af?e:"number"===typeof(null===e||void 0===e?void 0:e.lat)&&"number"===typeof(null===e||void 0===e?void 0:e.lng)?new af(e.lat,e.lng):"number"===typeof(null===e||void 0===e?void 0:e.latitude)&&"number"===typeof(null===e||void 0===e?void 0:e.longitude)?new af(e.latitude,e.longitude):Array.isArray(e)&&2===e.length?new af(Number(e[0]),Number(e[1])):e:null})()}}static createFromCart(e){let{cartItems:t,subtotal:n,deliveryFee:r,discount:i,tipAmount:s,tipPercentage:a=0,userData:o,seatInfo:l,stadiumId:c,shopId:u,customerLocation:d=null,location:h=null,deliveryUserId:f=null}=e;const p=n+r+s-i,m=Date.now().toString(),g=new Date,y=Math.floor(1e5+9e5*Math.random()).toString();return new $b({cart:[...t],subtotal:n,deliveryFee:r,discount:i,total:p,tipAmount:s,tipPercentage:a,isTipAdded:s>0,userInfo:{userEmail:o.email||"",userName:o.firstName||"",userPhoneNo:o.phone||"",userId:o.id||""},stadiumId:c,shopId:u,orderId:m,orderCode:y,deliveryUserId:f,status:Bb.PENDING,createdAt:g,updatedAt:new Date,deliveryTime:null,seatInfo:{row:l.row||"",seatNo:l.seatNo||"",section:l.section||"",seatDetails:l.seatDetails||"",area:l.area||"",entrance:l.entrance||"",stand:l.stand||"",ticketImage:l.ticketImage||""},customerLocation:d,location:h})}getStatusString(){return Bb.toString(this.status)}getStatusColor(){return Bb.getColor(this.status)}isActive(){return this.status!==Bb.DELIVERED&&this.status!==Bb.CANCELED}getFormattedDate(){if(!this.createdAt)return"";let e;return this.createdAt instanceof Date?e=this.createdAt:this.createdAt&&"function"===typeof this.createdAt.toDate?e=this.createdAt.toDate():"number"!==typeof this.createdAt&&"string"!==typeof this.createdAt||(e=new Date(this.createdAt)),!e||isNaN(e.getTime())?"":e.toLocaleDateString()+" "+e.toLocaleTimeString()}getSummary(){return{orderId:this.orderId,total:this.total,itemCount:this.cart.reduce((e,t)=>e+(t.quantity||1),0),status:this.getStatusString(),date:this.getFormattedDate(),shopId:this.shopId,stadiumId:this.stadiumId}}}const Hb=new class{constructor(){this.collectionName="orders"}async createOrder(e){try{console.log("\ud83d\udce6 Creating order in Firebase...",e);const t=e.toMap(),n={...t};t.customerLocation&&"object"===typeof t.customerLocation&&null!=t.customerLocation.latitude&&null!=t.customerLocation.longitude&&(n.customerLocation=new af(t.customerLocation.latitude,t.customerLocation.longitude)),t.location&&"object"===typeof t.location&&null!=t.location.latitude&&null!=t.location.longitude&&(n.location=new af(t.location.latitude,t.location.longitude));const r={...n,createdAt:us.fromDate(e.createdAt),updatedAt:us.fromDate(e.updatedAt||new Date),deliveryTime:e.deliveryTime?us.fromDate(e.deliveryTime):null},i=await function(e,t){const n=is(e.firestore,Zh),r=Gh(e),i=Gf(e.converter,t);return sp(n,[mf(pf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,El.exists(!1))]).then(()=>r)}(Kh(Rw,this.collectionName),r);console.log("\u2705 Order created successfully with ID:",i.id);return new $b({...e,id:i.id})}catch(G_){throw console.error("\u274c Error creating order:",G_),new Error(`Failed to create order: ${G_.message}`)}}async fetchOrdersForUser(e){try{if(console.log("\ud83d\udccb Fetching orders for user:",e),!e)throw new Error("User ID is required to fetch orders");const t=jf(Kh(Rw,this.collectionName),Ff("userInfo.userId","==",e),Vf("createdAt","desc")),n=await np(t),r=[];return n.forEach(e=>{const t=e.data(),n=$b.fromMap(e.id,t);r.push(n)}),console.log("\u2705 Fetched orders:",r.length),r}catch(G_){throw console.error("\u274c Error fetching orders:",G_),new Error(`Failed to fetch orders: ${G_.message}`)}}streamOrdersForUser(e,t){try{if(console.log("\ud83d\udd04 Setting up real-time orders stream for user:",e),!e)throw new Error("User ID is required to stream orders");const n=Kh(Rw,this.collectionName),r=ip(jf(n,Ff("userInfo.userId","==",e),Vf("createdAt","desc")),e=>{const n=[];e.forEach(e=>{const t=e.data(),r=$b.fromMap(e.id,t);n.push(r)}),console.log("\ud83d\udd04 Orders updated:",n.length),t(n)},e=>{console.error("\u274c Error in orders stream:",e),t([],e)});return r}catch(G_){throw console.error("\u274c Error setting up orders stream:",G_),new Error(`Failed to set up orders stream: ${G_.message}`)}}async fetchAllOrders(){try{console.log("\ud83d\udccb Fetching all orders...");const e=jf(Kh(Rw,this.collectionName),Vf("createdAt","desc")),t=await np(e),n=[];return t.forEach(e=>{const t=e.data(),r=$b.fromMap(e.id,t);n.push(r)}),console.log("\u2705 Fetched all orders:",n.length),n}catch(G_){throw console.error("\u274c Error fetching all orders:",G_),new Error(`Failed to fetch all orders: ${G_.message}`)}}async fetchOrdersForShop(e){try{if(console.log("\ud83d\udccb Fetching orders for shop:",e),!e)throw new Error("Shop ID is required to fetch orders");const t=jf(Kh(Rw,this.collectionName),Ff("shopId","==",e),Vf("createdAt","desc")),n=await np(t),r=[];return n.forEach(e=>{const t=e.data(),n=$b.fromMap(e.id,t);r.push(n)}),console.log("\u2705 Fetched shop orders:",r.length),r}catch(G_){throw console.error("\u274c Error fetching shop orders:",G_),new Error(`Failed to fetch shop orders: ${G_.message}`)}}async sendNotificationToShop(e){try{console.log("\ud83d\udd14 Sending notification to shop for order:",e.orderId),console.log("\ud83d\udcdd Notification logic not implemented yet")}catch(G_){console.error("\u274c Error sending shop notification:",G_)}}calculateOrderTotals(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=e.reduce((e,t)=>e+t.price*t.quantity,0),s=i+t+n-r;return{subtotal:Math.round(100*i)/100,deliveryFee:Math.round(100*t)/100,tipAmount:Math.round(100*n)/100,discount:Math.round(100*r)/100,total:Math.round(100*s)/100}}},qb=Hb,Wb=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)("active"),[c,u]=(0,e.useState)({}),d=te(),{t:h}=Ut();(0,e.useEffect)(()=>{const e=Nt.getUserData();if(!e||!e.id)return n([]),void i(!1);i(!0);const t=qb.streamOrdersForUser(e.id,async(e,t)=>{if(t)return a(h("orders.error_loading")),n([]),void i(!1);try{const t=[...new Set(e.map(e=>e.shopId).filter(Boolean))],r={};for(const e of t)r[e]=await f(e);u(r),n(e)}catch(K_){console.log("Shop details fetch error:",K_)}finally{i(!1)}});return()=>{"function"===typeof t&&t()}},[]);const f=async e=>{try{const s=Gh(Rw,"shops",e),a=await ep(s);if(a.exists()){var t,n,r,i;const e=a.data();return{id:a.id,name:e.name||"Unknown Shop",description:e.description||"",location:e.location||"",floor:e.floor||"",gate:e.gate||"",stadiumId:e.stadiumId||"",stadiumName:e.stadiumName||"",shopUserFcmToken:e.shopUserFcmToken||"",admins:e.admins||[],createdAt:(null===(t=e.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||e.createdAt||new Date,updatedAt:(null===(r=e.updatedAt)||void 0===r||null===(i=r.toDate)||void 0===i?void 0:i.call(r))||e.updatedAt||new Date}}return console.log("\u274c Shop not found:",e),{name:"Unknown Shop",id:e}}catch(s){return console.error("\u274c Error fetching shop:",e,s),{name:"Unknown Shop",id:e}}},p=e=>{switch(e){case Bb.PENDING:return h("orders.pending");case Bb.PREPARING:return h("orders.preparing");case Bb.DELIVERING:return h("orders.delivering");case Bb.DELIVERED:return h("orders.delivered");case Bb.CANCELED:return h("orders.cancelled");default:return h("orders.pending")}},m=e=>{try{const t=Array.isArray(null===e||void 0===e?void 0:e.cart)?e.cart[0]:null,n=(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.title);return n||(null!==e&&void 0!==e&&e.shopId&&c[e.shopId]?c[e.shopId].name:h("orders.order"))}catch(t){return h("orders.order")}},g=t.filter(e=>"active"===o?[Bb.PENDING,Bb.PREPARING,Bb.DELIVERING].includes(e.status):"completed"===o?e.status===Bb.DELIVERED:"cancelled"!==o||e.status===Bb.CANCELED);return(0,_t.jsx)("div",{className:"orders-screen",children:(0,_t.jsxs)("div",{className:"orders-container",children:[(0,_t.jsxs)("div",{className:"orders-header",children:[(0,_t.jsx)("h1",{className:"orders-title",children:h("orders.my_orders")}),(0,_t.jsx)("p",{className:"orders-subtitle",children:h("orders.subtitle")})]}),(0,_t.jsxs)("div",{className:"orders-tabs",children:[(0,_t.jsx)("button",{className:"tab-button "+("active"===o?"active":""),onClick:()=>l("active"),children:h("orders.active")}),(0,_t.jsx)("button",{className:"tab-button "+("completed"===o?"active":""),onClick:()=>l("completed"),children:h("orders.completed")})]}),(0,_t.jsx)("div",{className:"orders-list",children:r?(0,_t.jsxs)("div",{className:"loading-state",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:h("orders.loading")})]}):s?(0,_t.jsxs)("div",{className:"error-state",children:[(0,_t.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,_t.jsx)("h3",{children:h("orders.error_loading")}),(0,_t.jsx)("p",{children:s}),(0,_t.jsx)("button",{className:"retry-button",onClick:()=>window.location.reload(),children:h("orders.try_again")})]}):0===g.length?(0,_t.jsxs)("div",{className:"empty-state",children:[(0,_t.jsx)("div",{className:"empty-icon",children:"\ud83c\udf7d\ufe0f"}),(0,_t.jsx)("h3",{children:h("orders.no_orders")}),(0,_t.jsx)("p",{children:h("orders.empty_hint")})]}):g.map(e=>{return(0,_t.jsxs)("div",{className:"order-card",children:[(0,_t.jsxs)("div",{className:"order-top",children:[(0,_t.jsxs)("div",{className:"order-number",children:[h("orders.order")," #",e.orderId]}),(0,_t.jsx)("span",{className:"status-badge "+(t=e.status,[Bb.PENDING,Bb.PREPARING,Bb.DELIVERING].includes(t)?"status-active":t===Bb.DELIVERED?"status-completed":t===Bb.CANCELED?"status-cancelled":"status-active"),children:p(e.status)})]}),(0,_t.jsxs)("div",{className:"order-restaurant",children:[(0,_t.jsx)("span",{className:"shop-avatar","aria-hidden":!0,children:"\ud83c\udf54"}),(0,_t.jsx)("span",{className:"shop-name",children:m(e)})]}),(0,_t.jsxs)("div",{className:"order-meta",children:[(0,_t.jsxs)("div",{className:"order-meta-left",children:[(0,_t.jsxs)("span",{className:"meta-item",children:[Array.isArray(e.cart)?e.cart.reduce((e,t)=>e+(t.quantity||1),0):0," ",h("orders.items")]}),(0,_t.jsx)("span",{className:"meta-dot",children:"\u2022"}),(0,_t.jsx)("span",{className:"meta-item",children:e.getFormattedDate()})]}),(0,_t.jsxs)("div",{className:"order-price",children:["\u20aa",e.total.toFixed(2)]})]}),e.status!==Bb.DELIVERED&&e.status!==Bb.CANCELED&&(0,_t.jsx)("div",{className:"order-actions",children:(0,_t.jsx)("button",{className:"track-button",onClick:()=>(e=>{const t=e.id;t&&d(`/order/${t}`)})(e),children:h("orders.track")})})]},e.id||e.orderId);var t})})]})})},Kb="food_munch_cart",Gb={getCartItems:()=>{try{const e=localStorage.getItem(Kb);if(!e)return console.log("\ud83d\udce6 No cart data found, returning empty array"),[];const t=JSON.parse(e);let n;return Array.isArray(t)?n=t:t&&Array.isArray(t.items)?n=t.items:(console.warn("\u26a0\ufe0f Invalid cart data format, returning empty array"),n=[]),console.log("\ud83d\udce6 Retrieved cart from storage:",n.length,"items"),n}catch(G_){return console.error("\u274c Error getting cart items:",G_),[]}},getCart:()=>Gb.getCartItems(),addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{if(console.log("\ud83d\uded2 Adding to cart:",e.name,"Quantity:",t),!e||!e.id||!e.name)return console.error("\u274c Invalid food object:",e),{success:!1,message:"Invalid food item"};let n=Gb.getCartItems();Array.isArray(n)||(console.warn("\u26a0\ufe0f Cart is not an array, initializing empty cart"),n=[]);const r=n.findIndex(t=>t.id===e.id);if(r>=0)n[r].quantity+=t,console.log("\ud83d\udcc8 Updated existing item quantity:",n[r].quantity);else{const r=e.discountPercentage&&e.discountPercentage>0?e.price*(1-e.discountPercentage/100):e.price,i={id:e.id,name:e.name,nameMap:e.nameMap||{},price:r,originalPrice:e.price,discountPercentage:e.discountPercentage||0,images:e.images||[],quantity:t,shopId:e.shopId||(Array.isArray(e.shopIds)&&e.shopIds.length>0?e.shopIds[0]:""),shopIds:Array.isArray(e.shopIds)?[...e.shopIds]:e.shopId?[e.shopId]:[],stadiumId:e.stadiumId,preparationTime:e.preparationTime||15,description:e.description||"",descriptionMap:e.descriptionMap||{},allergens:e.allergens||[],category:e.category||"",currency:e.currency||"ILS",addedAt:(new Date).toISOString()};n.push(i),console.log("\u2705 Added new item to cart:",i.name)}return localStorage.setItem(Kb,JSON.stringify(n)),console.log("\ud83d\udcbe Cart saved to storage. Total items:",n.length),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cartItems:n,totalItems:Gb.getTotalItems(),totalPrice:Gb.getTotalPrice()}})),{success:!0,cartItems:n,totalItems:Gb.getTotalItems(),message:`${e.name} added to cart!`}}catch(G_){return console.error("\u274c Error adding to cart:",G_),{success:!1,message:"Failed to add item to cart"}}},removeFromCart:e=>{try{const t=Gb.getCartItems(),n=t.find(t=>t.id===e);if(n){console.log("\ud83d\uddd1\ufe0f Removing item from cart:",n.name);const r=t.filter(t=>t.id!==e);return localStorage.setItem(Kb,JSON.stringify(r)),console.log("\ud83d\udcbe Cart updated. Remaining items:",r.length),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cartItems:r,totalItems:Gb.getTotalItems(),totalPrice:Gb.getTotalPrice()}})),r}return console.log("\u26a0\ufe0f Item not found in cart:",e),t}catch(G_){return console.error("\u274c Error removing from cart:",G_),Gb.getCartItems()}},updateQuantity:(e,t)=>{try{const n=Gb.getCartItems(),r=n.findIndex(t=>t.id===e);if(r>=0){if(t<=0)return Gb.removeFromCart(e);n[r].quantity=t,localStorage.setItem(Kb,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cartItems:n,totalItems:Gb.getTotalItems(),totalPrice:Gb.getTotalPrice()}})),console.log("\ud83d\udcca Updated quantity for:",e,"New quantity:",t)}return n}catch(G_){return console.error("\u274c Error updating quantity:",G_),Gb.getCartItems()}},getTotalItems:()=>{try{return Gb.getCartItems().reduce((e,t)=>e+t.quantity,0)}catch(G_){return console.error("\u274c Error getting total items:",G_),0}},getTotalPrice:()=>{try{return Gb.getCartItems().reduce((e,t)=>e+t.price*t.quantity,0)}catch(G_){return console.error("\u274c Error getting total price:",G_),0}},clearCart:()=>{try{return localStorage.removeItem(Kb),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{cartItems:[],totalItems:0,totalPrice:0}})),console.log("\ud83e\uddf9 Cart cleared"),[]}catch(G_){return console.error("\u274c Error clearing cart:",G_),[]}},isInCart:e=>{try{return Gb.getCartItems().some(t=>t.id===e)}catch(G_){return console.error("\u274c Error checking if item in cart:",G_),!1}},getItemQuantity:e=>{try{const t=Gb.getCartItems().find(t=>t.id===e);return t?t.quantity:0}catch(G_){return console.error("\u274c Error getting item quantity:",G_),0}}},Qb=t=>{let{message:n,type:r="success",duration:i=3e3,onClose:s}=t;const[a,o]=(0,e.useState)(!0);(0,e.useEffect)(()=>{const e=setTimeout(()=>{o(!1),setTimeout(()=>{s&&s()},300)},i);return()=>clearTimeout(e)},[i,s]);return(0,_t.jsxs)("div",{className:`toast ${r} ${a?"show":"hide"}`,children:[(()=>{switch(r){case"success":default:return(0,_t.jsx)(eb,{className:"toast-icon success"});case"error":return(0,_t.jsx)(cb,{className:"toast-icon error"});case"info":return(0,_t.jsx)(sb,{className:"toast-icon info"})}})(),(0,_t.jsx)("span",{className:"toast-message",children:n}),(0,_t.jsx)("button",{className:"toast-close",onClick:()=>{o(!1),setTimeout(()=>{s&&s()},300)},children:(0,_t.jsx)(_b,{})})]})};let Yb=0;const Jb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))},Xb=()=>{const[t,n]=(0,e.useState)([]);(0,e.useEffect)(()=>{const e=e=>{const{message:t,type:n="success",duration:i=3e3}=e.detail;r(t,n,i)};return window.addEventListener("showToast",e),()=>{window.removeEventListener("showToast",e)}},[]);const r=(e,t,r)=>{const i={id:++Yb,message:e,type:t,duration:r};n(e=>[...e,i])};return(0,_t.jsx)("div",{className:"toast-container",children:t.map(e=>(0,_t.jsx)(Qb,{message:e.message,type:e.type,duration:e.duration,onClose:()=>{return t=e.id,void n(e=>e.filter(e=>e.id!==t));var t}},e.id))})},Zb=e=>{let{isFromHome:t=!1}=e;const n=te(),{t:r}=Ut();return(0,_t.jsxs)("div",{className:"cart-hero",style:{backgroundImage:"url(./assets/images/on-boarding-1.png)"},children:[!t&&(0,_t.jsx)("button",{className:"cart-back-button",onClick:()=>n(-1),"aria-label":"Back",children:(0,_t.jsx)(wb,{})}),(0,_t.jsx)("div",{className:"cart-hero-overlay"}),(0,_t.jsx)("h1",{className:"cart-hero-title",children:r("cart.add_to_cart")})]})},eE=e=>{let{isFromHome:t=!1}=e;return(0,_t.jsx)("div",{className:"cart-screen",children:(0,_t.jsxs)("div",{className:"cart-container",children:[(0,_t.jsx)(Zb,{isFromHome:t}),(0,_t.jsxs)("div",{className:"loading-state",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Loading cart..."})]})]})})},tE=()=>{const{t:e}=Ut();return(0,_t.jsxs)("div",{className:"empty-cart",children:[(0,_t.jsx)(lb,{size:100,className:"empty-cart-icon"}),(0,_t.jsx)("h3",{className:"empty-cart-title",children:e("cart.empty")})]})},nE=e=>{let{item:t,onUpdateQuantity:n,onAddToCart:r,onRemoveFromCart:i}=e;return(0,_t.jsxs)("div",{className:"cart-item-wrapper",children:[(0,_t.jsxs)("div",{className:"cart-item",children:[(0,_t.jsxs)("div",{className:"item-info",children:[(0,_t.jsxs)("div",{className:"item-header",children:[(0,_t.jsx)("h4",{className:"item-name",children:t.name}),(0,_t.jsxs)("div",{className:"quantity-controls",children:[(0,_t.jsx)("button",{className:"quantity-btn remove",onClick:()=>n(t.id,t.quantity-1),children:(0,_t.jsx)(db,{size:16})}),(0,_t.jsx)("span",{className:"quantity-display",children:String(t.quantity).padStart(2,"0")}),(0,_t.jsx)("button",{className:"quantity-btn add",onClick:()=>r(t.id),children:(0,_t.jsx)(ub,{size:16})})]})]}),(0,_t.jsx)("div",{className:"item-price-section",children:(0,_t.jsx)("span",{className:"item-price",children:(s=t.price,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(s||0))})})]}),(0,_t.jsxs)("div",{className:"item-image-container",children:[t.images&&t.images.length>0?(0,_t.jsx)("img",{src:t.images[0],alt:t.name,className:"item-image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,_t.jsx)("div",{className:"image-placeholder",style:{display:t.images&&t.images.length>0?"none":"flex"},children:(0,_t.jsx)(lb,{size:40})})]})]}),(0,_t.jsx)("button",{className:"delete-button",onClick:()=>i(t.id),title:"Remove item",children:(0,_t.jsx)(tb,{size:20})})]});var s},rE=e=>{let{cartItems:t,onUpdateQuantity:n,onAddToCart:r,onRemoveFromCart:i}=e;return(0,_t.jsx)("div",{className:"cart-items-list",children:t.map((e,t)=>(0,_t.jsx)(nE,{item:e,onUpdateQuantity:n,onAddToCart:r,onRemoveFromCart:i},e.id))})},iE=e=>{let{cartItems:t,calculateSubtotal:n,calculateDeliveryFee:r,calculateTip:i,calculateDiscount:s,calculateTotal:a,onPlaceOrder:o}=e;const{t:l}=Ut();if(0===t.length)return null;const c=e=>new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(e||0),u={USD:.27,EUR:.25},d=(e,t)=>{const n=(e||0)*(u[t]||1),r="USD"===t?"en-US":"EUR"===t?"de-DE":"he-IL";return new Intl.NumberFormat(r,{style:"currency",currency:t,maximumFractionDigits:2}).format(n)};return(0,_t.jsx)("div",{className:"price-info-widget",children:(0,_t.jsxs)("div",{className:"price-info-content",children:[(0,_t.jsxs)("div",{className:"price-row",children:[(0,_t.jsx)("span",{children:l("cart.subtotal")}),(0,_t.jsx)("span",{children:c(n())})]}),(0,_t.jsxs)("div",{className:"price-row",children:[(0,_t.jsx)("span",{children:l("cart.delivery")}),(0,_t.jsx)("span",{children:c(r())})]}),(0,_t.jsxs)("div",{className:"price-row total",children:[(0,_t.jsx)("span",{children:l("cart.total")}),(0,_t.jsx)("span",{children:c(a())})]}),(0,_t.jsxs)("div",{className:"currency-row",children:[(0,_t.jsx)("span",{className:"currency-badge usd",children:d(a(),"USD")}),(0,_t.jsx)("span",{className:"currency-badge ils",children:c(a())}),(0,_t.jsx)("span",{className:"currency-badge eur",children:d(a(),"EUR")})]}),(0,_t.jsx)("button",{className:"place-order-button",onClick:o,children:l("cart.place_order")})]})})},sE=t=>{let{isFromHome:n=!1}=t;const r=te(),[i,s]=(0,e.useState)([]),[a,o]=(0,e.useState)(!0);(0,e.useEffect)(()=>{l();const e=()=>{l()};return window.addEventListener("cartUpdated",e),()=>{window.removeEventListener("cartUpdated",e)}},[]);const l=()=>{o(!0);try{const e=Gb.getCartItems();console.log("\ud83d\udce6 Loaded cart from storage:",e),s(e)}catch(G_){console.error("\u274c Error loading cart:",G_),s([])}finally{o(!1)}},c=(e,t)=>{const n=i.find(t=>t.id===e);if(n)if(1===n.quantity&&t<n.quantity)window.confirm(`Remove ${n.name} from cart?`)&&u(e);else try{Gb.updateQuantity(e,t),Jb("success","Cart updated")}catch(G_){console.error("Error updating quantity:",G_),Jb("error","Failed to update cart")}},u=e=>{try{Gb.removeFromCart(e),Jb("success","Item removed from cart")}catch(G_){console.error("Error removing from cart:",G_),Jb("error","Failed to remove item")}},d=()=>i.reduce((e,t)=>e+t.price*t.quantity,0),h=()=>{const e=i.reduce((e,t)=>e+(t.quantity||0),0);return 2*e},f=()=>0,p=()=>0;return a?(0,_t.jsx)(eE,{isFromHome:n}):(0,_t.jsxs)("div",{className:"cart-screen",children:[(0,_t.jsxs)("div",{className:"cart-container",children:[(0,_t.jsx)(Zb,{isFromHome:n}),0===i.length?(0,_t.jsx)(tE,{}):(0,_t.jsx)(rE,{cartItems:i,onUpdateQuantity:c,onAddToCart:e=>{const t=i.find(t=>t.id===e);t&&c(e,t.quantity+1)},onRemoveFromCart:u})]}),(0,_t.jsx)(iE,{cartItems:i,calculateSubtotal:d,calculateDeliveryFee:h,calculateTip:f,calculateDiscount:p,calculateTotal:()=>d()+h()+0-0,onPlaceOrder:()=>{0!==i.length?r("/tip"):Jb("error","Cart is empty")}})]})},aE=t=>{let{isFromHome:n=!1}=t;const r=te(),[i,s]=(0,e.useState)([]),[a,o]=(0,e.useState)(!0);(0,e.useEffect)(()=>{l();const e=()=>{l()};return window.addEventListener("cartUpdated",e),()=>{window.removeEventListener("cartUpdated",e)}},[]);const l=()=>{o(!0);try{const e=Gb.getCartItems();console.log("\ud83d\udce6 Loaded cart from storage:",e),s(e)}catch(G_){console.error("\u274c Error loading cart:",G_),s([])}finally{o(!1)}},c=(e,t)=>{const n=i.find(t=>t.id===e);if(n)if(1===n.quantity&&t<n.quantity)window.confirm(`Remove ${n.name} from cart?`)&&u(e);else try{Gb.updateQuantity(e,t),Jb("success","Cart updated")}catch(G_){console.error("Error updating quantity:",G_),Jb("error","Failed to update cart")}},u=e=>{try{Gb.removeFromCart(e),Jb("success","Item removed from cart")}catch(G_){console.error("Error removing from cart:",G_),Jb("error","Failed to remove item")}};return a?(0,_t.jsx)(eE,{isFromHome:n}):(0,_t.jsxs)("div",{className:"precart-screen",children:[(0,_t.jsxs)("div",{className:"precart-container",children:[(0,_t.jsx)(Zb,{isFromHome:n}),0===i.length?(0,_t.jsx)(tE,{}):(0,_t.jsx)(rE,{cartItems:i,onUpdateQuantity:c,onAddToCart:e=>{const t=i.find(t=>t.id===e);t&&c(e,t.quantity+1)},onRemoveFromCart:u})]}),(0,_t.jsxs)("div",{className:"precart-actions",children:[(0,_t.jsx)("button",{className:"continue-shopping-btn",onClick:()=>{r("/menu")},children:"Continue Shopping"}),(0,_t.jsx)("button",{className:"checkout-btn",onClick:()=>{0!==i.length?r("/cart"):Jb("error","Cart is empty")},disabled:0===i.length,children:"Checkout"})]})]})};function oE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M370 378c28.89 23.52 46 46.07 46 86m-274-86c-28.89 23.52-46 46.06-46 86m288-256c28.89-23.52 32-56.07 32-96m-288 94c-28.89-23.52-32-54.06-32-94m368 176.13h-80m-256 0H48M256 192v256"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 448h0c-70.4 0-128-57.6-128-128v-96.07c0-65.07 57.6-96 128-96h0c70.4 0 128 25.6 128 96V320c0 70.4-57.6 128-128 128z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M179.43 143.52a49.08 49.08 0 0 1-3.43-15.73A80 80 0 0 1 255.79 48h.42A80 80 0 0 1 336 127.79a41.91 41.91 0 0 1-3.12 14.3"},child:[]}]})(e)}function lE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M408 64H104a56.16 56.16 0 0 0-56 56v192a56.16 56.16 0 0 0 56 56h40v80l93.72-78.14a8 8 0 0 1 5.13-1.86H408a56.16 56.16 0 0 0 56-56V120a56.16 56.16 0 0 0-56-56z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"216",r:"32"},child:[]}]})(e)}function cE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 56v120a32 32 0 0 0 32 32h120m-232 80h160m-160 80h160"},child:[]}]})(e)}function uE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M248 64C146.39 64 64 146.39 64 248s82.39 184 184 184 184-82.39 184-184S349.61 64 248 64z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M220 220h32v116"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M208 340h88"},child:[]},{tag:"path",attr:{d:"M248 130a26 26 0 1 0 26 26 26 26 0 0 0-26-26z"},child:[]}]})(e)}function dE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M48 112h288M192 64v48m80 336 96-224 96 224m-162.5-64h133M281.3 112S257 206 199 277 80 384 80 384"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 336s-35-27-72-75-56-85-56-85"},child:[]}]})(e)}function hE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M336 208v-95a80 80 0 0 0-160 0v95"},child:[]},{tag:"rect",attr:{width:"320",height:"272",x:"96",y:"208",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48"},child:[]}]})(e)}function fE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40m64 160 80-80-80-80m-192 80h256"},child:[]}]})(e)}function pE(e){return Xw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z"},child:[]},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z"},child:[]}]})(e)}const mE=()=>{const t=te(),{t:n}=Ut(),[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)({active:0,completed:0,cancelled:0}),[o,l]=(0,e.useState)(!0);(0,e.useEffect)(()=>{c()},[]),(0,e.useEffect)(()=>{null!==r&&(r&&r.id||t("/auth"))},[r,t]);const c=()=>{try{const e=Nt.getUserData();i(e),console.log("\ud83d\udc64 Loaded user data:",e)}catch(G_){console.error("\u274c Error loading user data:",G_),i(null)}};(0,e.useEffect)(()=>{const e=Nt.getUserData();if(!e||!e.id)return;l(!0);const t=qb.streamOrdersForUser(e.id,(e,t)=>{if(t)return a({active:0,completed:0,cancelled:0}),void l(!1);const n={active:e.filter(e=>[Bb.PENDING,Bb.PREPARING,Bb.DELIVERING].includes(e.status)).length,completed:e.filter(e=>e.status===Bb.DELIVERED).length,cancelled:e.filter(e=>e.status===Bb.CANCELED).length};a(n),l(!1)});return()=>{"function"===typeof t&&t()}},[]);const u=[{icon:dE,title:n("profile.language"),subtitle:n("profile.language_sub"),action:()=>t("/settings/language")},{icon:uE,title:n("profile.about"),subtitle:n("profile.about_sub"),action:()=>t("/settings/about")},{icon:cE,title:n("profile.terms"),subtitle:n("profile.terms_sub"),action:()=>t("/settings/terms")},{icon:lE,title:n("profile.feedback"),subtitle:n("profile.feedback_sub"),action:()=>t("/settings/feedback")},{icon:hE,title:n("profile.privacy"),subtitle:n("profile.privacy_sub"),action:()=>t("/settings/privacy")},{icon:oE,title:n("profile.report"),subtitle:n("profile.report_sub"),action:()=>t("/settings/report")}];return(0,_t.jsxs)("div",{className:"profile-screen",children:[(0,_t.jsxs)("div",{className:"profile-hero",children:[(0,_t.jsx)("div",{className:"hero-overlay"}),(0,_t.jsxs)("div",{className:"hero-content",children:[(0,_t.jsxs)("div",{className:"hero-left",children:[(0,_t.jsx)("div",{className:"profile-avatar small",children:null!==r&&void 0!==r&&r.photoUrl?(0,_t.jsx)("img",{src:r.photoUrl,alt:"Profile",className:"avatar-image"}):(0,_t.jsx)(pE,{className:"avatar-icon"})}),(0,_t.jsxs)("div",{className:"hero-user",children:[(0,_t.jsx)("div",{className:"hero-name",children:r?`${r.firstName} ${r.lastName}`:""}),(0,_t.jsx)("div",{className:"hero-email",children:(null===r||void 0===r?void 0:r.email)||""})]})]}),(0,_t.jsxs)("button",{className:"logout-chip",onClick:()=>{console.log("\ud83d\udeba User signing out..."),Pt.clearAllStorage(),t("/auth"),console.log("\u2705 Sign out completed")},children:[(0,_t.jsx)(fE,{})," ",n("profile.logout")]})]})]}),(0,_t.jsxs)("div",{className:"profile-container",children:[(0,_t.jsxs)("div",{className:"stats-card",children:[(0,_t.jsxs)("div",{className:"stats-col",children:[(0,_t.jsx)("div",{className:"stats-number",children:o?"\u2026":s.active}),(0,_t.jsx)("div",{className:"stats-label",children:n("profile.active")})]}),(0,_t.jsx)("div",{className:"divider"}),(0,_t.jsxs)("div",{className:"stats-col",children:[(0,_t.jsx)("div",{className:"stats-number green",children:o?"\u2026":s.completed}),(0,_t.jsx)("div",{className:"stats-label",children:n("profile.completed")})]})]}),(0,_t.jsxs)("div",{className:"settings-section",children:[(0,_t.jsx)("div",{className:"section-header",children:n("profile.settings")}),(0,_t.jsx)("div",{className:"settings-list",children:u.map((e,t)=>{const n=e.icon;return(0,_t.jsxs)("div",{className:"settings-item",onClick:e.action,children:[(0,_t.jsxs)("div",{className:"settings-item-left",children:[(0,_t.jsx)(n,{className:"settings-icon"}),(0,_t.jsxs)("div",{className:"settings-text",children:[(0,_t.jsx)("div",{className:"settings-title",children:e.title}),(0,_t.jsx)("div",{className:"settings-subtitle",children:e.subtitle})]})]}),(0,_t.jsx)("div",{className:"settings-arrow",children:"\u203a"})]},t)})})]})]})]})},gE=e=>{var t;let{food:n,onBack:r,isFavorite:i,onToggleFavorite:s}=e;return(0,_t.jsxs)("div",{className:"food-detail-header",children:[(0,_t.jsx)("button",{className:"fd-back-button",onClick:r,children:(0,_t.jsx)(wb,{})}),(0,_t.jsx)("button",{className:"fd-fav-button "+(i?"liked":""),onClick:s,"aria-label":"Favorite",children:i?(0,_t.jsx)(rb,{}):(0,_t.jsx)(nb,{})}),(0,_t.jsxs)("div",{className:"food-image-container",children:[null!==n&&void 0!==n&&n.images&&n.images.length>0?(0,_t.jsx)("img",{src:n.images[0],alt:n.name,className:"food-image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,_t.jsx)("div",{className:"food-image-placeholder",style:{display:(null===n||void 0===n||null===(t=n.images)||void 0===t?void 0:t.length)>0?"none":"flex"},children:(0,_t.jsx)(vb,{className:"placeholder-icon"})}),(0,_t.jsx)("div",{className:"image-fade"})]}),(0,_t.jsx)("div",{className:"header-curve"})]})},yE=e=>{let{food:t,rating:n,testimonials:r,orderCount:i}=e;const{t:s}=Ut(),a=e=>new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(e||0),o=(null===t||void 0===t?void 0:t.discountPercentage)&&t.discountPercentage>0,l=o?t.price*(1-t.discountPercentage/100):null===t||void 0===t?void 0:t.price;return(0,_t.jsxs)("div",{className:"food-info-section",children:[(0,_t.jsxs)("div",{className:"food-title-row",children:[(0,_t.jsx)("h1",{className:"food-name",children:null===t||void 0===t?void 0:t.name}),(0,_t.jsxs)("div",{className:"food-rating",children:[(0,_t.jsx)(kb,{className:"star-icon"}),(0,_t.jsx)("span",{className:"rating-value",children:n.toFixed(1)}),(0,_t.jsxs)("span",{className:"rating-count",children:["(",r.length,")"]})]})]}),(0,_t.jsxs)("div",{className:"food-meta",children:[(0,_t.jsx)("div",{className:"food-price-container",children:o?(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"discounted-price",children:a(l)}),(0,_t.jsx)("div",{className:"original-price",children:a(null===t||void 0===t?void 0:t.price)}),(0,_t.jsxs)("div",{className:"discount-badge",children:[Math.round(t.discountPercentage),"% ",s("food.off")]})]}):(0,_t.jsx)("div",{className:"food-price",children:a(null===t||void 0===t?void 0:t.price)})}),(0,_t.jsxs)("div",{className:"food-prep-time",children:[(0,_t.jsx)(hb,{className:"time-icon"}),(0,_t.jsxs)("span",{children:[(null===t||void 0===t?void 0:t.preparationTime)||15," ",s("food.min")]})]}),(0,_t.jsxs)("div",{className:"order-count",children:[i," ",s("food.orders")]})]})]})},vE=e=>{let{description:t}=e;const{t:n}=Ut();return(0,_t.jsxs)("div",{className:"section",children:[(0,_t.jsx)("h2",{className:"section-title",children:n("food.description")}),(0,_t.jsx)("p",{className:"food-description",children:(r=t,(r?r.replace(/,\s*([\u05d0-\u05ea]+),/g,"$1."):r)||n("food.no_description"))})]});var r},wE=e=>{let{allergens:t}=e;return t&&0!==t.length?(0,_t.jsxs)("div",{className:"section",children:[(0,_t.jsx)("h2",{className:"section-title",children:"Allergens"}),(0,_t.jsx)("ul",{className:"allergens-list",children:t.map((e,t)=>(0,_t.jsxs)("li",{className:"allergen-item",children:[(0,_t.jsx)("span",{className:"bullet-point",children:"\u2022"}),e]},t))})]}):null},bE=e=>{let{testimonials:t}=e;return t&&0!==t.length?(0,_t.jsxs)("div",{className:"section",children:[(0,_t.jsx)("h2",{className:"section-title",children:"Testimonials"}),(0,_t.jsx)("div",{className:"testimonials-list",children:t.map(e=>{var t,n;return(0,_t.jsxs)("div",{className:"testimonial-item",children:[(0,_t.jsxs)("div",{className:"testimonial-header",children:[(0,_t.jsx)("div",{className:"testimonial-rating",children:[...Array(5)].map((t,n)=>(0,_t.jsx)(kb,{className:"star "+(n<e.rating?"filled":"empty")},n))}),(0,_t.jsx)("span",{className:"testimonial-date",children:new Date((null===(t=e.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||e.createdAt).toLocaleDateString()})]}),(0,_t.jsx)("p",{className:"testimonial-text",children:e.comment}),(0,_t.jsxs)("p",{className:"testimonial-author",children:["- ",e.customerName]})]},e.id)})})]}):null},EE=t=>{let{onAddToCart:n}=t;const r=(0,e.useRef)(null),i=(0,e.useRef)(null),[s,a]=(0,e.useState)(0),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)({max:0,knob:44,padding:16}),{t:d,lang:h}=Ut(),f="he"===h;(0,e.useEffect)(()=>{const e=()=>{if(!r.current||!i.current)return;const e=r.current.clientWidth,t=i.current.clientWidth,n=window.getComputedStyle(r.current),s=parseInt(n.paddingLeft||"16",10),o=parseInt(n.paddingRight||"16",10),l=Math.max(0,e-s-o-t);u({max:l,knob:t,padding:s}),a(0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const p=()=>{try{n&&n()}catch(e){}setTimeout(()=>a(0),250)},m=e=>{l(!0)},g=e=>{if(!o)return;const t=r.current.getBoundingClientRect(),n=f?t.right-e-c.padding-c.knob/2:e-t.left-c.padding-c.knob/2,i=Math.min(Math.max(n,0),c.max);a(i)},y=()=>{if(!o)return;l(!1);(0===c.max?0:s/c.max)>=.7?(a(c.max),p()):a(0)},v=e=>g(e.clientX),w=()=>y(),b=e=>{e.touches[0]&&g(e.touches[0].clientX)},E=()=>y();(0,e.useEffect)(()=>{if(o)return window.addEventListener("mousemove",v),window.addEventListener("mouseup",w),window.addEventListener("touchmove",b,{passive:!1}),window.addEventListener("touchend",E),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",w),window.removeEventListener("touchmove",b),window.removeEventListener("touchend",E)}},[o,s,c]);const _=d(f?"food.add_to_cart_short":"food.swipe_add_to_cart");return(0,_t.jsx)("div",{className:"food-detail-bottom-bar",dir:f?"rtl":"ltr",children:(0,_t.jsxs)("div",{ref:r,className:"pill-cta swipe-track "+(f?"rtl":""),role:"button",tabIndex:0,"aria-label":_,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p())},onMouseDown:e=>{e.preventDefault(),m(e.clientX)},onTouchStart:e=>{e.touches[0]&&m(e.touches[0].clientX)},children:[(0,_t.jsx)("span",{ref:i,className:"pill-leading swipe-knob",style:{transform:`translateX(${f?-s:s}px) translateY(-50%)`},children:f?(0,_t.jsx)(wb,{}):(0,_t.jsx)(bb,{})}),(0,_t.jsx)("span",{className:"pill-text",children:_})]})})},_E=e=>{let{onBack:t}=e;return(0,_t.jsxs)("div",{className:"food-detail-screen",children:[(0,_t.jsx)("div",{className:"food-detail-header",children:(0,_t.jsx)("button",{className:"back-button",onClick:t,children:(0,_t.jsx)(wb,{})})}),(0,_t.jsxs)("div",{className:"loading-container",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Loading food details..."})]})]})},SE=e=>{let{error:t,onBack:n,onRetry:r}=e;const{t:i}=Ut();return(0,_t.jsxs)("div",{className:"food-detail-screen",children:[(0,_t.jsx)("div",{className:"food-detail-header",children:(0,_t.jsx)("button",{className:"back-button",onClick:n,children:(0,_t.jsx)(wb,{})})}),(0,_t.jsxs)("div",{className:"error-container",children:[(0,_t.jsx)("p",{className:"error-text",children:t||i("food.not_found")}),(0,_t.jsx)("button",{className:"retry-button",onClick:r,children:i("food.try_again")})]})]})},kE=()=>{const{foodId:t}=ne(),n=te(),[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)([]),[o,l]=(0,e.useState)(0),[c,u]=(0,e.useState)(0),[d,h]=(0,e.useState)(!0),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)(!1);(0,e.useEffect)(()=>{t&&y()},[t]);const y=async()=>{try{h(!0),p(null),await v(),await w(),await b()}catch(e){console.error("\u274c Error initializing food detail screen:",e),p("Failed to load food details")}finally{h(!1)}},v=async()=>{try{console.log("\ud83d\udd0d Fetching food details for ID:",t);let n=null;try{const e=Gh(Rw,"menuItems",t),r=await ep(e);r.exists()&&(n={id:r.id,...r.data()},console.log("\u2705 Food details loaded from menuItems:",n.name))}catch(e){console.log("\u2139\ufe0f Not found in menuItems, trying offers...")}if(!n)try{const e=Gh(Rw,"offers",t),r=await ep(e);r.exists()&&(n={id:r.id,...r.data()},console.log("\u2705 Food details loaded from offers:",n.name))}catch(e){console.log("\u2139\ufe0f Not found in offers either")}if(!n)throw new Error("Food not found in menuItems or offers");i(n),E(n.id)}catch(f){throw console.error("\u274c Error fetching food details:",f),f}},w=async()=>{try{console.log("\ud83d\udcca Fetching order count for food:",t);const e=jf(Kh(Rw,"orders"),Ff("foodId","==",t)),n=await np(e);u(n.size),console.log("\u2705 Order count loaded:",n.size)}catch(f){console.error("\u274c Error fetching order count:",f)}},b=async()=>{try{console.log("\ud83d\udcac Fetching testimonials for food:",t);const e=Gh(Rw,"menuItems",t),n=jf(Kh(Rw,"testimonials"),Ff("target","==",e)),r=await np(n),i=[];if(r.forEach(e=>{i.push({id:e.id,...e.data()})}),a(i),i.length>0){const e=i.reduce((e,t)=>e+(t.rating||0),0),t=e/i.length;l(t),console.log("\u2705 Testimonials loaded:",i.length,"Average rating:",t)}else l(0),console.log("\u2139\ufe0f No testimonials found")}catch(f){console.error("\u274c Error fetching testimonials:",f)}},E=e=>{const t=Nt.getUserData();t&&t.favorites&&g(t.favorites.includes(e))},_=()=>{n(-1)};return d?(0,_t.jsx)(_E,{onBack:_}):f||!r?(0,_t.jsx)(SE,{error:f,onBack:_,onRetry:y}):(0,_t.jsxs)("div",{className:"food-detail-screen",children:[(0,_t.jsx)(gE,{food:r,onBack:_,isFavorite:m,onToggleFavorite:()=>{try{const e=Nt.getUserData();if(!e)return;let t=e.favorites||[];m?(t=t.filter(e=>e!==r.id),console.log("\ud83d\udc94 Removed from favorites:",r.name)):(t.push(r.id),console.log("\u2764\ufe0f Added to favorites:",r.name));const n={...e,favorites:t};Nt.setUserData(n),g(!m)}catch(f){console.error("\u274c Error toggling favorite:",f)}}}),(0,_t.jsx)("div",{className:"food-detail-content",children:(0,_t.jsxs)("div",{className:"food-card",children:[(0,_t.jsx)(yE,{food:r,rating:o,testimonials:s,orderCount:c}),(0,_t.jsx)(vE,{description:r.description}),(0,_t.jsx)(wE,{allergens:r.allergens}),(0,_t.jsx)(bE,{testimonials:s})]})}),(0,_t.jsx)(EE,{onAddToCart:()=>{try{console.log("\ud83d\uded2 Adding to cart:",r.name);const e=Gb.addToCart(r,1);e.success?(Jb(`${r.name} added to cart! (${e.totalItems} items)`,"success",3e3),console.log("\u2705 Added to cart successfully:",e.message),setTimeout(()=>{n("/precart")},800)):(Jb(e.message,"error",4e3),console.error("\u274c Failed to add to cart:",e.message))}catch(f){console.error("\u274c Error adding to cart:",f),Jb("Failed to add item to cart","error",4e3)}}})]})},IE=e=>{let{onBack:t}=e;return(0,_t.jsx)("div",{className:"tip-header",children:(0,_t.jsx)("button",{className:"back-button",onClick:t,"aria-label":"Back",children:(0,_t.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,_t.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})})})},TE=e=>{let{options:t=[6,10,14,18],selected:n,onChange:r}=e;return(0,_t.jsx)("div",{className:"tip-options",children:t.map(e=>(0,_t.jsxs)("button",{className:"tip-option "+(n===e?"selected":""),onClick:()=>r(e),children:[e,"%"]},e))})},CE=e=>{let{value:t,onChange:n,inputRef:r}=e;const{t:i}=Ut();return(0,_t.jsxs)("div",{className:"custom-tip-section",children:[(0,_t.jsx)("label",{className:"custom-tip-label",children:i("tip.custom_tip_label")}),(0,_t.jsx)("input",{type:"number",className:"custom-tip-input",placeholder:i("tip.custom_tip_placeholder"),value:t,onChange:e=>n(e.target.value),min:"0",max:"100",ref:r})]})},NE=e=>{let{tipAmount:t=0,onCustomTip:n}=e;const{t:r}=Ut();return(0,_t.jsx)("div",{className:"tip-amount-section",children:(0,_t.jsxs)("div",{className:"tip-amount-row",children:[(0,_t.jsx)("span",{className:"tip-label",children:r("tip.tip_amount")}),(0,_t.jsx)("span",{className:"tip-amount",children:(i=t,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(i||0))}),n&&(0,_t.jsx)("button",{type:"button",className:"custom-tip-link",onClick:n,children:r("tip.custom_tip")})]})});var i},xE=e=>{let{onAddTip:t,onSkipTip:n,tipAmount:r=0}=e;const{t:i}=Ut();return(0,_t.jsxs)("div",{className:"tip-actions",children:[(0,_t.jsxs)("button",{className:"add-tip-button",onClick:t,children:[i("tip.add_tip")," (",(s=r,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(s||0)),")"]}),(0,_t.jsx)("button",{className:"skip-tip-button",onClick:n,children:i("tip.skip")})]});var s},AE=()=>{const t=te(),{t:n}=Ut(),[r,i]=(0,e.useState)(10),[s,a]=(0,e.useState)(0),[o,l]=(0,e.useState)(0),[c,u]=(0,e.useState)(""),d=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=Gb.getTotalPrice();l(e);const t=e*r/100;a(Math.round(100*t)/100)},[r]);const h=function(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)*e/100;a(Math.round(100*t)/100)};return(0,_t.jsx)("div",{className:"tip-screen",children:(0,_t.jsxs)("div",{className:"tip-container",children:[(0,_t.jsx)(IE,{onBack:()=>t(-1)}),(0,_t.jsx)("h1",{className:"tip-title",children:n("tip.title")}),(0,_t.jsxs)("p",{className:"tip-description",children:[n("tip.supports_runner")," ",n("tip.order_total_is")," ",(0,_t.jsx)("span",{className:"order-total",children:(f=o,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(f||0))}),"."]}),(0,_t.jsx)("div",{className:"delivery-illustration",children:(0,_t.jsx)("img",{src:"./assets/images/tipimage.png",alt:n("tip.illustration_alt"),className:"tip-illustration-img"})}),(0,_t.jsx)(NE,{tipAmount:s,onCustomTip:()=>{requestAnimationFrame(()=>{d.current&&(d.current.scrollIntoView({behavior:"smooth",block:"center"}),d.current.focus())})}}),(0,_t.jsx)(TE,{options:[6,10,14,18],selected:r,onChange:e=>{i(e),u(""),h(e)}}),(0,_t.jsx)(CE,{value:c,onChange:e=>{u(e);const t=parseFloat(e)||0;t>=0&&(i(t),h(t))},inputRef:d}),(0,_t.jsx)(xE,{onAddTip:()=>{console.log("\ud83d\udcb0 Adding tip:",s,`(${r}%)`),localStorage.setItem("selectedTip",JSON.stringify({percentage:r,amount:s})),t("/order/confirm")},onSkipTip:()=>{console.log("\u23ed\ufe0f Skipping tip"),localStorage.setItem("selectedTip",JSON.stringify({percentage:0,amount:0})),t("/order/confirm")},tipAmount:s})]})});var f};const PE=function(){var t;const{shopId:n}=ne(),r=te(),[i,s]=(0,e.useState)([]),[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(null);return(0,e.useEffect)(()=>{try{window.scrollTo({top:0,left:0,behavior:"auto"})}catch(e){window.scrollTo(0,0)}},[n]),(0,e.useEffect)(()=>{(async()=>{try{if(c(!0),d(null),n){const e=Gh(Rw,"shops",n),t=await ep(e);t.exists()&&o({id:t.id,...t.data()})}const e=await Mb.getMenuItemsByShop(n,50);e.success?s(e.foods):d(e.error||"Failed to fetch shop menu")}catch(K_){console.error(K_),d("Failed to fetch shop menu")}finally{c(!1)}})()},[n]),(0,_t.jsxs)("div",{className:"shop-menu-page",children:[(0,_t.jsx)("div",{className:"shop-menu-header",children:(0,_t.jsxs)("div",{className:"shop-title-row",children:[(0,_t.jsx)("button",{onClick:()=>r(-1),className:"back-icon","aria-label":"Go back",title:"Back",children:"\u2190"}),(0,_t.jsx)("h2",{className:"shop-title",children:(null===a||void 0===a?void 0:a.name)||`Gate ${(null===a||void 0===a?void 0:a.gate)||(null===n||void 0===n||null===(t=n.slice)||void 0===t?void 0:t.call(n,0,6))}`})]})}),u&&(0,_t.jsx)("div",{className:"shop-menu-error",children:u}),(0,_t.jsx)("div",{className:"shop-menu-grid",children:l?[...Array(8)].map((e,t)=>(0,_t.jsxs)("div",{className:"grid-card shimmer",children:[(0,_t.jsx)("div",{className:"grid-image"}),(0,_t.jsxs)("div",{className:"grid-content",children:[(0,_t.jsx)("div",{className:"line"}),(0,_t.jsx)("div",{className:"line short"})]})]},t)):i.map(e=>(0,_t.jsxs)("div",{className:"grid-card",onClick:()=>(e=>r(`/food/${e.id}`))(e),children:[(0,_t.jsx)("div",{className:"grid-image",children:(0,_t.jsx)("img",{src:e.getPrimaryImage(),alt:e.name,onError:e=>{e.target.src="/api/placeholder/200/150"}})}),(0,_t.jsxs)("div",{className:"grid-content",children:[(0,_t.jsx)("h3",{className:"grid-name",children:e.name}),(0,_t.jsxs)("div",{className:"grid-bottom",children:[(0,_t.jsx)("span",{className:"grid-price",children:e.getFormattedPrice()}),(0,_t.jsx)("span",{className:"grid-prep",children:e.getPreparationTimeText()})]})]})]},e.id))})]})},RE=e=>{let{title:t}=e;const{t:n}=Ut(),r=t||n("order.confirm_title");return(0,_t.jsx)("div",{className:"order-confirm-header",children:(0,_t.jsx)("h1",{className:"order-confirm-title",children:r})})},DE=e=>{let{formData:t,errors:n,onChange:r}=e;const{t:i}=Ut();return(0,_t.jsxs)("div",{className:"seat-info-section",children:[(0,_t.jsx)("h2",{className:"section-title",children:i("order.seat_info_title")}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"field-label",children:i("order.seat_number")}),(0,_t.jsx)("input",{type:"text",className:"field-input "+(n.seatNo?"error":""),placeholder:i("order.seat_number_ph"),value:t.seatNo,onChange:e=>r("seatNo",e.target.value)}),n.seatNo&&(0,_t.jsx)("span",{className:"error-text",children:n.seatNo})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"field-label",children:i("order.stand_number")}),(0,_t.jsx)("input",{type:"text",className:"field-input",placeholder:i("order.stand_number_ph"),value:t.stand||"",onChange:e=>r("stand",e.target.value)})]})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"field-label",children:i("order.row_number")}),(0,_t.jsx)("input",{type:"text",className:"field-input "+(n.row?"error":""),placeholder:i("order.row_number_ph"),value:t.row,onChange:e=>r("row",e.target.value)}),n.row&&(0,_t.jsx)("span",{className:"error-text",children:n.row})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"field-label",children:i("order.entrance")}),(0,_t.jsx)("input",{type:"text",className:"field-input",placeholder:i("order.entrance_ph"),value:t.entrance||"",onChange:e=>r("entrance",e.target.value)})]})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"field-label",children:i("order.area")}),(0,_t.jsx)("input",{type:"text",className:"field-input",placeholder:i("order.area_ph"),value:t.area||"",onChange:e=>r("area",e.target.value)})]}),(0,_t.jsx)("div",{className:"form-field"})]}),(0,_t.jsxs)("div",{className:"form-field",children:[(0,_t.jsx)("label",{className:"field-label",children:i("order.additional_details")}),(0,_t.jsx)("textarea",{className:"field-input textarea",placeholder:i("order.additional_details_ph"),value:t.seatDetails,onChange:e=>r("seatDetails",e.target.value),rows:3})]})]})},OE=t=>{let{ticketImage:n,onImageUpload:r,onCameraCapture:i}=t;const s=(0,e.useRef)(null),a=(0,e.useRef)(null),{t:o}=Ut();return(0,_t.jsxs)("div",{className:"ticket-upload-section",children:[(0,_t.jsx)("h2",{className:"section-title",children:o("order.ticket_image_title")}),(0,_t.jsx)("p",{className:"section-description",children:o("order.ticket_image_desc")}),(0,_t.jsx)("input",{ref:s,type:"file",accept:"image/*",onChange:r,style:{display:"none"}}),(0,_t.jsx)("input",{ref:a,type:"file",accept:"image/*",capture:"environment",onChange:r,style:{display:"none"}}),(0,_t.jsxs)("div",{className:"upload-options",children:[(0,_t.jsx)("button",{type:"button",className:"upload-option",onClick:()=>{s.current&&s.current.click()},"aria-label":o("order.choose_from_gallery"),children:(0,_t.jsx)("img",{src:"/assets/images/choose-from-gallery.png",alt:o("order.choose_from_gallery"),className:"upload-icon-img"})}),(0,_t.jsx)("button",{type:"button",className:"upload-option",onClick:()=>{a.current&&a.current.click(),"function"===typeof i&&i()},"aria-label":o("order.front_camera"),children:(0,_t.jsx)("img",{src:"/assets/images/camera.png",alt:o("order.front_camera"),className:"upload-icon-img"})})]}),(0,_t.jsxs)("div",{className:"upload-or-separator",children:[(0,_t.jsx)("span",{className:"line"}),(0,_t.jsx)("span",{className:"or",children:o("order.or")}),(0,_t.jsx)("span",{className:"line"})]}),n&&(0,_t.jsx)("div",{className:"uploaded-image",children:(0,_t.jsx)("img",{src:n,alt:o("order.ticket_alt"),className:"ticket-preview"})})]})},LE=e=>{let{orderTotal:t=0,deliveryFee:n=0,tipData:r={amount:0,percentage:0},finalTotal:i=0}=e;const{t:s}=Ut(),a=e=>new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(e||0);return(0,_t.jsxs)("div",{className:"order-summary-section",children:[(0,_t.jsx)("h2",{className:"section-title",children:s("order.summary_title")}),(0,_t.jsxs)("div",{className:"summary-row",children:[(0,_t.jsx)("span",{className:"summary-label",children:s("order.subtotal")}),(0,_t.jsx)("span",{className:"summary-value",children:a(t)})]}),(0,_t.jsxs)("div",{className:"summary-row",children:[(0,_t.jsx)("span",{className:"summary-label",children:"Handling & Delivery"}),(0,_t.jsx)("span",{className:"summary-value",children:a(n)})]}),(0,_t.jsxs)("div",{className:"summary-row",children:[(0,_t.jsxs)("span",{className:"summary-label",children:[s("order.tip")," (",r.percentage,"%)"]}),(0,_t.jsx)("span",{className:"summary-value",children:a(r.amount)})]}),(0,_t.jsxs)("div",{className:"summary-row total",children:[(0,_t.jsx)("span",{className:"summary-label",children:s("order.total")}),(0,_t.jsx)("span",{className:"summary-value",children:a(i)})]})]})},jE=e=>{let{loading:t,finalTotal:n,onPlaceOrder:r}=e;const{t:i}=Ut(),s=`\u20aa${n.toFixed(2)}`,a=t?i("order.processing"):i("order.place_order_with_total").replace("{total}",s);return(0,_t.jsx)("div",{className:"place-order-section",children:(0,_t.jsx)("button",{className:"place-order-button",onClick:r,disabled:t,children:a})})};var ME,FE="basil",UE="https://js.stripe.com",zE="".concat(UE,"/").concat(FE,"/stripe.js"),VE=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,BE=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,$E="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",HE=function(e){return VE.test(e)||BE.test(e)},qE=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(zE).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},WE=null,KE=null,GE=null,QE=function(e){return null!==WE?WE:(WE=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn($E),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(UE,'"]')),t=0;t<e.length;t++){var n=e[t];if(HE(n.src))return n}return null}();if(r&&e)console.warn($E);else if(r){if(r&&null!==GE&&null!==KE){var i;r.removeEventListener("load",GE),r.removeEventListener("error",KE),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=qE(e)}}else r=qE(e);GE=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),KE=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",GE),r.addEventListener("error",KE)}catch(G_){return void n(G_)}else t(null)})).catch(function(e){return WE=null,Promise.reject(e)})},YE=!1,JE=function(){return ME||(ME=QE(null).catch(function(e){return ME=null,Promise.reject(e)}))};Promise.resolve().then(function(){return JE()}).catch(function(e){YE||console.warn(e)});var XE=n(173);function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(t){n_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t_(e){return t_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t_(e)}function n_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r_(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a_=function(t,n,r){var i=!!r,s=e.useRef(r);e.useEffect(function(){s.current=r},[r]),e.useEffect(function(){if(!i||!t)return function(){};var e=function(){s.current&&s.current.apply(s,arguments)};return t.on(n,e),function(){t.off(n,e)}},[i,n,t,s])},o_=function(t){var n=e.useRef(t);return e.useEffect(function(){n.current=t},[t]),n.current},l_=function(e){return null!==e&&"object"===t_(e)},c_="[object Object]",u_=function e(t,n){if(!l_(t)||!l_(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===c_;if(i!==(Object.prototype.toString.call(n)===c_))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var o={},l=0;l<s.length;l+=1)o[s[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var u=Object.keys(o);if(u.length!==s.length)return!1;var d=t,h=n;return u.every(function(t){return e(d[t],h[t])})},d_=function(e,t,n){return l_(e)?Object.keys(e).reduce(function(r,i){var s=!l_(t)||!u_(e[i],t[i]);return n.includes(i)?(s&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):s?e_(e_({},r||{}),{},n_({},i,e[i])):r},null):null},h_="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",f_=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h_;if(null===e||l_(t=e)&&"function"===typeof t.elements&&"function"===typeof t.createToken&&"function"===typeof t.createPaymentMethod&&"function"===typeof t.confirmCardPayment)return e;throw new Error(n)},p_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h_;if(function(e){return l_(e)&&"function"===typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return f_(e,t)})};var n=f_(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},m_=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.0"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.0",url:"https://stripe.com/docs/stripe-js/react"}))},g_=e.createContext(null);g_.displayName="ElementsContext";var y_=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},v_=function(t){var n=t.stripe,r=t.options,i=t.children,s=e.useMemo(function(){return p_(n)},[n]),a=i_(e.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}}),2),o=a[0],l=a[1];e.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==s.tag||o.stripe?"sync"!==s.tag||o.stripe||t(s.stripe):s.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[s,o,r]);var c=o_(n);e.useEffect(function(){null!==c&&c!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,n]);var u=o_(r);return e.useEffect(function(){if(o.elements){var e=d_(r,u,["clientSecret","fonts"]);e&&o.elements.update(e)}},[r,u,o.elements]),e.useEffect(function(){m_(o.stripe)},[o.stripe]),e.createElement(g_.Provider,{value:o},i)};v_.propTypes={stripe:XE.any,options:XE.object};var w_=function(t){var n=e.useContext(g_);return y_(n,t)};XE.func.isRequired;var b_=e.createContext(null);b_.displayName="CheckoutContext",XE.any,XE.shape({fetchClientSecret:XE.func.isRequired,elementsOptions:XE.object}).isRequired;var E_=function(t){var n=e.useContext(b_),r=e.useContext(g_);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}return y_(r,t)},__=["mode"],S_=function(t,n){var r,i="".concat((r=t).charAt(0).toUpperCase()+r.slice(1),"Element"),s=n?function(t){E_("mounts <".concat(i,">"));var n=t.id,r=t.className;return e.createElement("div",{id:n,className:r})}:function(n){var r,s=n.id,a=n.className,o=n.options,l=void 0===o?{}:o,c=n.onBlur,u=n.onFocus,d=n.onReady,h=n.onChange,f=n.onEscape,p=n.onClick,m=n.onLoadError,g=n.onLoaderStart,y=n.onNetworksChange,v=n.onConfirm,w=n.onCancel,b=n.onShippingAddressChange,E=n.onShippingRateChange,_=n.onSavedPaymentMethodRemove,S=n.onSavedPaymentMethodUpdate,k=E_("mounts <".concat(i,">")),I="elements"in k?k.elements:null,T="checkoutState"in k?k.checkoutState:null,C="success"===(null===T||void 0===T?void 0:T.type)?T.checkout:null,N=i_(e.useState(null),2),x=N[0],A=N[1],P=e.useRef(null),R=e.useRef(null);a_(x,"blur",c),a_(x,"focus",u),a_(x,"escape",f),a_(x,"click",p),a_(x,"loaderror",m),a_(x,"loaderstart",g),a_(x,"networkschange",y),a_(x,"confirm",v),a_(x,"cancel",w),a_(x,"shippingaddresschange",b),a_(x,"shippingratechange",E),a_(x,"savedpaymentmethodremove",_),a_(x,"savedpaymentmethodupdate",S),a_(x,"change",h),d&&(r="expressCheckout"===t?d:function(){d(x)}),a_(x,"ready",r),e.useLayoutEffect(function(){if(null===P.current&&null!==R.current&&(I||C)){var e=null;if(C)switch(t){case"payment":e=C.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=l.mode,r=r_(l,__);if("shipping"===n)e=C.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");e=C.createBillingAddressElement(r)}break;case"expressCheckout":e=C.createExpressCheckoutElement(l);break;case"currencySelector":e=C.createCurrencySelectorElement();break;case"taxId":e=C.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(i,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(e=I.create(t,l));P.current=e,A(e),e&&e.mount(R.current)}},[I,C,l]);var D=o_(l);return e.useEffect(function(){if(P.current){var e=d_(l,D,["paymentRequest"]);e&&"update"in P.current&&P.current.update(e)}},[l,D]),e.useLayoutEffect(function(){return function(){if(P.current&&"function"===typeof P.current.destroy)try{P.current.destroy(),P.current=null}catch(G_){}}},[]),e.createElement("div",{id:s,className:a,ref:R})};return s.propTypes={id:XE.string,className:XE.string,onChange:XE.func,onBlur:XE.func,onFocus:XE.func,onReady:XE.func,onEscape:XE.func,onClick:XE.func,onLoadError:XE.func,onLoaderStart:XE.func,onNetworksChange:XE.func,onConfirm:XE.func,onCancel:XE.func,onShippingAddressChange:XE.func,onShippingRateChange:XE.func,onSavedPaymentMethodRemove:XE.func,onSavedPaymentMethodUpdate:XE.func,options:XE.object},s.displayName=i,s.__elementType=t,s},k_="undefined"===typeof window,I_=e.createContext(null);I_.displayName="EmbeddedCheckoutProviderContext";S_("auBankAccount",k_);var T_=S_("card",k_),C_=(S_("cardNumber",k_),S_("cardExpiry",k_),S_("cardCvc",k_),S_("fpxBank",k_),S_("iban",k_),S_("idealBank",k_),S_("p24Bank",k_),S_("epsBank",k_),S_("payment",k_),S_("expressCheckout",k_),S_("paymentRequestButton",k_));S_("linkAuthentication",k_),S_("address",k_),S_("shippingAddress",k_),S_("paymentMethodMessaging",k_),S_("affirmMessage",k_),S_("afterpayClearpayMessage",k_),S_("taxId",k_);console.log("[DEBUG] REACT_APP_STRIPE_PUBLISHABLE_KEY:","pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7");const N_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];YE=!0;var r=Date.now();return JE().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version),s=FE;r&&i!==s&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(a,n),a}(e,t,r)})}("pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"),x_=(0,e.forwardRef)((t,n)=>{let{intentId:r,clientSecret:i,onConfirmed:s,totalAmount:a,currency:o="ils"}=t;const l=E_("calls useStripe()").stripe,c=w_("calls useElements()").elements,[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(null),{t:p}=Ut();console.log("[DEBUG] CardForm - stripe:",!!l,"elements:",!!c),(0,e.useEffect)(()=>{let e=!0;return(async()=>{try{if(console.log("[DEBUG] Payment Request - stripe:",!!l,"clientSecret:",!!i,"totalAmount:",a),!l||!i||!a)return void console.log("[DEBUG] Payment Request - missing requirements, skipping");console.log("[DEBUG] Building payment request with amount:",a,"currency:",o);const t=await async function(e){let{amount:t,currency:n="ils",country:r="US",label:i="Order",requestPayerName:s=!0,requestPayerEmail:a=!0,requestPayerPhone:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(console.log("[DEBUG] buildPaymentRequest called with:",{amount:t,currency:n,country:r,label:i}),!e||!t||t<=0)return console.log("[DEBUG] buildPaymentRequest failed - stripe:",!!e,"amount:",t),null;const l=e.paymentRequest({country:r,currency:n,total:{label:i,amount:Math.round(Number(t))||0},requestPayerName:s,requestPayerEmail:a,requestPayerPhone:o}),c=await l.canMakePayment();return console.log("[DEBUG] canMakePayment result:",c),c?(console.log("[DEBUG] Payment Request created successfully"),l):(console.log("[DEBUG] Payment Request not available - no Apple Pay/Google Pay support"),null)}catch(K_){return console.warn("[stripePaymentRequest] Failed to build payment request:",(null===K_||void 0===K_?void 0:K_.message)||K_),null}}(l,{amount:a,currency:o,label:"Fan Munch Order"});if(console.log("[DEBUG] Payment Request result:",!!t),!e||!t)return;t.on("paymentmethod",async e=>{try{const{error:t,paymentIntent:n}=await l.confirmCardPayment(i,{payment_method:e.paymentMethod.id});t?(e.complete("fail"),Jb(`Payment failed: ${t.message}`,"error",4e3)):"succeeded"===(null===n||void 0===n?void 0:n.status)?(e.complete("success"),Jb("Payment successful!","success",2500),s&&s({intentId:n.id,status:"SUCCEEDED"})):"requires_action"===(null===n||void 0===n?void 0:n.status)?(e.complete("success"),Jb("Additional authentication required","info",3500)):(e.complete("fail"),Jb(`Payment status: ${(null===n||void 0===n?void 0:n.status)||"unknown"}`,"warning",3e3))}catch(t){e.complete("fail"),Jb(`Payment error: ${t.message}`,"error",4e3)}}),f(t)}catch(t){}})(),()=>{e=!1}},[l,i,a,o]);(0,e.useImperativeHandle)(n,()=>({confirm:async()=>await(async()=>{if(!l||!c||!i)return Jb("Stripe not ready or missing payment intent","error",3e3),{ok:!1,error:"Stripe not ready"};d(!0);try{const e=c.getElement(T_),{error:t,paymentIntent:n}=await l.confirmCardPayment(i,{payment_method:{card:e}});return t?(console.error("[Stripe] Payment confirmation error:",t),Jb(`Payment failed: ${t.message}`,"error",4e3),{ok:!1,error:t.message,status:"FAILED"}):"succeeded"===n.status?(Jb("Payment successful!","success",2500),s&&s({intentId:n.id,status:"SUCCEEDED"}),{ok:!0,status:"SUCCEEDED",intentId:n.id}):"requires_action"===n.status?(Jb("Additional authentication required","info",3500),{ok:!1,status:"REQUIRES_ACTION",intentId:n.id}):(Jb(`Payment status: ${n.status}`,"warning",3e3),{ok:!1,status:n.status,intentId:n.id})}catch(e){return console.error("[Stripe] Confirmation error:",e),Jb(`Payment error: ${e.message}`,"error",4e3),{ok:!1,error:e.message,status:"ERROR"}}finally{d(!1)}})(),isReady:()=>Boolean(l&&c&&i)}));return l&&c?(0,_t.jsxs)("div",{style:{padding:16,margin:"16px 0",border:"1px solid #e5e7eb",borderRadius:8,background:"#fff"},children:[(0,_t.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:p("order.card_payment_title")}),h&&(0,_t.jsxs)("div",{style:{marginBottom:12},children:[(0,_t.jsx)(C_,{options:{paymentRequest:h}}),(0,_t.jsx)("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:"Or pay with card"})]}),(0,_t.jsx)("div",{style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#ffffff",marginBottom:"16px",minHeight:"44px",display:"flex",alignItems:"center",width:"100%"},children:(0,_t.jsx)("div",{style:{width:"100%"},children:(0,_t.jsx)(T_,{options:{style:{base:{fontSize:"16px",color:"#424770",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"},complete:{color:"#424770"}},hidePostalCode:!1}})})}),(0,_t.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"8px"},children:"Enter your card details above. All payments are processed securely through Stripe."}),u&&(0,_t.jsx)("div",{style:{fontSize:14,color:"#6b7280",textAlign:"center"},children:"Processing payment..."})]}):(0,_t.jsxs)("div",{style:{padding:16,margin:"16px 0",border:"1px solid #e5e7eb",borderRadius:8,background:"#fff"},children:[(0,_t.jsx)("div",{style:{fontWeight:600,marginBottom:12},children:p("order.card_payment_title")}),(0,_t.jsx)("div",{style:{fontSize:14,color:"#6b7280",textAlign:"center",padding:"20px"},children:"Loading Stripe payment form..."})]})}),A_=(0,e.forwardRef)((t,n)=>{let{intentId:r,clientSecret:i,mode:s,showConfirmButton:a=!1,onConfirmed:o,totalAmount:l,currency:c="ils"}=t;const u=(0,e.useRef)();return(0,e.useImperativeHandle)(n,()=>({async confirm(){var e;return null===(e=u.current)||void 0===e?void 0:e.confirm()},isReady(){var e;return null===(e=u.current)||void 0===e?void 0:e.isReady()}})),N_?(0,_t.jsx)(v_,{stripe:N_,children:(0,_t.jsx)(x_,{ref:u,intentId:r,clientSecret:i,totalAmount:l,currency:c,onConfirmed:o})}):(0,_t.jsxs)("div",{style:{padding:16,margin:"16px 0",border:"1px solid #fecaca",borderRadius:8,background:"#fef2f2"},children:[(0,_t.jsx)("div",{style:{color:"#dc2626",fontWeight:600},children:"Stripe Configuration Missing"}),(0,_t.jsxs)("div",{style:{color:"#7f1d1d",fontSize:14,marginTop:4},children:["Please add your Stripe publishable key to the .env file:",(0,_t.jsx)("br",{}),(0,_t.jsx)("code",{style:{background:"#f3f4f6",padding:"2px 4px",borderRadius:3},children:"REACT_APP_STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here"})]})]})}),P_=()=>{const t=te(),n=(0,e.useRef)(null),[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)({row:"",seatNo:"",section:"",seatDetails:"",area:"",entrance:"",stand:""}),[o,l]=(0,e.useState)(0),[c,u]=(0,e.useState)(0),[d,h]=(0,e.useState)({amount:0,percentage:0}),[f,p]=(0,e.useState)(0),[m,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)({}),[w,b]=(0,e.useState)(null),[E,_]=(0,e.useState)(null);(0,e.useEffect)(()=>{const e=Gb.getCartItems(),t=Gb.getTotalPrice();l(t);const n=Array.isArray(e)?e.reduce((e,t)=>e+(t.quantity||0),0):0,r=2*n;u(r);const i=localStorage.getItem("selectedTip");if(i){const e=JSON.parse(i);h(e),p(t+r+e.amount)}else p(t+r);const s=Tt.getSeatInfo();s&&a(e=>({...e,...s})),navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{_({latitude:e.coords.latitude,longitude:e.coords.longitude})},e=>{console.log("\u2139\ufe0f Geolocation permission denied or unavailable:",null===e||void 0===e?void 0:e.message)},{enableHighAccuracy:!1,maximumAge:6e4,timeout:5e3})},[]),(0,e.useEffect)(()=>{let e=!1;return(async()=>{try{const o={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE.trim()?{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE.trim():"3000"===window.location.port?"http://localhost:5001":"";({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}).REACT_APP_CURRENCY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_CURRENCY.trim();if(null!==r&&void 0!==r&&r.id&&null!==r&&void 0!==r&&r.clientSecret)return;const l=await fetch(`${o}/api/stripe/create-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:f,currency:"ils",vendorConnectedAccountId:"acct_1S570jKWPD2pzAyo"})}),c=await l.text();let u;try{u=JSON.parse(c)}catch(a){}if(!l.ok)return void console.warn("OrderConfirm Pre-create Stripe intent failed:",c);var t,n,s;if(!e)i({id:null===(t=u)||void 0===t?void 0:t.intentId,clientSecret:null===(n=u)||void 0===n?void 0:n.clientSecret,mode:null===(s=u)||void 0===s?void 0:s.mode})}catch(K_){console.warn("[OrderConfirm] Pre-create intent error:",(null===K_||void 0===K_?void 0:K_.message)||K_)}})(),()=>{e=!0}},[f,null===r||void 0===r?void 0:r.id,null===r||void 0===r?void 0:r.clientSecret]);return(0,_t.jsx)("div",{className:"order-confirm-screen",children:(0,_t.jsxs)("div",{className:"order-confirm-container",children:[(0,_t.jsx)(RE,{}),(0,_t.jsx)(OE,{ticketImage:w,onImageUpload:e=>{const t=e.target.files[0];if(t){const e=URL.createObjectURL(t);b(e),console.log("\ud83d\udcf7 Ticket image uploaded:",t.name)}},onCameraCapture:()=>{console.log("\ud83d\udcf8 Camera capture requested")}}),(0,_t.jsx)(DE,{formData:s,errors:y,onChange:(e,t)=>{a(n=>({...n,[e]:t})),y[e]&&v(t=>({...t,[e]:""}))}}),(0,_t.jsx)(LE,{orderTotal:o,deliveryFee:c,tipData:d,finalTotal:f}),(0,_t.jsx)(A_,{ref:n,intentId:null===r||void 0===r?void 0:r.id,clientSecret:null===r||void 0===r?void 0:r.clientSecret,mode:null===r||void 0===r?void 0:r.mode,totalAmount:f,currency:"ils",showConfirmButton:!1}),(0,_t.jsx)(jE,{loading:m,finalTotal:f,onPlaceOrder:async()=>{if((()=>{const e={};return s.row.trim()||(e.row="Please enter row number"),s.seatNo.trim()||(e.seatNo="Please enter seat number"),v(e),0===Object.keys(e).length})()){g(!0);try{var e;const p={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE.trim()?{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE.trim():"3000"===window.location.port?"http://localhost:5001":"";({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}).REACT_APP_CURRENCY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_CURRENCY.trim();if(null===r||void 0===r||!r.id||null===r||void 0===r||!r.clientSecret){var a,o,l;const e=await fetch(`${p}/api/stripe/create-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:f,currency:"ils",vendorConnectedAccountId:"acct_1S570jKWPD2pzAyo"})}),t=await e.text();let n;try{n=JSON.parse(t)}catch(u){}if(!e.ok)throw new Error(n&&(n.error||n.message)||t||"Create Stripe intent failed");i({id:null===(a=n)||void 0===a?void 0:a.intentId,clientSecret:null===(o=n)||void 0===o?void 0:o.clientSecret,mode:null===(l=n)||void 0===l?void 0:l.mode}),Jb("\u2705 Stripe payment intent ready. Processing your order...","success",2e3)}if(null!==(e=n.current)&&void 0!==e&&e.confirm){let e=0;const t=15;for(;(!n.current.isReady||!n.current.isReady())&&e<t;)await new Promise(e=>setTimeout(e,200)),e+=1;if(!n.current.isReady||!n.current.isReady())throw new Error("Stripe card element not ready");const r=await n.current.confirm();var c;if(console.log("[OrderConfirm] Stripe confirm() result:",r),null===r||void 0===r||!r.ok)throw new Error((null===r||void 0===r||null===(c=r.error)||void 0===c?void 0:c.message)||"Stripe card confirmation failed")}const m=Nt.getUserData(),g=xt.getSelectedStadium(),y=Gb.getCartItems();if(!m||!g||0===y.length)throw new Error("Missing required data to create order");const v={row:s.row,seatNo:s.seatNo,section:s.section,seatDetails:s.seatDetails,area:s.area,entrance:s.entrance,stand:s.stand,ticketImage:w||""},b=Array.isArray(y)?y.reduce((e,t)=>e+(t.quantity||0),0):0,_=2*b,S=qb.calculateOrderTotals(y,_,d.amount,0);let k=null;try{if(E&&"number"===typeof E.latitude&&"number"===typeof E.longitude){const e=await np(Kh(Rw,"deliveryUsers"));let t={id:null,dist:Number.POSITIVE_INFINITY};const n=e=>e*Math.PI/180,r=(e,t,r,i)=>{const s=n(r-e),a=n(i-t),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n(e))*Math.cos(n(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))};e.forEach(e=>{const n=e.data()||{};if(!0!==n.isActive)return;const i=n.location;let s,a;if(i&&"number"===typeof i.latitude&&"number"===typeof i.longitude?(s=i.latitude,a=i.longitude):Array.isArray(i)&&2===i.length&&(s=Number(i[0]),a=Number(i[1])),"number"===typeof s&&"number"===typeof a&&!Number.isNaN(s)&&!Number.isNaN(a)){const i=r(E.latitude,E.longitude,s,a);i<t.dist&&(t={id:n.id||e.id,dist:i})}}),k=t.id}}catch(K_){console.warn("Could not resolve nearest delivery user:",(null===K_||void 0===K_?void 0:K_.message)||K_)}let I=null;try{const e=Array.from(new Set(y.flatMap(e=>Array.isArray(e.shopIds)?e.shopIds:e.shopId?[e.shopId]:[]))),t=e=>e*Math.PI/180,n=(e,n,r,i)=>{const s=t(r-e),a=t(i-n),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t(e))*Math.cos(t(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},r=e=>"number"===typeof e?e:"string"===typeof e?Number(e.replace(/[^0-9+\-.]/g,"")):NaN;let i=[];if(e.length>0){i=(await Promise.all(e.map(e=>ep(Gh(Rw,"shops",e))))).filter(e=>e.exists()).map(e=>({id:e.id,data:e.data()}))}else{i=(await np(Kh(Rw,"shops"))).docs.map(e=>({id:e.id,data:e.data()}))}let s={id:null,dist:Number.POSITIVE_INFINITY};i.forEach(e=>{const t=e.data||{};let i,a;if(null!=t.latitude&&null!=t.longitude?(i=r(t.latitude),a=r(t.longitude)):t.location&&"number"===typeof t.location.latitude&&"number"===typeof t.location.longitude?(i=t.location.latitude,a=t.location.longitude):Array.isArray(t.location)&&2===t.location.length&&(i=r(t.location[0]),a=r(t.location[1])),"number"===typeof i&&"number"===typeof a&&!Number.isNaN(i)&&!Number.isNaN(a)&&E){const t=n(E.latitude,E.longitude,i,a);t<s.dist&&(s={id:e.id,dist:t})}}),I=s.id||null}catch(K_){console.warn("Could not resolve nearest shop:",(null===K_||void 0===K_?void 0:K_.message)||K_)}const T=$b.createFromCart({cartItems:y,subtotal:S.subtotal,deliveryFee:S.deliveryFee,discount:S.discount,tipAmount:S.tipAmount,tipPercentage:d.percentage||0,userData:m,seatInfo:v,stadiumId:g.id,shopId:I||y[0].shopId||"",customerLocation:E,location:null,deliveryUserId:k||null}),C=await qb.createOrder(T);if(k)try{await(async(e,t)=>{try{const n={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE.trim()?{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RyfgTKj6LjssenC2Wy0Omeu3bQMa2hsc33riQoi43TU7AyIAQ08zELQWLOBvcRBgCyKMYIQ0rhOOsr0mTqanrse00W2xoKNg7"}.REACT_APP_API_BASE.trim():"3000"===window.location.port?"http://localhost:5001":"",r={deliveryUserId:e,orderData:t},i=await fetch(`${n}/api/notifications/send-new-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok)return console.log("\u2705 Notification sent to delivery user successfully"),!0;{const e=await i.text();return console.warn("\u26a0\ufe0f Failed to send notification to delivery user:",e),!1}}catch(G_){return console.warn("\u26a0\ufe0f Error sending notification to delivery user:",G_),!1}})(k,{orderId:C.orderId,customerName:`${m.firstName} ${m.lastName}`.trim(),stadiumName:g.name||g.title||"Stadium",seatInfo:v,totalAmount:f,deliveryFee:_,customerLocation:E,shopId:I||y[0].shopId||""})}catch(h){console.warn("\u26a0\ufe0f Error sending notification to delivery user:",h)}Gb.clearCart(),localStorage.removeItem("selectedTip");Jb(`${"Order placed successfully!"} Order ID: ${C.orderId}`,"success",4e3),setTimeout(()=>t("/home",{replace:!0}),1200)}catch(G_){console.error("\u274c Payment/Order creation failed:",G_);const t=G_.message||"Payment failed. Please try again.";Jb(t,"error",5e3)}finally{g(!1)}}}})]})})};var R_=n(245);const D_=[{key:Bb.PENDING,labelKey:"track.order_received"},{key:Bb.PREPARING,labelKey:"track.preparing"},{key:Bb.DELIVERING,labelKey:"track.on_the_way"},{key:Bb.DELIVERED,labelKey:"track.delivered"}];function O_(){const{orderId:t}=ne(),n=te(),{t:r,lang:i}=Ut(),s="he"===i,[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)("");(0,e.useEffect)(()=>{if(!t)return;c(!0);const e=ip(Gh(Rw,"orders",t),e=>{if(!e.exists())return d("Order not found"),o(null),void c(!1);d(""),o({id:e.id,...e.data()}),c(!1)},e=>{d((null===e||void 0===e?void 0:e.message)||"Failed to load order"),c(!1)});return()=>e()},[t]);const h=e=>{switch(e){case Bb.PENDING:return(0,_t.jsx)(mb,{});case Bb.PREPARING:return(0,_t.jsx)(yb,{});case Bb.DELIVERING:return(0,_t.jsx)(gb,{});case Bb.DELIVERED:return(0,_t.jsx)(eb,{});default:return(0,_t.jsx)(mb,{})}},f=D_.map(e=>({...e,label:r(e.labelKey),icon:h(e.key)})),p=a?f.findIndex(e=>e.key===a.status):-1,m=(null===a||void 0===a?void 0:a.orderCode)||(null===a||void 0===a?void 0:a.orderId)||(null===a||void 0===a?void 0:a.id)||"";return(0,_t.jsxs)("div",{className:"order-track-screen",dir:s?"rtl":"ltr",children:[(0,_t.jsxs)("div",{className:"hero",children:[(0,_t.jsx)("button",{className:"back-btn","aria-label":r("common.back"),onClick:()=>n(-1),children:s?(0,_t.jsx)(bb,{}):(0,_t.jsx)(wb,{})}),(0,_t.jsx)("div",{className:"hero-title",children:r("track.order")}),(0,_t.jsxs)("div",{className:"order-code",children:["#",(null===a||void 0===a?void 0:a.orderId)||(null===a||void 0===a?void 0:a.id)]})]}),(0,_t.jsx)("div",{className:"content",children:l?(0,_t.jsx)("div",{className:"loading",children:r("track.loading")}):u?(0,_t.jsx)("div",{className:"error",children:u}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"qr-card",children:m?(0,_t.jsx)("div",{className:"qr-wrap",children:(0,_t.jsx)(R_.Ay,{value:String(m),size:140})}):(0,_t.jsx)("div",{className:"qr-placeholder",children:r("track.no_code")})}),(0,_t.jsx)("div",{className:"timeline",children:f.map((e,t)=>{var n;const r=t<=p||-1===p&&0===t,i=t===p||-1===p&&0===t,s=t<p,o=t<f.length-1;return(0,_t.jsxs)("div",{className:`timeline-item ${r?"active":""} ${i?"current":""} ${s?"done":""} ${o?"has-next":""}`,children:[(0,_t.jsx)("div",{className:"dot"}),(0,_t.jsx)("div",{className:"step-card",children:(0,_t.jsxs)("div",{className:"step-row",children:[(0,_t.jsx)("span",{className:`step-icon ${r?"on":""} ${i?"glow":""}`,children:e.icon}),(0,_t.jsxs)("div",{className:"step-text",children:[(0,_t.jsx)("div",{className:"step-title",children:e.label}),(0,_t.jsx)("div",{className:"step-sub",children:null!==a&&void 0!==a&&null!==(n=a.createdAt)&&void 0!==n&&n.toDate?a.createdAt.toDate().toLocaleString():""})]})]})})]},e.key)})}),(0,_t.jsxs)("div",{className:"items-section",children:[(0,_t.jsx)("div",{className:"items-title",children:r("track.items")}),Array.isArray(null===a||void 0===a?void 0:a.cart)&&a.cart.length>0?a.cart.map((e,t)=>{return(0,_t.jsxs)("div",{className:"item-card modern",children:[(0,_t.jsxs)("div",{className:"item-main",children:[(0,_t.jsxs)("div",{className:"item-top",children:[(0,_t.jsxs)("span",{className:"qty-pill",children:[r("track.qty")," ",e.quantity||1]}),(0,_t.jsx)("div",{className:"name",children:e.name||r("track.item")})]}),(0,_t.jsx)("div",{className:"desc clamp-2",children:e.description||""}),(0,_t.jsx)("div",{className:"price ils",children:(n=e.price,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:2}).format(n||0))})]}),(0,_t.jsx)("div",{className:"item-media",children:Array.isArray(e.images)&&e.images.length>0?(0,_t.jsx)("img",{src:e.images[0],alt:e.name||"item",onError:e=>{e.currentTarget.style.display="none"}}):(0,_t.jsx)("div",{className:"thumb","aria-hidden":!0,children:"\ud83e\udd64"})})]},t);var n}):(0,_t.jsx)("div",{className:"empty-items",children:r("track.no_items")})]})]})})]})}const L_=()=>{const t=te(),n=X(),{t:r}=Ut(),[i,s]=(0,e.useState)(0),[a,o]=(0,e.useState)(0);(0,e.useEffect)(()=>{l(),c();const e=e=>{var t;const n=(null===(t=e.detail)||void 0===t?void 0:t.totalItems)||0;s(n)},t=()=>{console.log("\ud83d\udd14 Order update event received, refreshing badge..."),c()},n=setInterval(()=>{c()},3e4);return window.addEventListener("cartUpdated",e),window.addEventListener("orderUpdated",t),()=>{window.removeEventListener("cartUpdated",e),window.removeEventListener("orderUpdated",t),clearInterval(n)}},[]);const l=()=>{const e=Gb.getTotalItems();s(e)},c=async()=>{try{const e=Nt.getUserData();if(!e||!e.id)return void o(0);const t=(await qb.fetchOrdersForUser(e.id)).filter(e=>[Bb.PENDING,Bb.PREPARING,Bb.DELIVERING].includes(e.status));o(t.length),console.log("\ud83d\udd14 Active orders count updated:",t.length)}catch(G_){console.error("\u274c Error fetching active orders count:",G_),o(0)}},u=(0,e.useMemo)(()=>[{id:"home",icon:ib,activeIcon:ib,label:r("nav.home"),path:"/home"},{id:"orders",icon:ab,activeIcon:ab,label:r("nav.orders"),path:"/orders"},{id:"cart",icon:lb,activeIcon:lb,label:r("nav.cart"),path:"/cart"},{id:"profile",icon:Sb,activeIcon:Sb,label:r("nav.profile"),path:"/profile"}],[r]),d=e=>n.pathname===e,h=["/auth","/onboarding","/stadium-selection","/food"].some(e=>n.pathname.startsWith(e)),f=Nt.getUserData();return h||!(f&&null!==f)?null:(0,_t.jsx)("div",{className:"bottom-navigation",children:(0,_t.jsx)("div",{className:"nav-container",children:u.map(n=>(0,_t.jsxs)("button",{className:"nav-item "+(d(n.path)?"active":""),onClick:()=>{return e=n.path,void t(e);var e},children:[(0,_t.jsxs)("div",{className:"nav-icon",children:[e.createElement(d(n.path)?n.activeIcon:n.icon,{className:"icon "+(d(n.path)?"active":"")}),"cart"===n.id&&i>0&&(0,_t.jsx)("span",{className:"cart-badge",children:i>99?"99+":i}),"orders"===n.id&&a>0&&(0,_t.jsx)("span",{className:"orders-badge",children:a>99?"99+":a})]}),(0,_t.jsx)("span",{className:"nav-label",children:n.label})]},n.id))})})},j_=["./assets/images/on-boarding-1.png","./assets/images/on-boarding-2.png","./assets/images/on-boarding-3.png"];function M_(e){const t=String(e||"food");let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n|=0;const r=Math.abs(n)%j_.length;return j_[r]}function F_(){const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(""),c=te(),u=X(),{title:d,shopId:h}=(0,e.useMemo)(()=>{const e=new URLSearchParams(u.search);return{title:e.get("shopName")||"\u05db\u05dc \u05d4\u05ea\u05e4\u05e8\u05d9\u05d8",shopId:e.get("shopId")||null}},[u.search]);(0,e.useEffect)(()=>{(async()=>{try{i(!0),a(null);const e=xt.getSelectedStadium();let t;if(t=e&&e.id?await Mb.getStadiumMenu(e.id,200):await Mb.getAllMenuItems(),t.success){let e=t.foods||[];h&&(e=e.filter(e=>Array.isArray(e.shopIds)&&e.shopIds.includes(h))),n(e)}else a(t.error||"Failed to load menu items"),n([])}catch(K_){a("Failed to load menu items"),n([])}finally{i(!1)}})()},[h]);const f=(0,e.useMemo)(()=>{if(!o.trim())return t;const e=o.toLowerCase();return t.filter(t=>{var n,r,i;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(r=t.description)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(i=t.category)||void 0===i?void 0:i.toLowerCase().includes(e))})},[t,o]),p=(0,e.useMemo)(()=>o.trim()?`${d} (${f.length})`:d,[d,o,f.length]);return(0,_t.jsxs)("div",{className:"menu-page fade-in",children:[(0,_t.jsxs)("div",{className:"menu-page-header",children:[(0,_t.jsx)("button",{className:"back-btn",onClick:()=>c(-1),"aria-label":"Back",children:(0,_t.jsx)(Eb,{size:22})}),(0,_t.jsx)("h1",{className:"menu-page-title",children:p}),(0,_t.jsx)("div",{className:"header-spacer"})]}),(0,_t.jsx)("div",{className:"menu-page-search",children:(0,_t.jsx)("input",{className:"menu-search-input",type:"search",value:o,onChange:e=>l(e.target.value),placeholder:"\u05d7\u05e4\u05e9 \u05d1\u05db\u05dc \u05d4\u05ea\u05e4\u05e8\u05d9\u05d8..."})}),r&&(0,_t.jsx)("div",{className:"menu-page-status",children:"Loading..."}),s&&(0,_t.jsx)("div",{className:"menu-page-status error",children:s}),!r&&!s&&(0,_t.jsx)("div",{className:"menu-grid",children:f.map(e=>(0,_t.jsxs)("div",{className:"menu-grid-card fade-up",onClick:()=>(e=>{c(`/food/${e.id}`)})(e),children:[(0,_t.jsx)("div",{className:"menu-grid-image",children:(0,_t.jsx)("img",{src:e.getPrimaryImage()||M_(e.id||e.name),alt:e.name,onError:t=>{t.currentTarget.src=M_(e.id||e.name)}})}),(0,_t.jsxs)("div",{className:"menu-grid-content",children:[(0,_t.jsx)("h3",{className:"menu-grid-name",children:e.name}),(0,_t.jsxs)("p",{className:"menu-grid-price",children:["\u20aa",e.price.toFixed(2)]})]})]},e.id))})]})}const U_=()=>(0,_t.jsxs)("div",{className:"screen static-screen",children:[(0,_t.jsx)("h1",{children:"About App"}),(0,_t.jsx)("p",{children:"Fans Munch helps you order food to your seat at the stadium. We focus on speed, simplicity, and reliability."}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Version: 1.0.0"}),(0,_t.jsxs)("li",{children:["Build Date: ",(new Date).toLocaleDateString()]})]})]}),z_=()=>(0,_t.jsxs)("div",{className:"screen static-screen",children:[(0,_t.jsx)("h1",{children:"Terms and Conditions"}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"1. Introduction"}),(0,_t.jsx)("p",{children:"By using Fans Munch, you agree to these terms. Please read them carefully."})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"2. Orders and Payments"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"All orders are subject to availability and acceptance."}),(0,_t.jsx)("li",{children:"Payments are processed securely by our partners."}),(0,_t.jsx)("li",{children:"Prices and fees may vary by venue."})]})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"3. Delivery"}),(0,_t.jsx)("p",{children:"Delivery times depend on venue operations and event conditions."})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"4. Refunds"}),(0,_t.jsx)("p",{children:"Issues with your order? Contact support from within the app."})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"5. Responsible Use"}),(0,_t.jsx)("p",{children:"Do not misuse the service or attempt to disrupt the platform."})]})]}),V_=()=>(0,_t.jsxs)("div",{className:"screen static-screen",children:[(0,_t.jsx)("h1",{children:"Privacy Policy"}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"Data We Collect"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:"Account info (name, email)"}),(0,_t.jsx)("li",{children:"Order and payment metadata"}),(0,_t.jsx)("li",{children:"Device and usage data to improve reliability"})]})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"How We Use Data"}),(0,_t.jsx)("p",{children:"To process orders, provide support, and improve the app experience."})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"Sharing"}),(0,_t.jsx)("p",{children:"We do not sell your data. Limited sharing with payment and delivery partners is required to fulfill your order."})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"Your Rights"}),(0,_t.jsx)("p",{children:"You can request deletion or export of your data by contacting support."})]}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"Contact"}),(0,_t.jsx)("p",{children:"Email: support@fansmunch.example"})]})]}),B_=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(!1);return(0,_t.jsxs)("div",{className:"screen form-screen",children:[(0,_t.jsx)("h1",{children:"Feedback"}),r?(0,_t.jsx)("div",{className:"section-card",children:(0,_t.jsx)("p",{children:"Thanks for your feedback! We'll review it shortly."})}):(0,_t.jsx)("form",{onSubmit:e=>{e.preventDefault(),i(!0)},className:"simple-form",children:(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"Share your thoughts"}),(0,_t.jsx)("label",{className:"helper",htmlFor:"fb-email",children:"Email (optional)"}),(0,_t.jsx)("input",{id:"fb-email",type:"email",placeholder:"you@example.com"}),(0,_t.jsx)("label",{className:"helper",htmlFor:"fb-category",children:"Category"}),(0,_t.jsxs)("select",{id:"fb-category",defaultValue:"general",children:[(0,_t.jsx)("option",{value:"general",children:"General"}),(0,_t.jsx)("option",{value:"feature",children:"Feature Request"}),(0,_t.jsx)("option",{value:"ui",children:"Design / UI"}),(0,_t.jsx)("option",{value:"performance",children:"Performance"})]}),(0,_t.jsx)("label",{className:"helper",htmlFor:"fb-message",children:"Message"}),(0,_t.jsx)("textarea",{id:"fb-message",value:t,onChange:e=>n(e.target.value),placeholder:"Tell us what you think",rows:6}),(0,_t.jsx)("button",{type:"submit",children:"Send"})]})})]})},$_=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(!1);return(0,_t.jsxs)("div",{className:"screen form-screen",children:[(0,_t.jsx)("h1",{children:"Report a Problem"}),r?(0,_t.jsx)("div",{className:"section-card",children:(0,_t.jsx)("p",{children:"Thanks, we received your report. Our team will investigate."})}):(0,_t.jsx)("form",{onSubmit:e=>{e.preventDefault(),i(!0)},className:"simple-form",children:(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:"What went wrong?"}),(0,_t.jsx)("label",{className:"helper",htmlFor:"rp-steps",children:"Steps to reproduce (optional)"}),(0,_t.jsx)("textarea",{id:"rp-steps",value:t,onChange:e=>n(e.target.value),placeholder:"Describe the issue",rows:6}),(0,_t.jsx)("button",{type:"submit",children:"Submit"})]})})]})},H_=()=>{const[t,n]=(0,e.useState)(Rt.getLanguagePreference()||"en"),{t:r}=Ut();return(0,e.useEffect)(()=>{Rt.setLanguagePreference(t);const e="he"===t?"rtl":"ltr";document.documentElement.setAttribute("dir",e)},[t]),(0,_t.jsxs)("div",{className:"screen static-screen",children:[(0,_t.jsx)("h1",{children:r("settings.select_language")}),(0,_t.jsxs)("div",{className:"section-card",children:[(0,_t.jsx)("h2",{children:r("settings.app_language")}),(0,_t.jsxs)("div",{className:"lang-options",children:[(0,_t.jsx)("button",{className:"lang-btn "+("en"===t?"active":""),onClick:()=>{n("en"),window.dispatchEvent(new CustomEvent("language-changed",{detail:"en"}))},children:r("settings.english")}),(0,_t.jsx)("button",{className:"lang-btn "+("he"===t?"active":""),onClick:()=>{n("he"),window.dispatchEvent(new CustomEvent("language-changed",{detail:"he"}))},children:r("settings.hebrew")})]}),(0,_t.jsx)("p",{className:"helper",children:r("settings.rtl_note")}),(0,_t.jsxs)("p",{children:[r("settings.current"),": ",r("en"===t?"settings.english":"settings.hebrew")]})]})]})};const q_=function(){return(0,e.useEffect)(()=>{try{const e=new URLSearchParams(window.location.search);if(e&&Array.from(e.keys()).length>0){const t={row:e.get("row")||"",seatNo:e.get("seat")||e.get("seatNo")||"",section:e.get("section")||"",seatDetails:e.get("details")||e.get("seatDetails")||"",area:e.get("area")||"",entrance:e.get("entrance")||e.get("gate")||"",stand:e.get("stand")||"",ticketImage:e.get("ticketImage")||""};Object.values(t).some(e=>e&&""!==String(e).trim())&&Tt.setSeatInfo(t)}}catch(K_){console.log("QR param parse skipped:",null===K_||void 0===K_?void 0:K_.message)}},[]),(0,_t.jsx)(Ft,{children:(0,_t.jsx)(kt,{children:(0,_t.jsx)(nt,{children:(0,_t.jsxs)("div",{className:"App",children:[(0,_t.jsxs)(_e,{children:[(0,_t.jsx)(be,{path:"/",element:Nt.isLoggedIn()?(0,_t.jsx)(we,{to:"/home",replace:!0}):(0,_t.jsx)(Mw,{})}),(0,_t.jsx)(be,{path:"/splash",element:(0,_t.jsx)(zt,{})}),(0,_t.jsx)(be,{path:"/onboarding",element:(0,_t.jsx)(Vt,{})}),(0,_t.jsx)(be,{path:"/auth",element:(0,_t.jsx)(Mw,{})}),(0,_t.jsx)(be,{path:"/stadium-selection",element:(0,_t.jsx)(Bw,{})}),(0,_t.jsx)(be,{path:"/home",element:(0,_t.jsx)(Vb,{})}),(0,_t.jsx)(be,{path:"/menu",element:(0,_t.jsx)(F_,{})}),(0,_t.jsx)(be,{path:"/orders",element:(0,_t.jsx)(Wb,{})}),(0,_t.jsx)(be,{path:"/cart",element:(0,_t.jsx)(sE,{})}),(0,_t.jsx)(be,{path:"/precart",element:(0,_t.jsx)(aE,{})}),(0,_t.jsx)(be,{path:"/profile",element:(0,_t.jsx)(mE,{})}),(0,_t.jsx)(be,{path:"/settings/about",element:(0,_t.jsx)(U_,{})}),(0,_t.jsx)(be,{path:"/settings/terms",element:(0,_t.jsx)(z_,{})}),(0,_t.jsx)(be,{path:"/settings/privacy",element:(0,_t.jsx)(V_,{})}),(0,_t.jsx)(be,{path:"/settings/feedback",element:(0,_t.jsx)(B_,{})}),(0,_t.jsx)(be,{path:"/settings/report",element:(0,_t.jsx)($_,{})}),(0,_t.jsx)(be,{path:"/settings/language",element:(0,_t.jsx)(H_,{})}),(0,_t.jsx)(be,{path:"/food/:foodId",element:(0,_t.jsx)(kE,{})}),(0,_t.jsx)(be,{path:"/shop-menu/:shopId",element:(0,_t.jsx)(PE,{})}),(0,_t.jsx)(be,{path:"/tip",element:(0,_t.jsx)(AE,{})}),(0,_t.jsx)(be,{path:"/order/confirm",element:(0,_t.jsx)(P_,{})}),(0,_t.jsx)(be,{path:"/order/:orderId",element:(0,_t.jsx)(O_,{})}),(0,_t.jsx)(be,{path:"*",element:(0,_t.jsx)(we,{to:"/",replace:!0})})]}),(0,_t.jsx)(L_,{}),(0,_t.jsx)(Xb,{})]})})})})},W_=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)})};t.createRoot(document.getElementById("root")).render((0,_t.jsx)(e.StrictMode,{children:(0,_t.jsx)(Ft,{children:(0,_t.jsx)(q_,{})})})),W_()})()})();
//# sourceMappingURL=main.6c24e0d8.js.map